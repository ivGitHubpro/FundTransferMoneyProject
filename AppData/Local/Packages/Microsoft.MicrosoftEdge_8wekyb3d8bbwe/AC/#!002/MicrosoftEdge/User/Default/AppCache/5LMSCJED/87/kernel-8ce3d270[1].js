var globalLeft="left",g_ashsC,g_hsSetup;define("dir.tokens",{ltr:globalLeft=="left",left:"left",paddingLeft:"padding-left",paddingRight:"padding-right",marginLeft:"margin-left",marginRight:"margin-right"});define("trackingHelper.tokens",{tradeDoublerMarketId:"2811264",tradeDoublerProgramId:"213748",tradeDoublerAjaxUrlFormat:"{0}/{2}/{1}/tduidajax?epi={3}"});define("jqBehavior",["jquery","viewport"],function(n){return function(t,i,r){function u(n){var t=n.length;return t>1?function(){for(var i=0;i<t;i++)n[i]()}:t?n[0]:f}function f(){}if(typeof t!="function")throw"Behavior constructor must be a function";if(i&&typeof i!="object")throw"Defaults must be an object or null";if(r&&typeof r!="object")throw"Exclude must be an object or null";return r=r||{},function(f,e,o){function c(n){n&&(typeof n.setup=="function"&&l.push(n.setup),typeof n.teardown=="function"&&a.push(n.teardown),typeof n.update=="function"&&v.push(n.update))}var h;if(o&&typeof o!="object")throw"Options must be an object or null";var s=n.extend(!0,{},i,o),l=[],a=[],v=[],y=!0;if(r.query){if(typeof f!="string")throw"Selector must be a string";c(t(f,s))}else h=n(f,e),r.each?c(t(h,s)):(y=h.length>0,h.each(function(){var i=n(this);c(t(i,r.data?s:n.extend(!0,{},s,i.data?i.data():{})))}));return y?{setup:u(l),teardown:u(a),update:u(v)}:null}}});define("telemetry.constants",{logSamplingRate:"0",FireTelemetry:"fireTelemetryBeacon",GET:"GET",POST:"POST",Ctag:"ctag",Comscore:"scorecard",OTF:"udc",Exp:"EX:",ResetIdx:"resetTelemetryEventIndex"});define("afire",["image"],function(n){return function(t){if(t){var i=new n;i.onload=i.onerror=function(){i.onload=i.onerror=null};i.src=t.replace(/&amp;/gi,"&")}}});define("track.generic",["track","extend","trackInfo","telemetry.constants","mediator"],function(n,t,i,r,u){function f(n){this.defaultOpts=t(!0,{},e,n);this.samplingRate=this.defaultOpts.samplingRate}var e={base:"",samplingRate:100,eventAlias:{submit:"click",mouseenter:"click",mouseleave:"click",click_nonnav:"click",mouseenter_nav:"click",contextmenu:"click"}};return f.prototype={getEventTrackingUrl:function(t){var f=this.defaultOpts,e;if(t||(t=(i.event||{}).type),e=f[t],!e&&f.eventAlias&&(e=f[f.eventAlias[t]]),e){var o=f.base+(e.url?e.url:""),s=n.mapTelemetryParams(f.common,f.commonMap,e.param,e.paramMap),h={url:o,requestType:r.GET,eventType:t,params:s,trackingType:f.id};i.shouldFireTelemetry()&&u.pub(r.FireTelemetry,h)}return""},getPageViewTrackingUrl:function(){return this.getEventTrackingUrl("impr")}},f});define("visibility",["window","document"],function(n,t){function f(){function r(){var r,u;if(t){for(r=[],u=0;u<n.length;u++)try{n[u](i)}catch(f){r.push(f)}if(n=[],r.length)throw r;}}function u(){t=!0;i=arguments;r()}function f(){return{then:function(t){n.push(t);r()},always:function(){return this.then(arguments)}}}var n=[],t=!1,i=null;return{promise:f,resolve:u}}function h(){var r=["webkit","moz","ms","o"],n,i;if(typeof t.hidden!="undefined")return"hidden";for(n=0;n<r.length;n++)if(i=r[n]+"Hidden",i in t)return i}function u(){return i?t[i]:!1}function s(){u()?(r=new f,e=!0):r.resolve()}function c(){return e?1:0}function l(i,r,f,e){var s,h,c;if(u()||!i)return!1;if(e=e||n.innerHeight,r=r||n.innerWidth,f||f===0||(f=0,s=t.getElementById("content"),s&&(h=s.getBoundingClientRect(),r=h.right,f=h.left)),c=!1,define.is("jquery")&&n.jQuery&&i instanceof n.jQuery){if(!i.length)return!1;i=i[0]}var o=i.getBoundingClientRect(),l=(o.top>=0||o.bottom>=0)&&(o.top<e||o.bottom<e),a=(o.left>=f||o.right>f)&&(o.left<r||o.right<=r);return c=o.height!==0||o.width!==0,c&&l&&a}function a(){return r.promise()}var r=new f,i=h(),e=!1,o;return i&&(o=i.replace(/[H|h]idden/,"")+"visibilitychange",t.addEventListener(o,s)),s(),{isHidden:u,notifyWhenPageVisible:a,isElementTrulyVisible:l,wasBrowserHiddenAtLeastOnce:c}});define("trackInfo",["dom","pageInstance","getCookie","screen","window","document","viewAware","deviceGroup","logging","visibility","extend","requestPageRevealCallback","headData","perfMarker","evaluate","telemetry.constants","mediator","telemetryDataTypes"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){function ct(n,t){this.element=n;this.visible=t;this.visible&&(this.compress=function(){var n=this.element.getAttribute("data-m");try{return JSON.parse(n)}catch(t){return n}})}function st(){ut=u.innerWidth||f.documentElement.clientWidth;ft=u.innerHeight||f.documentElement.clientHeight}function lt(){return u.innerHeight||f.documentElement.clientHeight||f.body.clientHeight||0}function at(){return u.pageYOffset||f.body.scrollTop||f.documentElement.scrollTop||0}function vt(){return Math.max(f.body.scrollHeight||0,f.documentElement.scrollHeight||0,f.body.offsetHeight||0,f.documentElement.offsetHeight||0,f.body.clientHeight||0,f.documentElement.clientHeight||0)}function yt(){var n={};return u&&u.adsEnabled!=null&&(n.adoni=+u.adsEnabled),n}function pt(n,t,i){return i?t?[t,i].join(n):i:t}function ht(n,t,i){var s,u,h,e,l,r,o;if(!i)return t?t:"";if(!t)return i?i:"";var f={},c=!1,a=i.split(n);for(s=0;s<a.length;s++)if(u=a[s].split(":"),u[0]){if(!c&&u[0]&&t.indexOf(u[0])!=-1){for(h=t.split(n),e=0;e<h.length;e++)h[e]&&(l=h[e].split(":"),f[l[0]]=l[1]);c=!0}f[u[0]]=u[1]}r="";for(o in f)o&&(r!==""&&(r+=n),r+=o,f[o]&&(r+=":"+f[o]));return!c&&t&&(r=r?r+n+t:t),r}var wt=n.attr,bt=n.parent,nt,ut,ft,d,tt=[0,0],ot=!0,et={},it=[],rt="",g={},k={notrack:"notrack",cmSeparator:">",defaultModule:"body",defaultFormHeadline:"[form submit]",piitxt:"data-piitxt",piiurl:"piiurl",wrapperId:"wrapper",MUIDCookie:"MUID",gestureKey:"touch_gesture",gestureType:{tap:"tap",rightclick:"rightclick"},eventTypes:{click:"click",nonNavClckEvt:"click_nonnav",submit:"submit",contextmenu:"contextmenu",mouseenter:"mouseenter",imprUpdate:"impr_update",adPlay:"AdPlay",contentPlay:"ContentPlay",videoClickNonNav:"Click_Non-nav"},imprUpdateMechanisms:{load:"load",scroll:"scroll",auto:"auto",tap:"tap",resize:"resize",swipe:"swipe",partial:"partial",view:"view"},event:{},sitePage:{},userStatic:{},overrideClientParams:{},persistOverriddenParams:!1,customTags:yt()||{},trackingDisabled:!1,shouldFireTelemetry:function(){return!this.trackingDisabled},getCurrentTime:function(){return+new Date},timeToInteract:function(n){var t;return t=n?n:k.getCurrentTime(),t&&u.performance&&u.performance.timing&&u.performance.timing.navigationStart?t-u.performance.timing.navigationStart:void 0},telemetryModuleTypes:{Undefined:0,Header:1,Footer:2,topNavBar:3,navBar:4,dropDown:5,Section:6,Carousel:7,Module:8,searchBox:9,inputBox:10,actionButton:11,Interaction:12,Headline:13,Navigation:14,Entity:15,structuredData:16,appStore:17,appLaunch:18,cmsPromotions:19,microsoftWebStore:20,xboxStore:21,officeStore:22,appInstall:23,PartnerLinks:24,SponsoredContent:25},contentPlacedBySource:{Editorial:0,PersonalizationAlgo:1,BingAlgo:2,Taboola:3,Outbrain:4},telemetryDataAttribute:"data-m",telemetryHLAttribute:"data-hl",client:{clientId:function(){return nt||nt===""||(nt=i(k.MUIDCookie)||k.sitePage.requestId||""),nt},getMuid:function(){return i(k.MUIDCookie)},getAnonCookieName:function(){return a.anonckname?a.anonckname:null},getSsoComplete:function(){return a.ssocomplete&&(a.ssocomplete+"").toLowerCase()==="true"?1:0},getAadAuthentication:function(){return a.aadState===!0?1:a.aadState===!1?0:2},OTFTelemetry:function(n){require(["binding","c.deferred"],function(){var t,o,s,h,c,l,r,e,i;typeof n=="undefined"?n=k.imprUpdateMechanisms.load:n==null&&(n="");it=[];t=f.body.querySelectorAll("[data-m]");o=u.innerHeight;s=u.innerWidth;h=0;c=f.getElementById("content");c&&(l=c.getBoundingClientRect(),s=l.right,h=l.left);var v=f.body.querySelector(".ip")||f.body.querySelector(".mip")||f.body.querySelector(".sip"),y=v&&k.telemetryTracking.isVisible(v,s,h,o),a=[];for(r=0;r<t.length;r++)t[r].getAttribute("data-otfUseViewportForVisibility")=="true"?a.push(k.telemetryTracking.isVisible(t[r],u.width,0,o,y)):a.push(k.telemetryTracking.isVisible(t[r],s,h,o,y));for(e=0;e<t.length;e++)it.push(new ct(t[e],a[e]));i=k.telemetryTracking.formatModules();i&&(i.e&&i.e.length>0||i.vc&&i.vc.length>0)&&k.telemetryTracking.sendImprUpdateEvent(n,i)})},height:function(){return ft||st(),ft},pageUrl:function(){var n=u.location.href,t=k.sitePage.msnocid,i;return t&&(i=n.indexOf("?")>=0,n=i?n+"&":n+"?",n=n+"ocid="+t),n},referrer:function(){return f.referrerOverride||f.referrer},screenResolution:function(){return[r.width,r.height].join("x")},width:function(){return ut||st(),ut},viewType:function(){return(o.isTmx||o.isMidlevel)&&!d&&e.listen(function(n){n&e.views.SIZE1COLUMN?d="size1column":n&e.views.SIZE2COLUMN?d="size2column":n&e.views.SIZE3COLUMN?d="size3column":n&e.views.SIZE4COLUMN&&(d="size4column")}),d},frameData:function(){if(u._pageTimings&&u._pageTimings.frameMarkerData)return u._pageTimings.frameMarkerData},wasBrowserHiddenAtLeastOnce:function(){return h.wasBrowserHiddenAtLeastOnce()}},userDynamic:{timeStamp:function(){return k.getCurrentTime()},slideType:function(){for(var t=k.event.target,i="halfpane";t&&n.name(t)!="SECTION";){if(n.name(t)=="LI"&&n.containsClass(t,i))return i;t=n.parent(t)}return null},firstEventIndex:function(){return++tt[0]},currentEventIndex:function(){return ot?++tt[0]:++tt[1]},resetEventIndex:function(){tt[1]=0;ot=!1}},custom:{addCustomTags:function(){var n=k.customTags;return n=c({},k.customTags,et),et={},JSON.stringify(n)},addCustomTagsForClickEvent:function(){var n="",t;if(typeof g=="object")for(t in g){n=JSON.stringify(g);break}return g={},n}},telemetryTracking:{setupParameters:function(n){var r=k.sitePage,u=k.client.getAnonCookieName(),i={evt:n,rid:t.getActivityId()||r.requestId,di:r.domainId,clid:k.client.clientId(),issso:k.client.getSsoComplete(),aadState:k.client.getAadAuthentication()};return u&&(i.anonckname=u),i["pg.p"]=k.sitePage.page_product,i["pg.t"]=k.sitePage.page_type,i["pg.n"]=k.sitePage.page_name,i["pg.c"]=k.sitePage.page_configuration,i},sendImprUpdateEvent:function(n,t,i){var r,f;t==undefined||(t.e==undefined||t.e.length<=0)&&(t.vc==undefined||t.vc.length<=0)||(r=this.setupParameters(k.eventTypes.imprUpdate),r&&(r.mech=n,r.winht=lt(),r.docht=vt(),r.scrollOff=at(),r.wbh=h.wasBrowserHiddenAtLeastOnce(),r.e1=t,r.tmpl=k.sitePage.templ,r.mkt=k.sitePage.localeCode,n===k.imprUpdateMechanisms.scroll&&(r.TTI=k.timeToInteract()),u&&u.adsEnabled!=null&&(r.adoni=+u.adsEnabled),k.sitePage.feedId&&(r.fid=k.sitePage.feedId,r.fn=k.sitePage.feedName,r.ft=k.sitePage.feedType),k.sitePage.flightid&&(r.flightid=k.sitePage.flightid),i&&(r.tlcType=i,v&&v.measurePerfMarkers&&(f=v.measurePerfMarkers(i),f&&(r.perf=f))),this.sendUpdate(r)))},isVisible:function(n,t,i,r){return n?h.isElementTrulyVisible(n,t,i,r):!1},formatModules:function(){var t=[],f,i,n,r,u;for(f in it)i=it[f],i&&i.compress&&(n=i.compress(),n&&n.y&&!n.ct&&(r=b.getTelemetryContentType(n.y),r&&(n.ct=r)),t.push(n));return u={},t&&t.length>0&&(u.e=t),u},sendUpdate:function(n){l(function(){if(k.shouldFireTelemetry()){if(rt=rt||(k.sitePage||{}).otfURL,!rt){s.error("[telemetryTracking.sendUpdate] BaseUrl was empty or undefined in sitePage.");return}if(n){n.idx=k.userDynamic.currentEventIndex();var t={url:rt,requestType:p.POST,eventType:n.evt||k.eventTypes.impressionUpdate,params:n,trackingType:p.OTF};w.pub(p.FireTelemetry,t)}}})}},updateTemplValue:function(n){k.updateSitePage(n)},updateSitePage:function(n,t,i){var r=k.sitePage,u;r||(r=k.sitePage={});u=r.flightid;t&&(!u||u.indexOf(t)<0)&&(r.flightid=pt(",",u,t));r.templ=ht(";",r.templ,n);i&&(r.requestId=i)},updatePageName:function(n,t){var r=t,i;t===undefined&&(r=!0);i=new b.getTelemetryPageInfo(n);i&&k.sitePage&&(k.sitePage.page_name=i.PageName,r&&(k.sitePage.page_type=i.PageType))},updateFeedMetadata:function(n,t,i){n&&(k.sitePage.feedId=n,t&&(k.sitePage.feedName=t),i&&(k.sitePage.feedType=i))},updateFeedName:function(n){b.validateTelemetryDataType(b.TelemetryFeedName,n)&&(k.sitePage.feedName=n)},updateReferrer:function(n,t){n&&(f.referrerOverride=n,t&&b.validateTelemetryDataType(b.TelemetryContentType,t)&&t!=b.TelemetryContentType.Undefined&&(k.sitePage.referrerType=t))},setCustomTagsForClickEvent:function(n,t){n&&t&&t!=undefined&&(g[n]=t)},trackCustomProperty:function(n,t){n&&t!=undefined&&(n=n.toLowerCase(),et[n]=t)},updateExtendedFlightId:function(n,t){var i=k.sitePage;i&&t&&n&&b.validateTelemetryDataType(b.TelemetryPartnerNamespace,n)&&(i.extflightid=ht("|",i.extflightid,n+":"+t))}};return k});define("c.track.mobi",["track","trackInfo","pageInstance","screen","navigator","dom","events","document","window"],function(n,t,i,r,u,f,e,o,s){function v(i,r,u,f,e,o,s,h){if(i){i[t.gestureKey]=r;u=u&&u.length>0?u:l;var c=n.createEvent(null,u,i);n.trackEvent(c,i,f,e,o,s,h)}}var l="click_nonnav",h=!1,c=0,a=1e3;return n.extend({client:{orientation:function(){return r.width>r.height?"landscape":"portrait"},userAgent:function(){return u.userAgent},pageTitle:function(){return o.title},gesture:function(){var n=f.getTarget(t.event);if(n&&n[t.gestureKey])return n[t.gestureKey];if(t.event){if(t.event.originalEvent&&t.event.originalEvent=="contextmenu"||t.event.ctrlKey||t.event.shiftKey)return t.gestureType.rightclick;if((t.event.type=="click"||t.event.type=="click_nonnav"||t.event.type=="submit")&&h==!0&&t.sitePage.device)return t.gestureType.tap}return""}},userDynamic:{requestId:function(){var n=i.getActivityId()||t.sitePage.requestId;return n?n:s.console&&console.error("No requestID passed in from the server or generated via guidGen.js, please check the trackInfo.sitePage.requestId or pageInstance.js")}}}),u.pointerEnabled||u.msPointerEnabled?e.bind(o,u.pointerEnabled?"pointerup":"MSPointerUp",function(n){h=n.pointerType==n.MSPOINTER_TYPE_TOUCH||n.pointerType=="touch"?!0:!1}):(e.bind(o,"mouseup",function(){var n=(new Date).getTime();n>c+a&&(h=!1)}),e.bind(o,"touchend",function(){h=!0;c=(new Date).getTime()})),n.trackGesture=v,1});define("track",["trackInfo","extend","dom","getCookie","setCookie","events","window","document","mediator","navigation","headData","pageInstance","evaluate","trackingHelper","webStorage","telemetry.constants","requestPageRevealCallback","telemetryDataTypes"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){function it(n){for(var t,f,o,r,c,i,s=h.getParamsFromUrl(e.location.href),u=0;u<d.length;u++){if(i=d[u],t=i.defaultOpts,t.disableOnAutoRefresh){for(f=t.disableOnAutoRefresh.split(";"),o=!1,r=0;r<f.length;r++)if(f[r]==t.id){o=!0;break}if(o&&s.AR){t.isGeneratedEarly=!1;continue}}t.isGeneratedEarly?t.isGeneratedEarly=!1:i&&(c=i[n]())}}function hi(t){if(t){var i=t.errId+t.errSource,r=y.getItem(i,!0),u=(new Date).getTime();r&&u-r<=ei||(n.event={type:"app_error"},n.report=t,fi(JSON.stringify(t),!0),it("getEventTrackingUrl"),y.setItem(i,u,!0))}}function et(n,t,i){var u=ut(n)||[],r=0,f;for(t=t||"alt";r<u.length;r++)if(f=k(u[r],t)||et(u[r],t,i),f&&!(i==u[r].localName))return f}function yt(t){if(t){var u=tt(t),i=k(u,"id"),r;return n.wrapperId==i?void 0:(r=yt(u),r&&i)?[r,i].join(n.cmSeparator):i||r}}function pt(n){if(n){var u=tt(n),i,t=0,r=0;if(!k(u,"id"))if(t=pt(u),t)t--;else return 0;for(i=ut(u)||[];r<i.length;r++){if(i[r]==n){t++;break}t+=wt(i[r])}return t}}function wt(t){var i=0,r=0,u;if(t&&!k(t,"id"))for(u=ut(t)||[],k(t,"href")&&!k(t,n.notrack)&&i++;r<u.length;r++)i+=wt(u[r]);return i}function ot(n,t,i){var u,r,e,f;if(i&&n&&t){if(n.tagName==t)return n;for(u=ut(n)||[],r=0,e=u.length;r<e;r++){if(u[r].tagName==t)return u[r];if(f=ot(u[r],t,i-1),f)return f}}return null}function ci(n){var i,r,t,u;if(n){for(r="getPageViewTrackingUrl",t=0;t<d.length;t++)if(i=d[t],i.defaultOpts.id===n){u=i[r]();break}kt()}}function li(){var i=e.location.protocol+"//"+e.location.host+"/pv.xml",t;n.shouldFireTelemetry()&&(t={url:i,requestType:p.GET,trackingType:p.Comscore},s.pub(p.FireTelemetry,t))}function ai(t){n.event={type:"adimpr_update"};var i=parseInt(t.w),r=parseInt(t.h);n.report={dst:t.dst,den:t.den,id:t.id,pg:t.pg,w:isNaN(i)?0:i,h:isNaN(r)?0:r,status:t.status,anAd:t.anAd,seqid:t.seqid,sdk:t.sdk,fen:t.fen};it("getEventTrackingUrl")}function vi(n){if(n){if(!n.forcedDispatch){var t=n.errId,i=y.getItem(t,!0),r=(new Date).getTime();if(i&&r-i<=si)return}var u=function(){yi(n);it("getEventTrackingUrl");n.forcedDispatch||y.setItem(t,r,!0)},f=n.forcedDispatch?[]:["c.pageComplete"],e=n.forcedDispatch?{synchronous:!0}:{};require(e,f,u)}}function yi(t){var i;n.event={type:"app_error"};i=n.report={errId:t.errId,errMsg:t.errMsg,errSource:t.errSource};fi(JSON.stringify(i),!0)}function bt(t,i,r,u,f,e,s){function h(){return(!i&&t&&(i=t.target),!i||k(i,n.notrack))?!1:i.id==="srchfrm"}function c(){var n=o.getElementById("q");if(n)return n.value}h()&&(u=c());nt(t,i,r,u,f,e,s)}function nt(t,r,u,f,e,o,s,c){var v,w,d,st,g,nt,l,ut,p,ft;if(!r&&t&&(r=t.target),r&&!k(r,n.notrack)){r.jquery&&(r=r[0]);t=t||{};t.customHandled=!0;t.target=r;n.event=t;v=r.href||k(r,"href");v=="#"&&(v=r.href);u=u||k(r,n.piiurl)||v||k(r,"action")||"";w=k(r,"data-hl")||"";f||w||(d=ot(r,"H4",2)||ot(r,"H3",2),d&&(f=i.text(d)));typeof f!="string"&&(f=w||k(r,n.piitxt)||("FORM"==ht(r)?n.defaultFormHeadline:k(r,"title")||et(r,"title","img")||i.text(r)||k(r,"alt")||et(r,"alt")||""));f.trim!=undefined&&(f=f.trim());e=e||yt(r)||n.defaultModule;o=o||(k(r,"id")?1:pt(r));st=r.className||k(r,"class");s=s||(/GT1-(\d+)\b/i.exec(st)?RegExp.$1:"")||(/[?&]GT1=(\d+)\b/i.exec(v)?RegExp.$1:"");var y="",ct="",lt="",at=n.cmSeparator,wt;if(t&&(t.type==n.eventTypes.click||t.type==n.eventTypes.nonNavClckEvt||t.type==n.eventTypes.submit||t.type==n.eventTypes.contextmenu||t.type==n.eventTypes.mouseenter)){g="data-m";y=k(r,g);y||(nt=tt(r),y=nt?k(nt,g):"");try{l=a(y);l&&l.y&&!l.ct&&(ut=b.getTelemetryContentType(l.y),ut&&(l.ct=ut));!c&&t.contentAction&&(c=t.contentAction);c&&(c=b.validateTelemetryDataType(b.TelemetryContentAction,c));!c&&l&&l.y&&(c=b.getTelemetryContentAction(l.y))}catch(bt){l=null}p=ir(r);p&&(ct=p.nameLineage.reverse().join(at),lt=p.ordinalLineage.reverse().join(at));wt=t.time}ft=h.getHostName(u);ft&&ft.toLowerCase().indexOf("bing.com")>-1&&(u=rt.filterUrlParams(u,["q","pq"]),f="");n.report={destinationUrl:u,headline:f,contentModule:e,contentElement:o,campaignId:s,module:l,sourceIndex:r.sourceIndex||"",nodeName:r.nodeName||"",nLineage:ct,oLineage:lt,timeToInteract:n.timeToInteract(wt),contentAction:c};t&&(t.type==n.eventTypes.click||t.type==n.eventTypes.nonNavClckEvt||t.type==n.eventTypes.submit||t.type==n.eventTypes.contextmenu)&&(vt=!0);it("getEventTrackingUrl")}}function pi(){var t=l.getActivityId()||n.sitePage.requestId;return t?y.getItem(t,!0):!1}function wi(t,i){var u,f,e,r,d,a,w,k,g;i=!!i;delete n.event;delete n.userStatic.requestId;delete n.overrideClientParams;u="pg.n";f=t&&t[u];f&&(e="pg.t",r=new b.getTelemetryPageInfo(f),r&&(t[u]=r.PageName,d=t[e],a=b.validateTelemetryDataType(b.TelemetryPageType,d),t[e]=a?a:r.PageType===b.TelemetryPageType.Unspecified?n.sitePage.page_type:r.PageType));w="sign-in-refreshed-page";y.getItem(w,!0)&&(y.removeItem(w,!0),(t=t||{}).ar=1);n.overrideClientParams=t;n.persistOverriddenParams=i;k=v.modifyValuesForTrackPage();k&&k.preventComscore&&rt.preventBeacon(p.Comscore);c&&c.clientSettings&&c.clientSettings.static_page&&(g=n.sitePage.requestId=l.getActivityId(),n.sitePage.isStaticPage="True",require(["c.deferred"],function(){var i=o.body.querySelector("#maincontent"),t,r,n;if(i)for(t=i.querySelectorAll("a[href*='.bing.com']"),r=t.length,n=0;n<r;n++)t[n].href=h.mergeQueryStringParams(t[n].href,{refig:g})}));it("getPageViewTrackingUrl");ct?s.pub("pageView"):(ct=1,s.pub("pageViewOnLoad"));delete n.overrideClientParams;kt()}function kt(){var t=l.getActivityId()||n.sitePage.requestId||"";y.getItem(t,!0)||y.setItem(t,!0,!0)}function bi(n){var i=[],r,t;if(n&&n.querySelectorAll)for(r=n.querySelectorAll("[data-m]"),k(n,"data-m")&&i.push(n),t=0;t<r.length;t++)i.push(r[t]);return i}function dt(n,t){var i=k(n,t);if(i)try{return a(i)}catch(r){return null}return null}function gt(n,t){if(t.indexOf)return t.indexOf(n)!==-1;for(var i=0;i<t.length;i++)if(t[i]===n)return!0;return!1}function ki(t,i,r,u){var c,o,s,l,f,h,a,e,v;if(t){for(t.jquery&&(t=t[0]),c=bi(t),o=[],s=0;s<c.length;s++)(l=c[s],!i||n.telemetryTracking.isVisible(l))&&(f=dt(l,"data-m"),h=f?f.i:undefined,h===undefined||gt(h,ft)||(ft.push(h),o.push(f),f.y&&!f.ct&&(a=b.getTelemetryContentType(f.y),a&&(f.ct=a))));e={};o&&o.length>0&&(e.e=o);e&&e.e&&e.e.length>0&&(v=r?r:n.imprUpdateMechanisms.partial,n.telemetryTracking.sendImprUpdateEvent(v,e,u))}}function di(){ft=[]}function gi(n){var t=new RegExp(oi).exec(n);return t&&t.length&&t[1]||null}function nr(t){var r=null,u,i;return t&&(t.indexOf(at)==-1?(u=t.substring(0,t.indexOf("#")).toLowerCase(),i=e.location.href.toLowerCase(),(i==u||i.substring(0,i.indexOf("#"))==u)&&(r=n.eventTypes.nonNavClckEvt)):r=gi(t)),r}function st(n,t,i){var r=null;return g.createEvent?(r=g.createEvent("Events"),r.initEvent(t,!1,!0,i||e,0,0,0,0,0,!1,!1,!1,!1,0,null)):g.createEventObject&&(r=g.createEventObject(n),r.type=t),r&&(r.customTarget=i,r.originalEvent=n&&n.type),r}function tr(n){n.preventDefault?n.preventDefault():n.returnValue=!1}function ni(n){ii(n)}function ti(n){2!=n.button&&ii(n)}function ir(n){for(var i={},r=[],u=[],t;n;)t=dt(n,"data-m"),t&&(t.n&&r.push(t.n),t.o&&u.push(t.o)),n=tt(n);return i.nameLineage=r,i.ordinalLineage=u,i}function ii(t){var r,e,o,s,u,f,h;if(t&&!t.customHandled&&(!t.originalEvent||!t.originalEvent.customHandled)){try{t.time=n.getCurrentTime();t.customTarget&&t.customTarget.useMap&&(t.customTarget=t.customTarget.document.activeElement,t.target=t.customTarget)}catch(c){}for(r=i.getTarget(t);r&&!k(r,"href")&&r.nodeName!="BUTTON"&&r.nodeName!="MENUITEM";)r=tt(r);if(t.customTags&&(e=t.customTags,typeof e=="object"))for(o in e)o&&(s=e[o],s&&s!="undefined"&&n.setCustomTagsForClickEvent(o,s));if(r&&!r.form)if(u=t,t.type==n.eventTypes.contextmenu&&(u=st(t,n.eventTypes.nonNavClckEvt,r)),f=r.href,f&&f.length){if(f.indexOf("#")==f.length-1||f.indexOf(at)>=0)if(t.type==n.eventTypes.click)h=nr(f),h&&(u=st(t,n.eventTypes.nonNavClckEvt,r));else if(t.type==n.eventTypes.contextmenu)return;u.type==n.eventTypes.nonNavClckEvt&&tr(t);t.contentAction&&(u.contentAction=t.contentAction);v.addOcidToHref(f,r,u);u.isPropagationStopped||nt(u,r)}else t.type!=n.eventTypes.contextmenu&&(t.contentAction?nt({type:n.eventTypes.nonNavClckEvt,target:r,contentAction:t.contentAction}):nt({type:n.eventTypes.nonNavClckEvt,target:r}))}}function rr(i,r){if(i&&i.evt&&n.shouldFireTelemetry()){i.adid&&(i.adid=i.adid.toString());var u=n.sitePage,f=n.client,e=n.userDynamic,h=n.telemetryTracking.setupParameters(i.evt),c={bh:f.height(),bw:f.width(),cvs:u.canvas,mkt:u.localeCode,"pg.t":u.page_type,"pg.n":u.page_name,rid:u.serverImpressionGuid,"st.dpt":u.department||i["st.dpt"]||"watch","st.sdpt":u.subDepartment||i["st.sdpt"]||"no-sc",subcvs:u.vertical,flight:u.flightid,isVideo:!0,idx:r?e.firstEventIndex():e.currentEventIndex()},l=t({},i,h,c),o=ui(l),a={url:u.otfURL,requestType:p.GET,eventType:o.evt,params:o,trackingType:p.OTF,eventSource:"VideoPlayer"};s.pub(p.FireTelemetry,a)}}function ur(i){if(i&&n.shouldFireTelemetry()){var u={"feedback.id":i["feedback.id"],"feedback.source":i["feedback.source"],"feedback.area":i["feedback.area"],"feedback.type":i["feedback.type"],"feedback.rating":i["feedback.rating"],submitValue:i.submitValue,userAgent:i.userAgent},r=t(!0,{},u,ri("feedback"));r=ui(r);n.telemetryTracking.sendUpdate(r)}}function ri(i){var u=n.telemetryTracking.setupParameters(i),r=n.sitePage,f={scr:n.client?n.client.screenResolution():"","client.deviceModel":r.d_dgk,pageType:r.page_name,subcvs:r.vertical,cvs:r.canvas,contentid:r.entityId,cu:n.client?encodeURIComponent(n.client.pageUrl()):r.pageUrl,mkt:r.localeCode,flightid:r.flightid,signedin:n.userStatic?n.userStatic.isSignedIn:""};return u!==null&&u!==undefined&&(f=t(!0,{},f,u)),f}function ui(n){var i={};for(var t in n)n[t]!=undefined&&(i[t]=n[t]);return i}function fr(n,t){var r,i,u;if(n&&t&&(r=n.split("?"),r.length>1)){var f=r[0]+"?",e=r[1],o=h.getParams(e);if(e){for(i=0;i<t.length;i++)t[i]=t[i].toLowerCase();for(u in o)gt(u.toLowerCase(),t)||(f=f+u+"="+o[u]+"&")}return f.slice(0,-1)}return n}function fi(n,t){var u=new Date,f=u+": "+ +new Date+" "+n,i=lt.console,r;i&&(r=t?i.error:i.log,r&&r.call(i,f))}var k=i.attr,ht=i.name,tt=i.parent,ut=i.children,d=[],ct,lt=e,g=o,ei=3e5,at="tevt=",oi=/#tevt=([A-Za-z0-9]+_[A-Za-z0-9]+)(;*)/g,vt=!1,ft=[],si=p.logSamplingRate||3e5,rt;return s.sub("logerror",hi),rt={onContextMenu:ni,onClick:ti,trackEvent:nt,trackFormSubmitEvent:bt,trackAdEvent:ai,trackVideoEvent:rr,trackFeedbackEvent:ur,createEvent:st,sendPageViewCandidate:li,sendSinglePageViewBeacon:ci,clearImpressionCache:di,getFeedbackTrackingParams:ri,filterUrlParams:fr,hasPageViewEventFired:pi,hasNavigated:function(){return vt},trackAppErrorEvent:function(n){w(function(){vi(n)})},trackPartialImpression:function(n,t,i,r){w(function(){ki(n,t,i,r)})},trackPage:function(n,t){w(function(){wi(n,t)})},trackThirdPartyUpdate:function(){s.pub("thirdPartyTrackingUpdate")},register:function(){for(var t=0,n;n=arguments[t++];)isNaN(n.samplingRate)&&(n.samplingRate=99),d.push(n)},getCurrentPageRequestId:function(){return l.getActivityId()||n.sitePage.requestId||""},mapTelemetryParams:function(i,r,u,f){var l,s,o,e,h,c;u=t({},i,u);f=t(!0,{},r,f);for(l in f)if(h=n[l],h){s=f[l];for(o in s)c=n.overrideClientParams,o&&c&&c[o]!==undefined?(e=c[o],n.persistOverriddenParams&&(h[s[o]]=e)):(e=h[s[o]],typeof e=="function"&&(e=e())),e!=null&&(u[o]=e)}return u},extend:function(i){t(!0,n,i)},form:function(n){n&&n.length||(n=[n]);for(var t,i=0;t=n[i++];)"FORM"!=ht(t)||k(t,"data-customformtrack")||f.bind(t,"submit",bt)},preventBeacon:function(n){var t,i;if(n)for(n=n.toLowerCase(),t=0;t<d.length;t++)if(i=d[t].defaultOpts,n===i.id.toLowerCase()){i.isGeneratedEarly=!0;break}}},f.bind(g,"click",ti),f.bind(lt,"unload",nt),f.bind(g,"contextmenu",ni),require(["c.dom"],function(){rt.form(i.getElementsByTagName("form"))}),s.sub("ViewabilityUpdatedEvent",function(t){w(function(){n.client.OTFTelemetry(t)})}),s.sub(p.ResetIdx,n.userDynamic.resetEventIndex),rt});define("elementTrackingDecorator",["trackingConstants","jquery","evaluate","track","window","extend"],function(n,t,i,r,u,f){function v(){n&&n.trackingData&&p(n.trackingData.lastIndex)&&n.trackingData.lastIndex>1?o=n.trackingData.lastIndex:u&&u.console&&u.console.error("Tracking constants were not supplied in DOM.",n)}function b(n){return n&&n.length!==0}function k(n,t){var i=n.closest(e),r=i.length>0?i.eq(0):null,u;r&&n.attr(h)&&(r=i.length>1?i.eq(1):n.parent(e));t&&(!r||r.length===0)&&(i=t.closest(e),r=i.length>0?i.eq(0):null);r&&(u=r.attr(h),u&&p(u)&&(this.p=u))}function d(n,i){n.find(e).each(function(n,r){var f=t(r),u=s(f),o=f.parent(e)[0];o||(o=f.parent().closest(e));i=s(t(o));i&&u&&u.p!=i.i&&(u.p=i.i,y.call(u,!0),c.call(f,u))})}function s(n){var t=n.attr(a);if(t)try{return i(t)}catch(r){return null}return{}}function c(n){n.i&&(this.attr(a,JSON.stringify(n)),this.attr(h,n.i))}function y(n){return this&&(!this.i||n==!0)&&o?(o++,this.i=o,!0):!1}function g(n){var t=n.parent().children();t.length>1?nt.call(t,this,n):this.o=1}function nt(n,i){var r=0;this.each(function(u,e){if(r++,e===i[0])n.o=r;else{var o=t(e),h=f(s(o),{o:r});c.call(o,h)}})}function p(n){return!isNaN(parseFloat(n))&&isFinite(n)}function w(n){var t=n?n.defaults:null;return f({},{n:"client",y:12},t||{})}function l(n,i,r,u,e){var o=t(n),l=s(o),h=f({},r,l),a=y.call(h,e);e||g.call(h,o);k.call(h,o,i);u&&u(o,h);c.call(o,h);a&&d(o,h)}var o=0,a="data-m",h="data-id",e="["+h+"]";return{setTrackingForSingleElement:function(i,u,f,e){var s,h;return v(),s=w(f),l(i,t(u),s,f&&f.elementOverride,f&&f.overrideIndexOnly),n.trackingData.lastIndex=o,e||(h=f&&f.visibilityCheck!=undefined?f.visibilityCheck:!0,r.trackPartialImpression(i,h)),i},setTrackingAttrs:function(i,u,f,e){var k;if(v(),i&&i.find){var s=f&&f.selector||"li",h=i.find(s),c=w(f),a=f?f.elementOverride:null,y=u&&!u.jquery?t(u):u,p=f?f.overrideIndexOnly:!1;i.each(function(n,i){t(i).is(s)&&l(i,y,c,a,p)});b(h)&&(k=t(h),k.each(function(n,t){l(t,y,c,a,p)}))}return n.trackingData.lastIndex=o,e||r.trackPartialImpression(i,!0),i}}});define("trackingHelper",["trackInfo","navigation","pageInstance","location","evaluate","displayOptionsHelper","browserState","ajax","setCookie","trackingHelper.tokens","format","window","getCookie","telemetryDataTypes"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){function pt(t,i,r){var o,a,u,s,tt,e;if(t&&i){b||(b=n.sitePage.msnocid);y||(y=n.sitePage.storeocid);var v=t.indexOf("://"),p=t.indexOf(ht),w=v>0&&p>=0&&p<v,k=t.match(rt),c=t.match(d),h=k&&k[1],ut=c&&c[1],l;if(h&&ut){o=t;a=t.match(/[&?]ocid=(ems\.)/i);l=a&&a[1];l&&!o.match(/[=_]emsadid\./i)&&(o=it(o.replace(d,""),c[1]));w&&ot(o,r,i);return}if(u=t.indexOf("#"),s="",!h){if(u===t.length-1)return;if(b){var g=ct.exec(t),nt=g&&g[2],f=t;if(nt&&(tt=nt.indexOf(st)>=0,tt)){u>=0&&(s=t.substring(u,t.length),f=t.substring(0,u));f+=f.indexOf("?")>0?"&":"?";f=f+"ocid="+b;i.href=f+(s||"");return}}}(h||y)&&w&&(u>=0&&(s=t.substring(u,t.length),t=t.substring(0,u)),e=t,h||(e+="&ocid="+y),e=it(e,l),i.href=e+s,ot(e,r,i))}}function it(t,r){var h=t.match(d),l=h&&h[1],f=t.indexOf("#"),c="",e,u,o,s;return l?t:(f>=0&&(c=t.substring(f,t.length),t=t.substring(0,f)),e=t,e+="&ccid=",u=[],r&&u.push("emsadid."+r),o=i.getActivityId()||n.sitePage.requestId,o&&u.push("webig."+o),s=n.client.clientId(),s&&u.push("muid."+s),e+u.join("_")+c)}function wt(){var r=!1,t,i;return n.sitePage&&(t=!0,f.shouldRenderRiver()?n.sitePage.page_configuration|=v.TelemetryPageConfiguration.OneBox|v.TelemetryPageConfiguration.TopSites|v.TelemetryPageConfiguration.ContentFeed:f.isDisplayOptionSetToBlank()||f.shouldRenderTopSitesOnly()&&n.sitePage.page_type==="dhp"?(t=!1,n.sitePage.page_configuration|=v.TelemetryPageConfiguration.OneBox):(f.shouldRenderTopSitesOnly()||n.sitePage.noMsnContent)&&(t=!1,n.sitePage.page_configuration|=v.TelemetryPageConfiguration.OneBox|v.TelemetryPageConfiguration.TopSites),t||(r=!0)),n.client&&!n.client.personalization&&(i={srch3P:e.getThirdPartySearchProvider()},i&&(n.client.personalization=JSON.stringify(i))),{preventComscore:r}}function bt(n){function e(){var n=this,r,t,i;n.dataset&&n.dataset.hl&&(r=n.dataset.hl,t=u(r),t&&(i=n.querySelector(lt),i&&(t.tagline=i.innerText),n.dataset.hl=JSON.stringify(t)))}var r,f,t,i;if(n)for(r=n.jquery?n:[n],f=r.length,t=0;t<f;t++)(i=r[t],i.isPromoAppTracked)||(i.addEventListener("click",e),i.isPromoAppTracked=!0)}function ot(t,i,f){var e,s,h;if((!i||i.originalEvent!=="contextmenu")&&!g){var l=t.match(rt),v=t.match(/[&?]tduid=([^&]+)/i),b=new RegExp(nt,"i");if(l&&l[1]&&(!v||!v[1])&&!b.test(t.match(b))){if(e=y,f.attributes&&f.attributes["data-m"]&&(s=f.attributes["data-m"].value,s&&(e=u(s).n)),p=n.sitePage.page_type+"_"+n.sitePage.localeCode+"_"+n.sitePage.vertical+"_"+e,tt=p,h=a(tt),h){t+=c(ut,h,et,ft,p);f.href=t;return}w=f;w.href=t;i.stopPropagation();i.preventDefault();i.isPropagationStopped=!0;g=!0;r.origin||(r.origin=r.protocol+"//"+r.hostname+(r.port?":"+r.port:""));o.get({url:c(yt,r.origin,n.sitePage.localeCode,n.sitePage.channel,p),dataType:vt,success:dt,error:function(n,i){kt("The TradeDoubler ajax call failed: "+i+" Status code: "+n);f.href=t+nt;f.click()}})}}}function kt(n){l.console&&l.console.log&&console.log(n)}function dt(n){n?(s(tt,n,13,s.topDomain,at),w.href+=c(ut,n,et,ft,p)):w.href+=nt;g=!1;w.click()}function gt(n,t){return t?n+"_succeeded":n+"_failed"}var k=r.host.split(".").reverse(),st=k.length>1?k[1]+"."+k[0]:r.host,ht="ms-windows-store",ct=/[a-z][a-z0-9+\-.]*:\/\/([a-z0-9\-._~%!$&'()*+,;=]+@)?([a-z0-9\-._~%]+|\[[a-z0-9\-._~%!$&'()*+,;=:]+\])/i,rt=/[&?]ocid=([^&]+)/i,d=/[&?]ccid=([^&]+)/i,lt=".hltxt",b=n.sitePage.msnocid||"",y=n.sitePage.storeocid||"",g=!1,at="/",vt="text/html",p="",nt="&notduid=true",ut="&tduid=({0})({1})({2})({3})()",tt="",ft=h.tradeDoublerMarketId,et=h.tradeDoublerProgramId,w,yt=h.tradeDoublerAjaxUrlFormat;return{addOcidToHref:pt,modifyValuesForTrackPage:wt,attachTaglineClickHandler:bt,addCcidToStoreUrl:it,getActionResult:gt}});define("otf-telemetryPing",["mediator","telemetry.constants","escape","window","logging","afire"],function(n,t,i,r,u,f){function e(n,t){var f=[],e=n,u,r;if(n&&t){for(u in t)r=t[u],typeof r=="object"&&(r=JSON.stringify(r)),f.push(i.urlPart(u)+"="+i.urlPart(r));e=n+f.join("&").replace(/%20/g,"+")}return e}function o(n,t){var i,r,e;if(t&&JSON&&JSON.stringify){try{i=JSON.stringify([t])}catch(f){u.error("[telemetryTracking.sendUpdate] Error in using JSON.stringify.",f);return}if(i&&i!="[{}]")try{r=!1;e=!1;r&&(!r||e)||s(n,i)}catch(f){u.error("[telemetryTracking.sendUpdate] Error in generating the XDomainRequest or XMLHttpRequest","BaseUrl = "+n,f);return}}}function s(n,t){var i;i=new XMLHttpRequest;i.open("POST",n,!0);i.setRequestHeader("Content-type","application/json; charset=utf-8");i.onreadystatechange=function(){};i.send(t)}return n.sub(t.FireTelemetry,function(n){var r;if(n){var i=n.url,u=n.requestType,s=[t.Ctag,t.Comscore,t.OTF];if(i&&u&&n.trackingType&&s.indexOf(n.trackingType)!=-1){r=n.params;switch(u){case t.GET:i=e(i,r);n.executeOverride?n.executeOverride(i):f(i);break;case t.POST:o(i,r)}}}}),1});define("telemetryDataTypes",function(){function c(n){return n&&o&&(n=n.toLowerCase(),o[n]!==undefined)?o[n]:null}function l(n,t){if(n&&t)for(var i in n)if(n.hasOwnProperty(i)&&(typeof t=="string"&&n[i]===t.toLowerCase()||n[i]===t))return n[i];return null}function n(n,i){if(n){var r=n.toLowerCase(),f=i||t.Unspecified,u={PageName:r,PageType:f};return o[r]=u,u}return null}function a(n){if(r[n])return r[n]}function v(n){if(u[n])return u[n]}function y(){r[i.AppInstall]=f.App;r[i.AppLaunch]=f.App;r[i.SponsoredContent]=f.SponsoredContent;r[i.StructuredData]=f.StructuredDataCard;r[i.AppStore]=f.AppStorePromo}function p(){u[i.AppInstall]=e.Install;u[i.AppLaunch]=e.Launch;u[i.Follow]=e.Follow;u[i.Unfollow]=e.Unfollow}var o={},r={},u={},t={Unspecified:"unspecified",DHP:"dhp",NTP:"ntp",HomePage:"hp",VerticalHomePage:"verthp",StructuredDataPage:"data",SectionFront:"secfront",SiteSearch:"sitesearch",Article:"article",Gallery:"gallery",Video:"video",SubjectSection:"subjectsec",CustomColumn:"custcol"},i={Undefined:0,Header:1,Footer:2,TopNavBar:3,NavBar:4,DropDown:5,Section:6,Carousel:7,Module:8,SearchBox:9,InputBox:10,ActionButton:11,Interaction:12,Headline:13,Navigation:14,Entity:15,StructuredData:16,AppStore:17,AppLaunch:18,CmsPromotions:19,MicrosoftWebStore:20,XboxStore:21,OfficeStore:22,AppInstall:23,PartnerLinks:24,SponsoredContent:25,Follow:26,Unfollow:27,MoreFrom:28,Topic:29,Provider:30},f={Undefined:0,App:1,Article:2,Feed:3,Gallery:4,AppStorePromo:5,Settings:6,SponsoredContent:7,StructuredDataCard:8,Video:9,Webview:10,Activity:11,Win32:12,OfficeDocument:13,LocalFile:14},e={Undefined:0,Install:1,Launch:2,Transfer:3,Follow:4,Unfollow:5,Search:6,Share:7,Decline:8,Engage:9,Open:10,SignIn:11,Edit:12},s={StartPage:new n("startpage",t.HomePage),DefaultPage:new n("default"),EduPage:new n("edu"),ChildModePage:new n("child"),Office:new n("office"),Feed:new n("xfeed"),Discover:new n("discover"),MyInterests:new n("myinterests"),CombinedInterests:new n("cinterests"),ArticlePageNames:{Article:new n("article",t.Article),ArticleVNext:new n("articlevnext",t.Article),ArticleListicle:new n("article_listicle",t.Article),ArticleCollection:new n("articlecollection",t.Article),ArticleFullScreen:new n("articlefullscreen",t.Article),FlexibleArticle:new n("articleflex",t.Article),FlexibleArticleMobile:new n("articleflexmobile",t.Article),ArticleGalleryFullScreen:new n("article_galleryfs",t.Article)},GalleryPageNames:{Gallery:new n("gallery",t.Gallery),GalleryVNext:new n("galleryvnext",t.Gallery),GalleryFullScreen:new n("gallery_fullscreen",t.Gallery),GalleryClassic:new n("gallery_classic",t.Gallery),GalleryClassicFullScreen:new n("gallery_classicfs",t.Gallery),GallerySearch:new n("gallery_search",t.Gallery),GallerySearchFullScreen:new n("gallery_searchfs",t.Gallery),FlexibleGallery:new n("galleryflex",t.Gallery),FlexibleGalleryMobile:new n("galleryflexmobile",t.Gallery),GalleryImmersive:new n("gallery_immersive",t.Gallery),GalleryImmersiveFullScreen:new n("gallery_immersivefs",t.Gallery),GallerySponsored:new n("gallery_sponsor",t.Gallery),GallerySponsoredFullScreen:new n("gallery_sponsorfs",t.Gallery),GalleryInline:new n("gallery_inline",t.Gallery)},VideoPageNames:{ChannelPlayerPage:new n("channelplayerpage",t.Video),PartnerPlayerPage:new n("partnerplayerpage",t.Video)},VerticalHomePageNames:{HomePage:new n("homepage",t.VerticalHomePage),HomePageToday:new n("homepage-today",t.VerticalHomePage)},StructuredDataPageNames:{Gamecenter:new n("gamecenter",t.StructuredDataPage),Schedule:new n("schedule",t.StructuredDataPage),Scores:new n("scores",t.StructuredDataPage),Stocksummary:new n("stocksummary",t.StructuredDataPage),Stocksummaryoneriver:new n("stocksummaryoneriver",t.StructuredDataPage),Weatherxplatmaps:new n("weatherxplatmaps",t.StructuredDataPage),Standings:new n("standings",t.StructuredDataPage),Markets:new n("markets",t.StructuredDataPage),Watchlistpage:new n("watchlistpage",t.StructuredDataPage),Data_modelpage:new n("data_modelpage",t.StructuredDataPage),Immersivechartspage:new n("immersivechartspage",t.StructuredDataPage),Currencies:new n("currencies",t.StructuredDataPage),Indexdetailspage:new n("indexdetailspage",t.StructuredDataPage),Data_makepage:new n("data_makepage",t.StructuredDataPage),Weatherfullscreenmaps:new n("weatherfullscreenmaps",t.StructuredDataPage),Weatherthresholdmaps:new n("weatherthresholdmaps",t.StructuredDataPage),Stockanalysisdetails:new n("stockanalysisdetails",t.StructuredDataPage),Data_yearoverview:new n("data_yearoverview",t.StructuredDataPage),Data_segmenthub:new n("data_segmenthub",t.StructuredDataPage),Weathermaps:new n("weathermaps",t.StructuredDataPage),Playerstats:new n("playerstats",t.StructuredDataPage),Funddetailspage:new n("funddetailspage",t.StructuredDataPage),Exercisedetails:new n("exercisedetails",t.StructuredDataPage),Teams:new n("teams",t.StructuredDataPage),Etfdetailspage:new n("etfdetailspage",t.StructuredDataPage),Binganswermaps:new n("binganswermaps",t.StructuredDataPage),Workoutdetails:new n("workoutdetails",t.StructuredDataPage),Competitionstats:new n("competitionstats",t.StructuredDataPage),Polls:new n("polls",t.StructuredDataPage),Data_photos:new n("data_photos",t.StructuredDataPage),Videocategorylistpage:new n("videocategorylistpage",t.StructuredDataPage),Stockfinancialsdetails:new n("stockfinancialsdetails",t.StructuredDataPage),Commoditydetailspage:new n("commoditydetailspage",t.StructuredDataPage),Data_yearoverview_trim:new n("data_yearoverview_trim",t.StructuredDataPage),Worldwidepage:new n("worldwidepage",t.StructuredDataPage),Data_photos_trim:new n("data_photos_trim",t.StructuredDataPage),Stockcompanydetails:new n("stockcompanydetails",t.StructuredDataPage),Retirementplanner:new n("retirementplanner",t.StructuredDataPage),Livecoverage:new n("livecoverage",t.StructuredDataPage),Teamroster:new n("teamroster",t.StructuredDataPage),Stockhistorydetails:new n("stockhistorydetails",t.StructuredDataPage),Filterresultspage:new n("filterresultspage",t.StructuredDataPage),Data_carcompare:new n("data_carcompare",t.StructuredDataPage),Stockownershipdetails:new n("stockownershipdetails",t.StructuredDataPage),Driverstandings:new n("driverstandings",t.StructuredDataPage),Timevalueofmoney:new n("timevalueofmoney",t.StructuredDataPage),Savingscalculator:new n("savingscalculator",t.StructuredDataPage),Iccmatches:new n("iccmatches",t.StructuredDataPage),Other_flightsearchresult:new n("other_flightsearchresult",t.StructuredDataPage),Stockrelateddetails:new n("stockrelateddetails",t.StructuredDataPage),Data_specs_trim:new n("data_specs_trim",t.StructuredDataPage),Stockoptionsdetails:new n("stockoptionsdetails",t.StructuredDataPage),HomepageAlerts:new n("homepage-alerts",t.StructuredDataPage),HomepageRecordsandAverages:new n("homepage-recordsandaverages",t.StructuredDataPage),HomepageWeatherTraffic:new n("homepage-weathertraffic",t.StructuredDataPage),Data_specs:new n("data_specs",t.StructuredDataPage),Data_pricing:new n("data_pricing",t.StructuredDataPage),Mortgagecalculator:new n("mortgagecalculator",t.StructuredDataPage),Data_performance_trim:new n("data_performance_trim",t.StructuredDataPage),Theatershowtimes:new n("theatershowtimes",t.StructuredDataPage),Data_pricing_trim:new n("data_pricing_trim",t.StructuredDataPage),Data_photosInterior:new n("data_photos-interior",t.StructuredDataPage),Indexdetailsanalysispage:new n("indexdetailsanalysispage",t.StructuredDataPage),Data_photosInterior_trim:new n("data_photos-interior_trim",t.StructuredDataPage),Data_photosColors:new n("data_photos-colors",t.StructuredDataPage),Data_carReviews_trim:new n("data_car-reviews_trim",t.StructuredDataPage),Data_carReviews:new n("data_car-reviews",t.StructuredDataPage),Racecalendar:new n("racecalendar",t.StructuredDataPage),Teamstandings:new n("teamstandings",t.StructuredDataPage),Data_photosColors_trim:new n("data_photos-colors_trim",t.StructuredDataPage),Stockdetails:new n("stockdetails",t.StructuredDataPage),Data_interiorFeatures_trim:new n("data_interior-features_trim",t.StructuredDataPage),Data_exteriorFeatures_trim:new n("data_exterior-features_trim",t.StructuredDataPage),Calendar:new n("calendar",t.StructuredDataPage),TeamStats:new n("teamstats",t.StructuredDataPage),Movieshowtimes:new n("movieshowtimes",t.StructuredDataPage),Drafts:new n("drafts",t.StructuredDataPage),Data_technologyFeatures_trim:new n("data_technology-features_trim",t.StructuredDataPage),Data_workoutdetails_collection:new n("data_workoutdetails_collection",t.StructuredDataPage),Data_photosExterior:new n("data_photos-exterior",t.StructuredDataPage),Data_photosExterior_trim:new n("data_photos-exterior_trim",t.StructuredDataPage),Data_photos360Interior:new n("data_photos-360-interior",t.StructuredDataPage),Immersivechartsmarketspage:new n("immersivechartsmarketspage",t.StructuredDataPage),Returnoninvestment:new n("returnoninvestment",t.StructuredDataPage),Indexdetailsrelatedpage:new n("indexdetailsrelatedpage",t.StructuredDataPage),Gonepage:new n("gonepage",t.StructuredDataPage),Data_compare:new n("data_compare",t.StructuredDataPage),Data_compare_trim:new n("data_compare_trim",t.StructuredDataPage),Data_options_trim:new n("data_options_trim",t.StructuredDataPage),Entitiespage:new n("entitiespage",t.StructuredDataPage),Workoutdetailsprint:new n("workoutdetailsprint",t.StructuredDataPage),Data_photos360Exterior:new n("data_photos-360-exterior",t.StructuredDataPage),HomepageDatacarfinder:new n("homepage-datacarfinder",t.StructuredDataPage),Data_photos360Interior_trim:new n("data_photos-360-interior_trim",t.StructuredDataPage),Data_skeleton:new n("data_skeleton",t.StructuredDataPage),Mortgagerates:new n("mortgagerates",t.StructuredDataPage),Brackets:new n("brackets",t.StructuredDataPage),Data_photos360Exterior_trim:new n("data_photos-360-exterior_trim",t.StructuredDataPage),Data_photocompare:new n("data_photocompare",t.StructuredDataPage),HomepageWeather10day:new n("homepage-weather10day",t.StructuredDataPage),Data_performance:new n("data_performance",t.StructuredDataPage),HomepageWeatherextendedforecast:new n("homepage-weatherextendedforecast",t.StructuredDataPage),Savings:new n("savings",t.StructuredDataPage),Data_exteriorFeatures:new n("data_exterior-features",t.StructuredDataPage),Data_interiorFeatures:new n("data_interior-features",t.StructuredDataPage),Data_options:new n("data_options",t.StructuredDataPage),Travelgonepage:new n("travelgonepage",t.StructuredDataPage),Recipe:new n("recipe",t.StructuredDataPage),Getportfoliodatapage:new n("getportfoliodatapage",t.StructuredDataPage),Brokercenterpage:new n("brokercenterpage",t.StructuredDataPage),Data_technologyFeatures:new n("data_technology-features",t.StructuredDataPage),Tvlistings:new n("tvlistings",t.StructuredDataPage),Ownerstandings:new n("ownerstandings",t.StructuredDataPage),Entitydetailspage:new n("entitydetailspage",t.StructuredDataPage),Creditcards:new n("creditcards",t.StructuredDataPage),Cmssitemap:new n("cmssitemap",t.StructuredDataPage),Externalnativeadpage:new n("externalnativeadpage",t.StructuredDataPage),Autoloans:new n("autoloans",t.StructuredDataPage),Externalcontent:new n("externalcontent",t.StructuredDataPage),Htmlsitemap:new n("htmlsitemap",t.StructuredDataPage)},CustomColumnPageNames:{TrendingTopics:new n("topic_tt",t.CustomColumn),GlobalSettingsPage:new n("globalsettingspage",t.CustomColumn),MyTopics:new n("mytopics",t.CustomColumn),WeatherPlaces:new n("weatherplaces",t.CustomColumn),MyFavorites:new n("myfavorites",t.CustomColumn),TopicResult:new n("topicresult",t.CustomColumn),Collections:new n("collections",t.CustomColumn),Rouxbe:new n("rouxbe",t.CustomColumn),ShoppingList:new n("shopping list",t.CustomColumn),MyHealthReportsPage:new n("myhealthreportspage",t.CustomColumn),Error404page:new n("error404page",t.CustomColumn),AppsPromotion:new n("appspromotion",t.CustomColumn),Error500page:new n("error500page",t.CustomColumn),DietTrackerPreSigninPage:new n("diettrackerpresigninpage",t.CustomColumn),ExerciseTrackerPreSigninPage:new n("exercisetrackerpresigninpage",t.CustomColumn),WebSlicePage:new n("other_webslice",t.CustomColumn),Error200Page:new n("error200page",t.CustomColumn),AboutUsPage:new n("aboutus",t.CustomColumn),UnSupport:new n("unsupport",t.CustomColumn),Disclaimer:new n("disclaimer",t.CustomColumn),TermsOfService:new n("termsofservice",t.CustomColumn),SevereWeather:new n("severeweather",t.CustomColumn)},SubjectSectionPageNames:{TeamhomePage:new n("teamhome",t.SubjectSection),PlayerPage:new n("player",t.SubjectSection),MarketMoversPage:new n("marketmovers",t.SubjectSection),CommoditiesPage:new n("commoditiespage",t.SubjectSection),ChefPage:new n("chef",t.SubjectSection),NutritionIndexPage:new n("nutritionindex",t.SubjectSection),FinanceTechnologyPage:new n("finance-technologypage",t.SubjectSection),MedicalindexPage:new n("medicalindex",t.SubjectSection)},SiteSearchPageNames:{SearchResultsPage:new n("searchresultspage",t.SiteSearch),VideoSearchResultsPage:new n("videosearchresultspage",t.SiteSearch),PartnerVideolistPage:new n("partnervideolistpage",t.SiteSearch),HomepageBingserpIframepage:new n("homepage-bingserpiframepage",t.SiteSearch),SitesearchSitesearch:new n("sitesearch_sitesearch",t.SiteSearch),SearchResults:new n("search results",t.SiteSearch),SerpPage:new n("serppage",t.SiteSearch),FindaMoviePage:new n("findamoviepage",t.SiteSearch)},SectionFrontPageNames:{Competitionhub:new n("competitionhub",t.SectionFront),Local:new n("local",t.SectionFront),Stockscreener:new n("stockscreener",t.SectionFront),Toolslandingpage:new n("toolslandingpage",t.SectionFront),Showtimes:new n("showtimes",t.SectionFront),FinanceRealEstatepage:new n("finance-real-estatepage",t.SectionFront),CookingSchool:new n("cooking school",t.SectionFront),Allcompetitions:new n("allcompetitions",t.SectionFront),Newspage:new n("newspage",t.SectionFront),CocktailHub:new n("cocktail hub",t.SectionFront),Travelflightsearchhubpage:new n("travelflightsearchhubpage",t.SectionFront),Hotelshubpage:new n("hotelshubpage",t.SectionFront),WineHub:new n("wine hub",t.SectionFront),ChefHub:new n("chef hub",t.SectionFront),Travelflightstatushubpage:new n("travelflightstatushubpage",t.SectionFront),HomepageCompetitionhub:new n("homepage-competitionhub",t.SectionFront),Editorial:new n("editorial",t.SectionFront),SecfrontHotel:new n("secfront_hotel",t.SectionFront),SecfrontTNews:new n("secfront_tnews",t.SectionFront)}},h={TelemetryProduct:{Spartan:"spartan",Prime:"prime",PrimeMobile:"prime_mobile",IEext:"ieext",SpartanMobile:"spartan_mobile",TabbedShell:"tabbedshell",ChromeExt:"chromeext",Downlevel:"downlevel",Xbox:"xbox"},TelemetryPageType:t,TelemetryType:i,TelemetryContentType:f,TelemetryContentAction:e,ContentPlacedBySource:{Editor:0,PersonalizationAlgo:1,Bing:2,Taboola:3,Outbrain:4,AutoCuration:5,User:6,AppNexus:7,OtherSponconProvider:8},TelemetryPageConfiguration:{NoContent:0,OneBox:1,TopSites:2,Suggested:4,ContentFeed:8,WinFre:16},TelemetryPageName:s,TelemetryPageMode:{Default:0,Trial:1,Subscription:2},TelemetryFeedName:{Office:"office",Apps:"apps",Timeline:"timeline",StartMenu:"startmenu"},TelemetryPartnerNamespace:{MMX:"m",Shell:"s",Edge:"e",Office:"o",Activity:"a",Cortana:"c"},getTelemetryContentType:a,getTelemetryContentAction:v,getTelemetryPageInfo:c,validateTelemetryDataType:l};return y(),p(),h});define("binding",["viewAware","mediator","window"],function(n,t,i){function s(t){return this.view(n.views.ALL&~this.views,t)}function a(n){var i=n.args[0],t,e,c,u;if(typeof i=="string")t=i;else if(typeof i.selector=="string")t=i.selector;else try{t=JSON.stringify(i)}catch(a){t="{unserializableSelector}"}var o=f[t]||(f[t]={}),s=o[n.behaviorName]||(o[n.behaviorName]={}),h=s[n.view]||(s[n.view]={}),l=n.args[1],r;try{r=JSON.stringify(l||"{defaultContext}")}catch(a){r="{unserializableContext}"}e=h[r]||(h[r]={});c=n.args[2];try{u=JSON.stringify(c||"{defaultOptions}")}catch(a){u="{unserializableOptions}"}return e[u]?!1:(e[u]=n,!0)}function h(n,t,i){var h=[],r,c,l,a,v,u,e,o,s;typeof i!="function"&&(i=function(){return!0});r=f[n]||{};t&&(r={behaviorName:r[t]||{}});for(c in r){u=r[c];for(l in u){e=u[l];for(a in e){o=e[a];for(v in o)s=o[v],i(s)&&h.push(s)}}}return h}function c(n,t){for(var u=null,i=0;i<r.length;i++)if(r[i].behaviorName==n&&r[i].args[0]==t){u=r[i];break}return u}function v(n){var t,u,i;for(e=n,i=0;i<r.length;i++)t=r[i],u=t.view&e,t.active&&(u?t.update():(t.teardown(),t.active=0));for(i=0;i<r.length;){if(t=r[i],u=t.view&e,u&&!t.active&&!o(t)){r.splice(i,1);continue}++i}}function o(n){var t;return n.setup||(t=n.behavior.apply(null,n.args),t&&(n.setup=t.setup,n.teardown=t.teardown,n.update=t.update)),t=!1,n.setup&&(n.setup(),n.active=1,t=!0),t}function l(t,r,u){this.behaviorName=t;this.selector=r;this.context=u;this.views=n.views.NONE;this.timeout=i.setTimeout(function(){throw'binding("'+t+'", "'+r+'") was not followed with an all(), view(), or fallback() call!';},0)}var r=[],f={},e,u;return n.listen(v),l.prototype={view:function(n,t){var f=this.behaviorName,s=[this.selector,this.context,t],u={active:0,args:s,behaviorName:this.behaviorName,view:n};return this.views|=n,i.clearTimeout(this.timeout),a(u),require([f],function(t){u.behavior=t;var i=!0;n&e&&(i=o(u));i&&r.push(u)}),this},fallback:s,all:s,get:c},u=function(n,t,i){return new l(n,t,i)},u.views=n.views,u.refreshBindings=function(n,t){for(var i,u=h(n,t),r=0;r<u.length;r++)i=u[r],i.setup&&(delete i.setup,delete i.teardown,delete i.update,o(i))},u.unbind=function(n,t){for(var e=r&&r.length||0,o,u,i;--e>=0;)r[e].args[0]!=n||t&&r[e].behaviorName!=t||r.splice(e,1);for(o=function(n){return n&&n.teardown},u=h(n,t,o),i=0;i<u.length;i++)u[i].teardown(),delete u[i].setup,delete u[i].teardown,delete u[i].update;delete f[n]},i.binding=u,i.binding.get=c,u});define("rawCookies",["document"],function(n){function t(n,t){var r=new RegExp("\\b"+n+"\\s*=\\s*([^;]*)","i"),i=r.exec(t);return i&&i.length>1?i[1]:""}function i(t,i,r,u,f,e){var s,o=[t,"=",i],h;r===-1?s="Fri, 31 Dec 1999 23:59:59 GMT":r&&(h=new Date,h.setTime(h.getTime()+r*864e5),s=h.toUTCString());s&&o.push(";expires=",s);u&&o.push(";domain=",u);f&&o.push(";path=",f);e&&o.push(";secure");n.cookie=o.join("")}return{extractCookieFromDocumentCookies:t,setCookie:i}});define("isSetCookiePermitted",["headData"],function(n){return function(t){var i=n&&n.clientSettings,r,u,e,o,s,h,f;if(!i||!i.functionalonly_cookie_experience)return!0;if(r=i.functional_cookies,u=i.functional_cookie_patterns,!r&&!u)return require(["logging"],function(n){n.error("Functional Cookies List AND Functional Cookie Patterns List are empty")}),!0;if(e=t.toLowerCase(),o=",",r&&r.toLowerCase().split(o).indexOf(e)>=0)return!0;if(u)for(s=u.toLowerCase().split(o),h=s.length,f=0;f<h;f++)if(new RegExp(s[f]).test(e))return!0;return!1}});define("getCookie",["document","rawCookies"],function(n,t){return function(i){return t.extractCookieFromDocumentCookies(i,n.cookie)}});define("setCookie",["location","isSetCookiePermitted","rawCookies"],function(n,t,i){function r(n,r,u,f,e,o){u>0&&!t(n)||i.setCookie(n,r,u,f,e,o)}return r.topDomain=(n.hostname.match(/[^.]+\.[^.\d]+$/)||{})[0]||"",r});define("dom",function(){var n=document,t=/[\n\t]/g,i=/(^\s+)|(\s+$)/mg;return{attr:function(n,t){return n&&(n.getAttribute?n.getAttribute(t,2):n[t])||""},name:function(n){return n&&n.nodeName||""},text:function(n){return(n&&(n.textContent||n.innerText)||"").replace(i,"")},children:function(n){return n&&n.children||[]},parent:function(n){return n&&n.parentNode},getElementsByTagName:function(t){return n.getElementsByTagName(t)},create:function(t){return n.createElement(t)},containsClass:function(n,i){return n&&(" "+(n.className||n.getAttribute("class"))+" ").replace(t," ").indexOf(" "+i+" ")>-1},getTarget:function(n){return n&&(n.customTarget||n.target||n.srcElement)||document}}});define("events",function(){function n(n,t,i){n.addEventListener&&n.addEventListener(t,i,!1)}function t(n,t,i){n.removeEventListener&&n.removeEventListener(t,i,!1)}return{bind:n,unbind:t}});define("extend",function(){function t(n){return Array.isArray?Array.isArray(n):Object.prototype.toString.call(n).toLowerCase()==="[object array]"}function n(){var e=arguments,r=e[0]||{},o=1,i,u,s,f;for((typeof r=="boolean"||typeof r=="number")&&(s=!!r,r=e[1],o=2);o<e.length;o++){u=e[o];for(i in u)u[i]!==undefined&&u[i]!==null&&(s&&typeof u[i]=="object"?(f=r[i],typeof f!="object"&&(f=t(u[i])?[]:{}),n(!0,f,u[i]),r[i]=f):r[i]=u[i])}return r}return n});define("format",function(){function t(t,i,r){for(var u=0;u<r.length-i;++u)t=t.replace(n[u]||(n[u]=new RegExp("\\{"+u+"\\}","g")),r[u+i]);return r.length?t:t.toString()}var n=[];return String.prototype.format=function(){return t(this,0,arguments)},function(n){return(typeof n=="function"&&(n=n.apply(n,Array.prototype.slice.call(arguments,1))),n==null)?"":(typeof n!="string"&&(n=n.toString()),n)?t(n,1,arguments):""}});define("ajax",[],function(){function n(n){if(!n||!n.url){n.error&&n.error("Missing Url. Invalid parameters");return}var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState==4){if(t.status!=200&&n.error){n.error(t.status,t.statusText);return}n.success&&n.success(t.response)}};t.open("GET",n.url);n.dataType&&t.setRequestHeader("Content-Type",n.dataType);n.timeout&&n.timeout>0&&(t.timeout=n.timeout);n.ontimeout&&(t.ontimeout=function(){n.ontimeout&&n.ontimeout("Request timeout")});t.send()}function t(n){if(!n||!n.url){n.error&&n.error("Missing Url. Invalid parameters");return}if(!n.body){n.error&&n.error("Missing request body. Invalid parameters");return}var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState==4){if(t.status!=200&&n.error){n.error(t.status,t.statusText);return}n.success&&n.success(t.response)}};t.open("POST",n.url);n.dataType&&t.setRequestHeader("Content-Type",n.dataType);n.timeout&&n.timeout>0&&(t.timeout=n.timeout);n.ontimeout&&(t.ontimeout=function(){n.ontimeout&&n.ontimeout("Request timeout")});t.send(n.body)}return{get:n,post:t}});define("refreshPdpModules",["jquery","refreshModules"],function(n,t){function i(){var i=n("[data-pdp-dependent]"),r=t(i,{pfr:1});r.then(function(){define("c.pdpready",1)})}return i});define("refreshSigninModule",["jquery","refreshModules","binding"],function(n,t){function i(){var i=n("[data-sso-dependent]");t(i).then(function(){})}return i});define("guidGen",function(){return function(){function t(t){var i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(t=="x"?i:i&7|8).toString(16)}var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t)}});define("pageInstance",["mediator","guidGen","document","telemetry.constants"],function(n,t,i,r){var u,f="updatePageInstance";return n.sub(f,function(){var e,o,s,f;if(u=t().replace(/-/g,""),n.pub(r.ResetIdx),e=i.body.querySelector("#srchfrm"),e)for(o=e.querySelectorAll("input[name='refig']"),s=o.length,f=0;f<s;f++)o[f].value=u}),{getActivityId:function(){return u},setActivityId:function(t){u=t;n.pub(r.ResetIdx)},eventName:f}});define("refreshModules",["jquery","navigation","headData","window","location","promise","requestAnimationFrame","imgSrc","mediator","escape"],function(n,t,i,r,u,f,e,o,s,h){function d(t,i,r,u,f,e){n.ajax({url:t,dataType:"html",data:{pagerequest:JSON.stringify(i)},crossDomain:!0,method:"GET",xhrFields:{withCredentials:!1}}).done(function(t){a(r,t,null,e);u(t);r.each(function(){var t=n(this).data("moduleId");t&&s.pub("moduleRefreshed-"+t)})}).fail(function(){f(arguments)})}function g(t,i,r,u,f,e){var o=!1,h={};!/^https/.test(t)&&i&&i.Regions&&i.Regions.length&&nt(i.Regions)&&(t="https"+t.substring(4),o=!0,h={withCredentials:!0});n.ajax({url:t,dataType:"html",data:JSON.stringify(i),method:"POST",contentType:"application/json",crossDomain:o,xhrFields:h}).done(function(t){a(r,t,null,e);u(t);r.each(function(){var t=n(this).data("moduleId");t&&s.pub("moduleRefreshed-"+t)})}).fail(function(){f(arguments)})}function nt(n){for(var t=0;t<n.length;t++)if(n[t].type==="meStripe")return!0;return!1}function tt(){var t,n,i;if(c&&c.deferLoadedItems){for(t=c.deferLoadedItems.split(","),n=0,i=t.length;n<i;n++)t[n]&&c.removeItem(t[n]);c.removeItem("deferLoadedItems")}}function it(n,t){if(!c||!n||!t)return null;var i,r=c.getItem(n);try{i=JSON.parse(r)}catch(u){return null}return i&&i.data&&i.lastUpdatedTime&&Date.now()-i.lastUpdatedTime<t?i.data:null}function rt(n,t){c&&(c.deferLoadedItems||(c.deferLoadedItems=""),c.deferLoadedItems+=","+n,c.setItem(n,JSON.stringify({lastUpdatedTime:Date.now(),data:t})))}function a(t,i,r,u){var f,e,o,s;i&&(f=n("<data>"+n.trim(i)+"<data>"),ot(f),e=f.find("[data-module-id]"),u=u||{},o=u.loadEmptyContent,t.each(function(){var h=n(this),t,i=h.data("moduleId");if(t=e.filter("[data-module-id='"+i+"']"),t.length){var u=n("[data-module-id='"+i+"']"),c=v[i]||u.html(),f=t.html(),l=ut(f,c);ft(t,u);(o||f&&f.trim())&&(y||!l)&&(v[i]=f,et(t,u),t.css("opacity",0),t.insertAfter(u.first()),u.remove(),t.animate({opacity:1},1e3),s=!0);!r&&h.data("cache-duration")&&rt(i,t[0].outerHTML)}}))}function ut(n,t){if(!n||!t)return!!n==!!t;var i=b(n),r=b(t);return i===r}function b(n){return n.replace(/(data-id|data-m|class)=(\"[^\"]*\")|(\'[^\']*\')/g,"").trim()}function ft(n,t){var i=t.data("m"),r=n.data("m");i&&i.p&&r&&(r.p=i.p,n.attr("data-m",JSON.stringify(r)))}function et(t,i){n("img[data-src]",t).each(function(){o.force(this,i)||o.go(this)})}function ot(t){var i=t.children("link[rel=stylesheet]");i.length&&i.each(function(){var t=this.getAttribute("href");p[t]||((w||(w=n("head"))).append(this),p[t]=!0)})}var l=i.moduleapi,k=i.cdnmoduleapi,v={},y,p={},w,c;try{c=r.localStorage}catch(st){c=null}return l?function(e,o,s,c,v,p,w,b,nt){var ft,ut,st,rt,et,ot,ht;return(i.signedin||tt(),!e||e.length===0)?new f(function(n){n()}):(e instanceof n||(e=n(e)),typeof o=="string"&&(o=t.getParams(o)),p&&(l=p),(s===undefined||s===null)&&(s=!1),y=v,ft=n.extend(t.getParamsFromUrl(u.href),o),s&&delete ft.ocid,w&&ft.locale&&(ft.locale=w),ut=n.param(ft),st=l.split("?")[0]+(ut?"?"+ut:""),st+=(st.indexOf("?")===-1?"?":"&")+"ou="+h.urlPart(u.href),rt={RequestUri:u.href.split("?")[0]+(ut?"?"+ut:""),ExperienceId:b&&i.kernelXd?i.kernelXd:i.xdid||null,CacheDuration:null},et=null,s&&(et=k.split("?")[0]+(ut?"?"+ut:""),et+=(et.indexOf("?")===-1?"?":"&")+"devicegroup="+i.dg,c!==undefined&&c!==null&&(rt.CacheDuration=c.toString())),nt=n.extend({loadEmptyContent:!1},nt),ot={},ht=[],e.each(function(){var i=n(this).data("moduleId"),r,u,t;if(i){if(r=n(this).data("cache-duration"),u=r?it(i,r):null,u){ht.push(u);return}if(t=i.split("|"),t.length==5){var o={key:t[3],type:t[4]},f={key:t[1],type:t[2],Modules:[o]},e=f.key+f.type;ot[e]?ot[e].Modules.push(o):ot[e]=f;rt.Type||(rt.Type=t[0])}}}),ht.length&&a(e,ht.join(""),!0,nt),rt.Regions=n.map(ot,function(n){return n}),rt.Regions!=null&&rt.Regions.length>0?new f(function(n,t){s?d(et,rt,e,n,t,nt):g(st,rt,e,n,t,nt)}):(r.console&&r.console.log&&console.warn("Regions were empty or null"),new f(function(n){n()})))}:(r.console&&console.log("moduleApiEndpoint is missing from header, ajax module update will exit."),n.noop)});define("promise",function(){return window.Promise});define("oAuthHelper",["window","location","webStorage"],function(n,t,i){function o(){var u=t.hash,n;u&&(n=i.getItem(r),n)&&(e(u),i.removeItem(r),t.replace(n))}function e(n){var r=s(n),t=r.access_token;return t&&(i.setItem(u,t),i.setItem(f,parseInt(r.expires_in)+Math.round((new Date).getTime()/1e3))),t}function s(n){var t={},i,u,r;if(!n.length)return t;i=n.substring(1).replace(/\+/g," ").split("&");for(u in i)r=i[u].split("="),t[r[0]]=decodeURIComponent(r[1]);return t}var u="AAD.Access.Token",f="AAD.Access.Token.Expiry",r="oAuthResponseURI";return{storagePropertyNames:{aadAccessToken:u,aadAccessTokenExpiry:f,aadAccessTokenRenewalState:"AAD.Access.Token.Renewal",aadUniqueName:"AAD.User.UniqueName",oAuthResponseUri:r},handleResponse:o,storeAccessToken:e}});define("spartanConstants",function(){return{canaries:{marketCookieNotFound:"c.marketCookieNotFound",nacDhpReadyForTracking:"c.nacDhpReadyForTracking",settingRestored:"c.settingRestored",ttafAnimation:"c.ttafAnimation"},cookieExpirations:{tenYears:3650},cookieNames:{activityId:"aid",childMode:"child",contentFilter:"catf",feedFilter:"orfc_feeds",followFilter:"fol",launchNumber:"launchNumber",marketReset:"mktreset",marketSelection:"ntps",noAppCache:"nactk",relatedFilter:"rcatf",sptMarket:"sptmarket",topicsFilter:"tsf"},eventNames:{sectionHeaderDockedEvent:"sectionHeaderDocked",wamHasMsaToken:"wamHasMsaToken"}}});define("errorCategory",{updateTrackingInfo:{errId:1001,errMsg:"Error found",errSource:" topsites.js function updateTrackingInfo(appId, elements)"},getCuratedSitesData:{errId:1002,errMsg:"curatedSites empty",errSource:"topsites.js function render()"},invalidAjaxResponse:{errId:1003,errMsg:"Error in Ajax Response",errSource:" spartanRiverLoader.js function showDelayLoadedModules(response)"},ajaxServerError:{errId:1004,errMsg:"Server error for ajax response: ",errSource:" spartanRiverLoader.js ajax.get"},missingContentError:{errId:1005,errMsg:"Missing required content: ",errSource:" spartanRiverLoader.js function renderDelayLoadedModules(response)"},riverRenderError:{errId:1006,errMsg:"River failed to render",errSource:" spartanRiverLoader.js function waitForRiverSectionToRender(riverSection)"},serviceUIError:{errId:1007,errMsg:"Service Ui Error: ",errSource:" serviceUIHelper.js"},riverJsonParseError:{errId:1008,errMsg:"Json parsing error for string: ",errSource:" spartanRiverLoader.js"},zeroTopSitesError:{errId:1009,errSource:" topSitesController.js"},dhpNoAppCacheError:{errId:1010,errMsg:"dhp failed to switch to its noAppCache market. ",errSource:"dhp noAppCache page"},jsError:{errId:1011},outlookCardError:{errId:1012,errSource:" outlookCard.js"},emailCardError:{errId:1012,errSource:" emailModuleRenderingHelper.js"},readingListTimeoutError:{errId:1013,errMsg:"did not get back reading list data before timeout",errSource:" serviceUIHelper.js function getReadingListAsync(callback, delay)"},missingRiverItemError:{errId:1014,errMsg:"Missing required river items.",errSource:"riverSection.js function positionRiverSectionItems"},appInstallError:{errId:1015,errMsg:"Failed to install app. Error code: {0}",errSource:"App Id: {0}, source: {1}"},appCacheRapidRefreshError:{errId:1016,errMsg:"Appcache is being refreshed more often than current allowed threshold",errSource:"appCacheHelper.js function checkStatus()"},staticsPoisoningError:{errId:1017,errMsg:"user encountered poisoned statics, in ",errSource:"statics poisoning"},staticsPoisoningWithDhpAppcacheError:{errId:1018,errMsg:"user with dhp cache encountered poisoned statics, in ",errSource:"statics poisoning"},invalidIsSignedInResponse:{errId:1019,errMsg:"Error in is-signed-in Ajax Response ",errSource:"spartanRiverLoader.js function requestSignedInState()"},domElementExistsButIsNotVisible:{errId:1020,errMsg:"DOM element exists but is not visible: ",errSource:"spartanRiverLoader.js function validateVisibility()"},doubleSearchBoxesRenderedError:{errId:1021,errMsg:"Double search boxes rendering on page: ",errSource:"serviceUIHelper.js function traceErrorIfDoubleSearchBoxIsRendered()"},followFeedsUpdateTrackingInfo:{errId:1022,errMsg:"Error found",errSource:"oneRiverToggleFollowFeeds.js function updateTrackingInfo()"},authRefreshBlockedError:{errId:1023,errMsg:"server failed to authenticate valid WAM app token, blocking page refresh",errSource:" establishSignedInState.js"},browserAccessError:{errId:1024,errMsg:"Browser Access Error: ",errSource:" browserAccess.js"},appCacheOnErrorStatus:{errId:1026,errMsg:"appcache onerror fired ",errSource:" appCacheHelper.js"},appCacheOnObsoleteStatus:{errId:1027,errMsg:"appcache update status resulted in obsolete state: ",errSource:" appCacheHelper.js"},applicationCacheUnhealthyState:{errId:1029,errMsg:"ApplicationCache is in an uhealthy state, status is: ",errSource:"appCacheHelper.js"},delayUpdatedUserProfile:{errId:1030,errMsg:"Issue with response of delay updated user profile: ",errSource:"delayUpdatedUserProfile"},componentUIFailedToAttach:{errId:1301,errMsg:"Component UI failed to attach",errSource:" cortanaSearch.js"},componentUIDetached:{errId:1302,errMsg:"Component UI detached.",errSource:" cortanaSearch.js"},componentUISetTabInfoAsyncFailed:{errId:1303,errMsg:"Component UI SetTabInfoAsync Failed",errSource:" cortanaSearch.js"},componentUISetNtpExperimentsAsyncFailed:{errId:1304,errMsg:"Component UI setNtpExperimentsAsync Failed",errSource:" cortanaSearch.js"},componentUISetPageInfoAsyncFailed:{errId:1305,errMsg:"Component UI setPageInfoAsync Failed",errSource:" cortanaSearch.js"},domElementExistsButIsNotVisibleForSearch:{errId:1306,errMsg:"DOM element exists but is not visible: ",errSource:"verifyPageElements.js function validateVisibility()"},searchVisibleButUnstyled:{errId:1307,errMsg:"DOM element exists and visible, but unstyled: ",errSource:"verifyPageElements.js function validateVisibility()"},componentUISetLocationAsyncFailed:{errId:1308,errMsg:"Component UI setLocationAsync Failed.Error: ",errSource:"cortanaSearch.js function getLocationInfoAndSetToCortana()"},unknownPageRefreshInfo:{errId:1400,errMsg:"refreshPage reason: unknown ",errSource:" spartanSharedHelper.js"},achForceUpdateUnCachedState:{errId:1401,errMsg:"appCacheHelper.forceUpdate(): applicationCache.status: 0",errSource:"appcacheHelper.js function forceUpdate()"},achOnlineHandler:{errId:1402,errMsg:"Appcache Helper: Browser 'online' event handler",errSource:"appcacheHelper.js function offlineAction()"},achCheckStatus:{errId:1403,errMsg:"update ready fired",errSource:"appcacheHelper.js function checkStatus()"},achOnObsolete:{errId:1404,errMsg:"appCacheHelper.checkObsoleteStatus(): breaking out of appcache",errSource:"appcacheHelper.js function checkObsoleteStatus()"},establishSignedInState:{errId:1405,errMsg:"establishSignedInState.js: server sign-in state does not match client sign-in state",errSource:"establishSignedInState.js function refreshOnce()"},oldRiverSection:{errId:1406,errMsg:"riverSection.updateAppCacheIfKernelVersionMismatch(): kernel version and river version do not match",errSource:"riveSection.js function updateAppCacheIfKernelVersionMismatch()"},oneRiverSection:{errId:1407,errMsg:"riverSectionOneRiver:updateAppCacheIfKernelVersionMismatch(): kernel version and river version do not match",errSource:"riveSectionOneRiver.js function updateAppCacheIfKernelVersionMismatch()"},spartanDhpNoAppCache:{errId:1408,errMsg:"spartanDhpNoAppCache.js: taking DHP page out of appcache",errSource:"spartanDhpNoAppCache.js function doRefresh()"},srlLoadMeControl:{errId:1409,errMsg:"load me control refresh",errSource:"spartanRiverLoader.js function loadMeControl()"},kernelJsFallback:{errId:1410,errMsg:"kernel fallback JS refresh",errSource:"kernelErrorFallBackPage.js"},pageRefreshInfo:{errId:1499,errMsg:"refreshPage reason: ",errSource:" spartanSharedHelper.js"},cookiesAccepted:{errId:1500,errMsg:"cookies accepted",errSource:"cookieComplianceHelper.js function grantCookieConsentAndDecorateLink()"},pcSettingsChanged:{errId:1501,errMsg:"pageCustomization.js: settings changed",errSource:"pageCustomization.js function refreshPage()"},pcResetSettings:{errId:1502,errMsg:"pageCustomization.resetSettings(): setting reset",errSource:"pageCustomization.js function resetSettings()"},pcSaveEdgeModal:{errId:1503,errMsg:"pageCustomization.saveEdgeStartModalMarketConfig(): market changed",errSource:"pageCustomization.js function saveEdgeStartModalMarketConfig()"},relatedCategory:{errId:1504,errMsg:"relatedCategory.onRelatedFilterClick",errSource:"relatedCategory.js"},rsnffFeedFilterClicked:{errId:1505,errMsg:"riverSectionNewsFeedFilters.onRelatedCategoriesClick(): news-feed filter clicked",errSource:"riverSectionnewsFeedFilters.js function onNewsFeedFilterClick()"},rsnffRelatedFilterClicked:{errId:1506,errMsg:"riverSectionNewsFeedFilters.onNewsFeedFilterClick(): related news-feed filter clicked",errSource:"riverSectionnewsFeedFilters.js function onRelatedFilterClick()"},topicSearch:{errId:1507,errMsg:"topicSearch.checkAndSubmit",errSource:"topicSearch.js function checkAndSubmit()"},oneRiverErrorRefresh:{errId:1508,errMsg:"oneRiverErrorRefresh.refreshLinkClicked",errSource:"oneRiverErrorRefresh.js function refreshLinkClicked()"},oneRiverFeeds:{errId:1509,errMsg:"oneRiverFeeds.feedButtonClicked",errSource:"oneRiverFeeds.js"},topSitesHelper:{errId:1510,errMsg:"display option set",errSource:"topSitesHelper.js function setDisplayCoookieAndRefreshIfNeeded()"},swRegistrationError:{errId:3001,errMsg:"Failed to register ServiceWorker. ",errSource:"swRegistration.js navigator.serviceWorker.register()"},swUnregistrationError:{errId:3002,errMsg:"Failed to unregister ServiceWorker. ",errSource:"swRegistration.js navigator.serviceWorker.getRegistration.unregister()"},windowsAccessError:{errId:4001,errMsg:"WinRT Public and Private API Access Error",errSource:" windowsAccess.js"},getCuratedData:{errId:4002,errMsg:"Error fetching curated apps for frequent destinations",errSource:"frequentDestinationsModule.js"},missingAppsData:{errId:4003,errMsg:"Missing curated app list and default app list for frequent destinations",errSource:"frequentDestinationsModule.js"},missingRootSectionError:{errId:4004,errMsg:"Missing required section: ",errSource:"frequentDestinationsModule.js"},frequentDestinationsError:{errId:4005,errMsg:"Error rendering frequent destinations",errSource:"frequentDestinationsModule.js"}});define("spartanPageDetectionHelper",["location"],function(n){var t=n.pathname,u=t.indexOf("/dhpwinfre")>=0,i=!u&&t.indexOf("/dhp")>=0,s=u||i,r=!i&&t.indexOf("spartan/ntp")>=0,f=!i&&!r&&t.indexOf("/ientp")>=0,o=!i&&!r&&!f&&t.indexOf("/extntp")>=0,e=r||f||o,h=!i&&!e&&t.indexOf("compass/ntp")>=0,c=e;return{isAppNtp:h,isDhpPage:i,isDhpWinFrePage:u,isSomeDhpPage:s,isExtNtpPage:o,isIeNtpPage:f,isNtpPage:r,isSomeNtpPage:e,isRiverAjaxLoaded:c}});define("spartanHeaderHelper",["spartanPageDetectionHelper","serviceuihelper","browserState"],function(n,t,i){function r(){if(t.features.OneBoxPinnedByDefault)return!0;var i=n.isDhpPage;return i?t.isDhpOneBoxPinned():t.isNtpOneBoxPinned()}function u(){var t=!1;return n.isDhpPage&&!i.getThirdPartySearchProvider()&&(t=!1),t}function f(){return n.isDhpPage?t.isDhpShiftFocusSetToWebContent():t.isNtpShiftFocusSetToWebContent()}return{isOneBoxPinned:r,shouldFocusShiftToWebContent:u,isFocusShiftToWebContent:f}});define("spartanSharedHelper",["location","browserAccess","spartanPageDetectionHelper","navigation","headData","requestPageRevealCallback","setCookie","getCookie"],function(n,t,i,r,u,f,e,o){function c(){var n="refresh-reason",t=o(n);t&&(e(n,"",-1,undefined,"/spartan/"),require(["track","errorCategory"],function(n,i){h(n,i,i[t])}))}function l(n,t){require({synchronous:!0},["track","errorCategory"],function(i,r){h(i,r,t);a(n)})}function h(n,t,i){i=i||"no reason specified";var r=i||t.unknownPageRefreshInfo;r.forcedDispatch=!0;n.trackAppErrorEvent(r)}function a(f){if(t.isServiceUiAvailable()&&!t.features.TH2Features){if(i.isNtpPage||i.isAppNtp){n.href="about:tabs";return}if(i.isDhpPage){n.href="about:start";return}}if(u.ispreload&&s){var e=r.getParamsFromUrl(n.href,!1,!0);delete e.backgroundpreload;n.replace(r.mergeQueryStringParams(n.origin+n.pathname,e));return}n.reload(f)}var s=!1;return f(function(){s=!0}),c(),{refreshPage:l}});define("webStorage",["window"],function(n){function h(){try{return u in n&&i!==null&&f in n&&r!==null}catch(t){return!1}}function e(n,u){if(t){var f=u?r:i;return f.getItem(n)}}function c(n,t){var i=e(n,t);try{return typeof i=="string"?JSON.parse(i):i}catch(r){console.log(r)}return i}function o(n,u,f){if(t)try{typeof u=="object"&&(u=JSON.stringify(u));var e=f?r:i;e.setItem(n,u)}catch(o){console.log(o)}}function s(n,u){if(t){var f=u?r:i,e=f.getItem(n);return e!==null&&f.removeItem(n),e}}var u="localStorage",f="sessionStorage",i=null,r,t;try{i=n[u]}catch(l){}return r=n[f],t=h(),t&&n.addEventListener("storage",function(){}),{supported:t,getItem:e,getObject:c,setItem:o,setObject:o,removeItem:s,removeObject:s}});define("appHelper",["document","colorHelper","format","errorCategory","webStorage"],function(n,t,i,r,u){function c(n,t){for(var r,u,f={},o=n instanceof Array&&n.length||0,i=0;i<o;i++)r=e(n[i]),u=r.aumId||t&&r.pfn,u&&(f[u]=!0);return Object.keys(f)}function e(n){var t={bigCatId:null,aumId:null,pfn:null},i;return n&&(i=n.indexOf("!"),i>0?(t.aumId=n,t.pfn=n.substring(0,i)):n.indexOf(".")>0||n.indexOf("_")>0?t.pfn=n:t.bigCatId=n),t}function h(n){var t=e(n);return l(t)}function l(n){return n.pfn&&o?i(o,n.pfn):n.bigCatId&&s?i(s,n.bigCatId):null}function a(n,t,f,e){var o,s,h,c;return t!=null&&f!=null&&(o=r.appInstallError,s="NA",n.trackAppErrorEvent({errId:o.errId,errMsg:i(o.errMsg,f||s),errSource:i(o.errSource,t||s,e||s)}),h="install_error_"+t,c=u.getItem(h,!0),!c)?(u.setItem(h,"1",!0),!0):!1}function v(t,i,r,u){if(!r||a(t,i,r,u)){var e=h(i);if(e)return f||(f=n.createElement("a")),f.setAttribute("href",e),f.click(),!0}return!1}function y(n,i){var r={color:"",background:"",border:"",action:"",remove:"",isLightBackground:null},u=n,v=i||"#fff",h=t.parseColor(v),c,s;if(h&&(r.background=t.formatColor(h),c=t.grayScale(h)>128,u=u||(c?"#000":"#fff"),r.isLightBackground=c),u){if(s=t.parseColor(u),s){var f=s.r,e=s.g,o=s.b,l,a;t.grayScale(s)>128?(u=t.formatColor(f,e,o,.85),l=t.formatColor(f,e,o,.15),a=t.formatColor(f,e,o,.8)):(u=t.formatColor(f,e,o,.95),l=t.formatColor(f,e,o,.1),a=t.formatColor(f,e,o,.55));r.border=l;r.action=a;r.remove=t.formatColor(f,e,o)}r.color=u}return r}var o="ms-windows-store://pdp/?PFN={0}",s="ms-windows-store://pdp/?productId={0}",f;return{filterAppIdsForAppInstallStateCheck:c,getAppCalculatedColors:y,getApplicationStoreLink:h,tryLaunchStoreProductPage:v,tryParseAppId:e}});define("displayOptionsHelper",["document","browserAccess","serviceuihelper","browserState","location","setCookie","getCookie","navigator","trackInfo","headData","navigation","spartanPageDetectionHelper","spartanConstants","cookieComplianceHelper","c.dom"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){function kt(){var t=n.getElementById(ft),i=n.querySelector(ot);t&&t.classList.remove(ut);i&&i.classList.remove(et)}function dt(){var t=n.getElementById(ft),r=n.querySelector(ot),h=n.getElementById("ntss"),f,e,u,o,s,l;if(st()&&r&&r.classList.remove("hide-ts"),b()){var a=n.body,i="",c=n.getElementById("cc-banner");c&&(i+=c.outerHTML);f=n.getElementById("cacpageoverlay");e=n.getElementById("cacpagestatement");f&&e&&(u=n.getElementById("maincontent"),u&&(u.innerHTML=f.outerHTML+e.outerHTML,i+=u.outerHTML));o="";s=n.getElementById("searchhistory");s&&(o+=s.outerHTML);i+=o;t&&(t.className="cs-no-ts",i+=t.outerHTML);n.body.innerHTML=i}else nt()&&(t&&(l=n.getElementById(wt),t.className=ut,l&&t.classList.add(pt)),h&&(h.innerHTML=""),r&&r.classList.add(et));ct()}function gt(){return p}function b(){return w?p==y.BlankPage:!1}function ni(){return!b()&&i.showSearchHistory()&&!r.getThirdPartySearchProvider()}function nt(){return it||(w||tt)&&p==y.TopSitesOnly}function st(){var n=k?r.getDisplayOption():e(g);return bt&&(n!=y.BlankPage||at)}function ti(){return it?!1:w||tt?!b()&&!nt():!0}function ht(n){rt&&p!=n&&(n==y.TopSitesAndSuggestedContent||n==y.TopSitesOnly||n==y.BlankPage)&&(p=n,v.grantCookieConsentAndDecorateLink(null,null,!0),vt&&f(g,n.toString(),365),k&&i.setDisplayOption(n),ct())}function ct(){s.trackingDisabled=b()&&i.isEnterpriseMode()}function ii(){return e(yt)==="0"}function ri(){require(["persistentStorageManager"],function(n){if(!n.fetchProperty("MarketSelection")){var t="DefaultShowContent",i=n.fetchProperty(t);i||(c.getParamsFromUrl(u.href).enableRegulatoryPsm!="1"&&r.getDisplayOption()!=2&&ht(y.TopSitesAndSuggestedContent),n.saveProperty(t,"1"))}})}var lt=h.locale&&h.locale.toLowerCase(),p,y=r.constants.displayOptionValues,w=l.isSomeNtpPage||l.isAppNtp,tt=l.isSomeDhpPage,at=l.isDhpPage&&lt==="zh-cn",k=t.isServiceUiAvailable()&&w,vt=!k,g="iedo",yt=a.cookieNames.childMode,it=ii(),rt=(w,!0),d;rt&&(d=k?r.getDisplayOption():e(g),d>=0&&(p=!o.onLine&&d!=y.BlankPage?y.TopSitesOnly:d,i.features&&i.features.CanSetContentDefaultDisplayOption&&o.onLine&&ri()));var pt="kids",ut="cs-ts-only",ft="inlinesettings",wt="kidsmode",et="ts-only-pad",ot="section.topsites",bt=!!n.getElementById("js-topsites");return{configurePageToShowSuggestedContent:kt,getNtpDisplayOptionValue:gt,isDisplayOptionSetToBlank:b,modifyPageBasedOnUserSetting:dt,setNtpDisplayOptionValue:ht,shouldRenderSearchHistory:ni,shouldRenderTopSites:st,shouldRenderTopSitesOnly:nt,shouldRenderRiver:ti}});define("domHelper",function(){function i(i){while(i){var r=t(i,"href");if(!r)break;if(n(r))return r;i=r.parentNode}}function n(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase(),i=t&&t==="a"&&n.getAttribute("href");return i&&i.trim()!=="#"}function t(n,t){if(t)while(n&&n.getAttribute){if(n.getAttribute(t))return n;n=n.parentNode}}function r(t){if(!t||!n(t))return null;var i=t.href;return/^https*/i.test(i)?i:null}return{getNearestAnchorTag:i,isAnchorTag:n,selfOrAncestorWithAttribute:t,getContentAnchorTagAbsoluteUrl:r}});define("freExperienceHelper",["document","serviceuihelper","getCookie","setCookie","persistentStorageManager","c.dom"],function(n,t,i,r,u){function g(){return e&&!(c&h)}function w(){return e?(c&&!i(s)&&r(s,1,o),!c):!i(s)}function nt(i){if(e){var u=t.getExperienceDisplayed(),s=n.cookie;s.indexOf(f)!==s.lastIndexOf(f)&&r(f,100,-1);u&&!k(a,i)&&r(a,100,o,null,"/");i?b(i):u&h&&!k(f)?r(f,100,o,null,"/"):b()}}function b(n){d()||t.setExperienceDisplayed(n?v.NtpDisplayed:h)}function k(n,t){var r=i(n);return t?r:r&&r!="1"}function tt(){return y}function it(){n.body.classList.add(l)}function rt(){r(s,1,o);u.saveProperty(p,"false");n.body.classList.remove(l)}function d(){return n.body.classList.contains(l)}var e=t.features.TH2Features,o=182,f="launchNumber",a="featuredappsfre",v=t.constants.experienceDisplayedValues,h=v.DhpDisplayed,c=e?t.getExperienceDisplayed():null,l="showstartmodal",s="smd",y=n.getElementById("startmodalmask"),p="FreDialogExistingUser";return!y||(w()?u.fetchProperty("MarketSelection"):u.fetchProperty(p))||it(),{closeEdgeStartModal:rt,getStartModalMask:tt,isDhpFre:g,isFre:w,isEdgeStartModalOpen:d,setFreExperienceMarker:nt}});define("persistentStorageManager",["webStorage","setCookie","getCookie","spartanConstants","browserAccess","initialPersistentSettings"],function(n,t,i,r,u,f){function d(n){var t=o[n];return t&&e[t.id]}function g(t,i){var r=o[t],h;if(r){var u=r.jsonEncoded,c=r.maxRawLength,l=typeof i,f=JSON.stringify(i),a=f.length,v=u?l==="object"&&a<=c:l==="string"&&a<=c+2;if(v)return e[r.id]=u?y(f):i,h=u?f:i,p(r,h),n.setItem(r.id,h),s(),!0}return!1}function nt(t){var i=o[t];i&&(w(i),n.removeItem(i.id),delete e[i.id],s())}function tt(){var i,t;for(i in o)t=o[i],w(t),n.removeItem(t.id),delete e[t.id];s()}function s(){c&&u.writePageSettings(e)}function a(n){var t=e[n.id];return n.jsonEncoded?JSON.stringify(t):t}function v(t){var w=c&&t&&t!=="N/A",s,h,u;for(h in o){var f=o[h],r=f.id,v=f.useCookie;w&&(e[r]=t[r]);u=e[r];u||(u=v?i(r):n.getItem(r),e[r]=u==="null"?u=null:f.jsonEncoded?y(u):u);v?(r!==o.MarketSelection.id||s||i(r)||(s=!0),u&&p(f,a(f))):n.setItem(f.id,a(f))}s&&define(l.marketCookieNotFound,1);define(l.settingRestored,1)}function y(n){return JSON.tryParse(n)}function p(n,i){n.useCookie&&(t(n.id,undefined,h),t(n.id,i,b,undefined,k))}function w(n){n.useCookie&&t(n.id,undefined,h)}var b=182,h=-1,c=u.features.PersistentStorage,l=r.canaries,k="/spartan/",o={CompassHideStateKey:{id:"cmphs",maxRawLength:100,useCookie:!1,jsonEncoded:!0},DefaultShowContent:{id:"dsc",maxRawLength:1,useCookie:!1,jsonEncoded:!1},DisplayedCoachMarkWizards:{id:"cmwr",maxRawLength:250,useCookie:!0,jsonEncoded:!1},HasMsa:{id:"msa",maxRawLength:1,useCookie:!1,jsonEncoded:!1},MarketSelection:{id:r.cookieNames.marketSelection,maxRawLength:13,useCookie:!0,jsonEncoded:!0},OutlookOptIn:{id:"olopt",maxRawLength:1,useCookie:!1,jsonEncoded:!1},ProActiveCanvasFRE:{id:"spnewpcfre",maxRawLength:1,useCookie:!1,jsonEncoded:!1},StructuredDataCardsUserPreference:{id:"scp",maxRawLength:250,useCookie:!0,jsonEncoded:!0},TopicSelection:{id:"epnff",maxRawLength:31,useCookie:!0,jsonEncoded:!0},FreDialogExistingUser:{id:r.cookieNames.marketReset,maxRawLength:7,useCookie:!0,jsonEncoded:!1}},e={};return v(f),{saveProperty:g,fetchProperty:d,deleteProperty:nt,clear:tt,loadSettingsFromPersistentStorage:v}});require(["browserAccess"],function(n){n.features.PersistentStorage?n.fetchPageSettingsAsync().then(function(n){define("initialPersistentSettings",n||"N/A")}):define("initialPersistentSettings","N/A")});define("positionHelper",["document"],function(n){return{getEventMousePosition:function(t){var i=n.body,r=n.documentElement,u=i.clientLeft||r.clientLeft||0,f=i.clientTop||r.clientTop||0,e=i.scrollTop||r.scrollTop||0,o=i.scrollLeft||r.scrollLeft||0;return{x:t.clientX+o-u,y:t.clientY+e-f}}}});define("postdata",["serviceuihelper","browserAccess","trackInfo","location","pageInstance","c.deferred"],function(n,t,i,r,u){function f(){var e,o,h;if(t.isServiceUiAvailable()){var c=i.sitePage.flightid||"",s=u.getActivityId()||i.sitePage.requestId||"",f=i.client.clientId()||"",l={flightId:c,MUID:f+";"+s,WebIG:s};(n.setFlightInstrumentationData(l),t.features.UnifiedCookieJar)||(f=i.client.getMuid(),f&&(e={domain:"bing.com",MUID:f},t.setMuidForTabs(e),o=r.host.split(".").reverse(),o.length>1&&(h=o[1]+"."+o[0],e={domain:h,MUID:f},t.setMuidForTabs(e))))}}return{post:f}});require(["serviceuihelper","window","screen","document","displayOptionsHelper","viewport","mediator","spartanHeaderHelper","c.riverReady"],function(n,t,i,r,u,f,e,o){function b(){y(a<p())}function y(i){if(!w)if(i&&(s===!1||n.oneBoxIsShown()))s=!0,n.showOneBox(!1);else if(s&&a>=p()&&c>=t.scrollY){s=!1;var u=r.querySelector("body");u&&u.classList.remove("htmlheader");n.showOneBox(!0)}}function p(){return Math.round(100*(i.deviceXDPI/h)+.49)}var s=!1,c=t.scrollY+15,l="initialDpi",h=i.deviceXDPI,a=100,w=o.isOneBoxPinned(),v=sessionStorage.getItem(l);(v?h=parseInt(v):sessionStorage.setItem(l,h),u.shouldRenderRiver())&&(r.onscroll=function(){y(c<=t.scrollY)},e.sub(f.sizeChangeEventName,b))});define("asimovHelper",function(){function i(){for(var t="",i=0;i<16;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t+".0"}function r(n){return!!t.test(n)}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new RegExp("^["+n+"]{16}(.[0-9]+)+$");return{generateCV:i,isValidCV:r}});define("colorHelper",["document","measure"],function(n,t){function f(n){return n&&(s(n)||l(n))}function s(n){var r=n&&n.replace("#",""),t=parseInt(r,16),i;return isNaN(t)?null:(i=r.length,i==3)?{r:(t>>8)*17,g:(t>>4&15)*17,b:(t&15)*17,a:1}:i==6||i==8?{r:t>>16&255,g:t>>8&255,b:t&255,a:i==6?1:(t>>24&255)/255}:null}function l(i){var e,f,h;return i?(r||(r=n.createElement("div"),n.querySelector("body").appendChild(r)),r.style.color=i,e=t(r,"color"),f=e.replace(o,"").match(/^(?:rgba?)\(((?:\d+\.)?\d+%?),((?:\d+\.)?\d+%?),((?:\d+\.)?\d+%?)(?:,((:?\d*\.)?\d+))?\)$/),f)?(h=f[4],{r:u(f[1],255,!0),g:u(f[2],255,!0),b:u(f[3],255,!0),a:h?u(h,1):1}):s(e):null}function u(n,t,i){var r=parseFloat(n);return isNaN(r)?0:(r=n.indexOf("%")>=0?Math.max(0,Math.min(100,r))*t/100:Math.max(0,Math.min(t,r)),i?Math.round(r):+(Math.round(r+"e+2")+"e-2"))}function a(n,t,r){if(isNaN(n)&&typeof n=="object"&&n!=null){var u=n;n=u.r;t=u.g;r=u.b}return i(n)&&i(t)&&i(r)?Math.min(255,Math.round(n*.299+t*.587+r*.114)):255}function v(n,t,r,u){var f,e;if(arguments.length==1&&typeof n=="object"&&n!=null&&(f=n,n=f.r,t=f.g,r=f.b,u=f.a),i(n)&&i(t)&&i(r)){if(n=Math.round(n),t=Math.round(t),r=Math.round(r),u===undefined||u==1)return h(n<<16|t<<8|r);if(e=parseFloat(u)||parseInt(u),!isNaN(e)&&u>=0&&u<1)return"rgba("+[n,t,r,u].join(",")+")"}return null}function i(n){return!isNaN(n)&&n!=null&&(typeof n!="string"||n.replace(o,"").length)&&n>=0&&n<=255}function y(n){var t=null;return typeof n=="number"&&n>=0&&n<e&&(t=h(n)),t}function h(n){return"#"+(e|n).toString(16).slice(1)}function p(n,t){var i=c(f(n)),r=c(f(t)),u=i>r?i/r:r/i;return u>=4.5}function c(n){var t=[n.r,n.g,n.b].map(function(n){return n/=255,n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)});return t[0]*.2126+t[1]*.7152+t[2]*.0722+.05}var r,e=16777216,o=/\s+/g;return{parseColor:f,formatColor:v,grayScale:a,rgbNumberToCssHexColor:y,isContrastAcceptable:p}});define("serviceuihelper",["window","document","evaluate","serviceUIVersion","mediator","asimovHelper","errorCategory"],function(n,t,i,r,u,f,e){function tu(n){rt=n}function iu(){o.CanExitSettingsMode&&s(ui,null)}function ru(t,i){function r(){var n=l(kt),t=JSON.tryParse(n);i(t)}if(n.removeEventListener(nt,r),typeof i=="function"){if(!o.CanGetAuthToken||!t||typeof t!="object"){i();return}n.addEventListener(nt,r);s(fi,t)}}function uu(n,t,i){if(n=n||10,i=i||dr,o.CanSearchApps&&typeof t=="function"){p[i]=t;var r={requestId:i,arguments:{sort:[{property:"displayName"}],maxResults:n}};return s(li,r),!0}}function fu(n,t,i){if(n=n||10,i=i||nu,o.CanSearchApps&&typeof t=="function"){p[i]=t;var r={requestId:i,arguments:{sort:[{property:"mostFrequentlyUsed"}],maxResults:n}};return s(li,r),!0}}function eu(n,t,i){if(i=i||bi,o.CanSearchApps&&typeof t=="function"){p[i]=t;var r={requestId:i,arguments:{filter:[{filterName:"toast"}]}};return s(pr,r),!0}return!1}function et(){return c()&&+(h.experienceDisplayedMask||0)}function ou(){return c()&&h.partnerSearchCode}function su(){return c()&&h.enableRegulatoryPsm}function hu(){return c()&&h.enableCPsm}function cu(){return c()&&h.ntpWebIG}function lu(t,i){if("function"==typeof t){b=t;n.removeEventListener(w,st);v&&n.addEventListener(w,st);var r=ot();r!==!1?rr(r):wi=setTimeout(function(){n.removeEventListener(w,st);g(null,null,e.readingListTimeoutError);b([])},i||2e3)}}function au(){return typeof it!="undefined"||ot()?it:0}function vu(){return c()&&h.accentColor}function yu(){return!o.CanHideOrShowSearchHistory||c()&&h.showSearchHistory}function pu(n){return(n||o.CanRenderHtmlHeader)&&(c()||{}).isDHPAddressBarPinned}function wu(n){return(n||o.CanRenderHtmlHeader)&&(c()||{}).isNTPAddressBarPinned}function bu(){return o.CanRenderHtmlHeader&&(c()||{}).isDHPShiftFocusSetToWebContent}function ku(){return o.CanRenderHtmlHeader&&(c()||{}).isNTPShiftFocusSetToWebContent}function du(){return c()&&h.diagnosticsLevel==="0"}function gu(n,t){if(o.CanInstallApp&&n&&(n.pfn||n.bigCatId)){f.isValidCV(t)||(t=f.generateCV());var r,i={};i.getFreeEntitlement=!0;o.CanOmitCorrelationVector||(i.correlationVector=t);o.CanInstallAppWithBigCatId?i.bigCatId=r=n.bigCatId:i.appId=r=n.pfn;r&&(er({pid:r,state:a.Pending}),s(lr,i))}}function nf(){s(si)}function tf(){o.CanHideOrShowFrequents&&s(ar,{page:"advanced",section:"privacy"})}function gi(n){var t=JSON.tryParse(n);return t&&t.adId||""}function rf(t){if(o.TH2Features&&"function"==typeof t){var i=l(tt);i==="null"?(n.addEventListener(ht,function(){var n=gi(l(tt));t(n)}),s(ri,null)):setImmediate(function(){var n=gi(i);t(n)})}}function uf(n){s(ci,{storeId:n})}function ff(n){s(wr,{displayOption:n})}function ef(n){n&~k.BothDisplayed||(n===k.None||n===k.BothDisplayed?or(n):or(et()|n))}function of(n){s(ai,n)}function sf(n){rt&&!o.OneBoxPinnedByDefault&&(u.pub(n?pt:wt),s(n?yi:ei,null))}function hf(n,t,i){(o.CanRenderHtmlHeader||i)&&(s(vr,{pinState:n}),s(vi,{setFocus:t}))}function cf(n,t){s(kr,{arguments:{hideTextOnStartPage:n,hideTextOnNewTabPage:t}})}function lf(n){o.CanRenderHtmlHeader&&s(vi,{setFocus:n})}function af(){s(pi,null)}function vf(){n.removeEventListener(lt,sr);n.removeEventListener(at,ur);n.removeEventListener(vt,fr)}function yf(n){if(!n)return!1;var t=c();return t&&t.ntpWebIG?(n.sitePage=n.sitePage||{},n.sitePage.flightid=t.ntpFlightId,require(["pageInstance"],function(n){n.setActivityId(t.ntpWebIG)}),!0):!1}function nr(n){if(o.CanGetOneBoxPosition){if(!n&&ut)return ut;var i,t=l(oi),r=JSON.tryParse(t);return i=r&&r.addressBarPosition?r.addressBarPosition:y(t)?t.indexOf(ki)>0?ki:t.indexOf(ft)>0?ft:"":c()&&h.addressBarPosition,ut=i,i}}function tr(n){return ft===nr(n)}function ir(n){if(o.CanGetOneBoxPosition&&rt){var i=tr(!0),r=t.querySelector("body"),u=!!t.body.className.match("htmlheader");r&&r.classList.toggle("obshown",i);pf(n,i,u)}}function pf(n,t,i){n&&n.isOnDomLoad&&t?d={isOnPage:t,timeStamp:new Date}:d&&i&&!di&&t!==d.isOnPage&&new Date-d.timeStamp<5e3&&(g(null,null,e.doubleSearchBoxesRenderedError),di=!0)}function l(n){return v&&v.getCachedFrameMessage(n)}function c(){if(!h||!h.ntpWebIG){var n=l(gt);y(n)&&(h=i(n))}return h}function ot(){var n,t=l(ni);return y(t)?(n=wf(t),it=n.length,n):!1}function st(){rr(ot()||[])}function rr(n){clearTimeout(wi);b&&b(n)}function wf(n){return(y(n)&&i(n)||{}).results||[]}function s(n,t){v&&v.postFrameMessage(n,t&&JSON.stringify(t))}function bf(){var s=r>=4,f=r>=5,n=r>=8,e=r==9,u=r>=9,i=r>=10,t=r>=11,o=r>=12,h=r>=14;return{CanExitSettingsMode:!t,CanGetAuthToken:t,CanGetOneBoxPosition:n,CanHideOrShowFrequents:i,CanHideOrShowSearchHistory:i,CanInstallApp:n,CanInstallAppWithBigCatId:u,CanOmitCorrelationVector:e,CanPinOneBox:n,CanRenderHtmlHeader:n,CanSearchApps:n,CanSetContentDefaultDisplayOption:!t,CanShowToolTips:n,CanUseFrameAddressBox:u,GroupPolicy:i,GroupPolicyRS4:o,OneBoxPinnedByDefault:t,TH2Features:f,TopSiteStorage:n}}function y(n){return n&&n!=="null"}function kf(){return!o.CanHideOrShowFrequents||c()&&(h.showFrequentTopSites===undefined||+h.showFrequentTopSites)}function df(n,t,i){if(t&&i){var r={requestId:gr,arguments:{url:t,title:n||"Web page",target:yr,icon:i,additionalParams:""}};s(hi,r,t)}}function gf(){var n=JSON.tryParse(l(ti));n&&u.pub(cr,n.showFrequentTopSites)}function ne(){var n=JSON.tryParse(l(ii));n&&u.pub(bt,n.showSearchHistory)}function ur(n){var t=JSON.tryParse(n.data),i;t&&(i=p[t.requestId],i&&i(t.results))}function fr(n){var t=JSON.tryParse(n.data),r=t&&t.results||[],i=p[t.requestId||bi];i&&i(r)}function te(n){var t=JSON.tryParse(n.data),u;if(t){var f=t.state,r=f&&(a[f]||f.match(/^Paused/)&&a.Paused),i=t.errorCode;i!=null&&(i="0x"+(i<0?i+4294967296:i).toString(16));u={pid:t.appId||t.bigCatId,complete:!1,errorCode:i,progress:t.progress,state:r,success:!1};(r===a.Completed||r===a.Error||r===a.Canceled)&&(u.complete=!0,u.success=r===a.Completed);er(u)}}function er(n){u.pub(yt,n)}function or(n){n!=et()&&s(br,{experienceDisplayedMask:n})}function sr(){var n=l(dt),t;y(n)&&(g(n),t=JSON.tryParse(n),t||g(n,"error parsing json of trackAppErrorEvent "))}function g(n,t,i){require(["track","c.pageComplete"],function(r){var u,f;i?u=i:(f=e.serviceUIError,u={errId:f.errId,errMsg:f.errMsg+(t||"")+n,errSource:" serviceUIHelper.js"});r.trackAppErrorEvent(u)})}function ie(){v&&n.addEventListener(ct,re);s(hr,null)}function re(){var t=l(ct);if(y(t)){var n=JSON.tryParse(t),r=o.GroupPolicyRS4?!n.result.IsStoreBlocked&&!n.result.IsEnterpriseStoreEnabled:!n.IsStoreBlocked&&!n.IsEnterpriseStoreEnabled,i=n?r:!1;o.CanInstallApp=i&&o.CanInstallApp;o.IsStoreEnabled=i}}var ht="adIdAvailable",ct="apps.queryInstallPolicy-completed",hr="apps.queryInstallPolicy",lt="erroravailable",w="readinglistavailable",at="apps.search.completed",vt="apps.notifications.search.completed",nt="tokenresponseavailable",yt="appinstallprogress",pt="oneboxdisplayed",wt="oneboxhidden",cr="changeFrequentsVisibility",bt="changeSearchHistoryVisibility",tt="adId",kt="tokenResponse",dt="error",gt="machineState",ni="readingList",ti="showFrequentTopSites",ii="showSearchHistory",ri="queryAdId",ui="exitSettingsMode",fi="getTokenAsync",ei="htmlScrolledDown",lr="installApp",oi="addressBarPosition",si="openReadingList",ar="browserSettings.open",vr="pinAddressBar",hi="shell.pinWebsite",yr="taskbar",ci="removeReadingListItem",li="apps.search",pr="apps.notifications.search",wr="setDisplayOption",br="setExperienceDisplayedMask",ai="setFlightInstrumentationData",kr="frameAddressBox.setPlaceholderTextSetting",vi="shiftFocusToWebContent",yi="htmlScrolledToTop",pi="showServiceUI",b,h,it,wi,v=n.ServiceUIFrameContext,rt=!0,ut,p={},dr="b1bb5de7-499a-4fac-bb49-1d549755537a",gr="2c0b1726-032a-4e32-b500-fa55d8c8c8b7",nu="626d5907-30f5-4297-9130-e8d320e215f2",bi="7c347177-549c-438d-9dca-3fb9e065bcc1",ki="frame",ft="page",k={None:0,DhpDisplayed:1,NtpDisplayed:2,BothDisplayed:3},a={AcquiringLicense:1,Canceled:2,Completed:3,Downloading:4,Error:5,Installing:6,Paused:7,Pending:8,RestoringData:9,Starting:10},d,di=!1,o=bf();return o.GroupPolicy&&ie(),n.addEventListener(lt,sr),o.CanInstallApp&&n.addEventListener("appinstallstatuschanged",te),o.CanHideOrShowFrequents&&n.addEventListener("browserSettings.showFrequentTopSitesChanged",gf),o.CanGetOneBoxPosition&&n.addEventListener("addressbarpositionchanged",ir),o.CanSearchApps&&(n.addEventListener(at,ur),n.addEventListener(vt,fr)),o.CanHideOrShowSearchHistory&&n.addEventListener("browserSettings.showSearchHistoryChanged",ne),{cacheKeys:{adCacheKey:tt,authTokenCacheKey:kt,errorCacheKey:dt,machineStateCacheKey:gt,readingListCacheKey:ni,showFrequentTopSitesCacheKey:ti,showSearchHistoryCacheKey:ii},constants:{appInstallState:a,experienceDisplayedValues:k},events:{appInstallProgress:yt,oneBoxDisplayed:pt,oneBoxHidden:wt,changeSearchHistoryVisibility:bt},messages:{adIdAvailableMessage:ht,adIdPostMessage:ri,exitSettingsModeMessage:ui,getTokenPostMessage:fi,hideOneBoxPostMessage:ei,oneBoxPositionMessage:oi,openReadingListPostMessage:si,pinToTaskbarPostMessage:hi,readingListAvailableMessage:w,removeReadingListItemPostMessage:ci,setFlightInstrumentationDataMessage:ai,showOneBoxPostMessage:yi,showServiceUiMessage:pi,tokenAvailableMessage:nt},features:o,enableOneBoxAnimation:tu,exitSettingsMode:iu,getAuthTokenAsync:ru,getExperienceDisplayed:et,getPartnerSearchCode:ou,isEnableRegulatoryPsm:su,isEnableCpsm:hu,getMfuApps:fu,getNtpWebIG:cu,getPinnedApps:uu,getReadingListAsync:lu,getReadingListCount:au,getToastNotifications:eu,getWindowsAccentColor:vu,isEnterpriseMode:du,installApp:gu,openReadingList:nf,openEdgeSettingsPane:tf,pinTopSiteToTaskbarAsync:df,queryAdIdAsync:rf,removeFromReadingList:uf,setDisplayOption:ff,setExperienceDisplayed:ef,setFlightInstrumentationData:of,setFrameAddressBoxPlaceHolderText:cf,showFrequents:kf,showOneBox:sf,showServiceUi:af,tearDown:vf,tryUpdateTelemetryFields:yf,pinOneBox:hf,showSearchHistory:yu,isDhpOneBoxPinned:pu,isNtpOneBoxPinned:wu,updateOneBoxPositionClass:ir,getOneBoxPosition:nr,shiftFocusToWeb:lf,isDhpShiftFocusSetToWebContent:bu,isNtpShiftFocusSetToWebContent:ku,oneBoxIsShown:tr}});define("serviceUIVersion",["navigator","navigation","location"],function(n,t,i){var f,e=t.getParamsFromUrl(i.href),u,o,r;return e.suiv&&(u=parseInt(e.suiv,10),u)?u:(n&&n.userAgent&&(o=n.userAgent,r=o.match(/serviceui[/\s]*(\d+)*\.?\d*/i),r&&r.length&&(f=parseInt(r[1],10)||1)),f||-1)});define("browserAccess",["serviceUIComm","serviceUIVersion","colorHelper","appHelper","promise"],function(n,t,i,r,u){function s(){var u=t>=4,r=t>=5,n=t>=8,c=t===9,l=t>=9,o=t>=10,f=t>=11,s=t>=12,h=t>=13,i=t>=14,e=t===12||t===13;return{ServiceUIAvailable:t>0,CanGetAppInstalledState:u,CanLaunchApp:u,CanLaunchAppWithPfnOrAumId:n,LaunchAppWithUri:o&&!i,CanMapUrlsToAppIds:n,PersistentStorage:r,CanQueryFavIcons:r,ServiceTabs:n,TH2Features:r,TopSiteStorage:n,CanFetchTabContext:f,UserInfoSettings:s,UnifiedCookieJar:f,CanGetTabId:h,CanGetPersonalizationData:i,CanGetUserInputId:i,NavigateApiEnabled:n&&!e,CanGetLocation:i,AppCacheForceRefreshFromServer:e}}function o(){return t>0}function h(){n.sendMessage({messageName:"showServiceUI"})}function c(){return f.CanGetPersonalizationData?new u(function(t,i){require(["browserState"],function(r){if(r.getIsHostIsolationEnforced()){i("Unable to get personalization data when host isolation is enabled.");return}n.getObjectAsync({cacheKey:"personalizationData",eventName:"personalizationData.get-completed",messageName:"personalizationData.get",checkCacheBeforeMessage:!1}).then(function(n){t(n.results&&n.results.length?n.results[0]:null)},function(n){i(n)})})}):u.reject("Personalization data is not available.")}function l(){return f.TopSiteStorage?new u(function(t,i){n.getObjectAsync({cacheKey:"getTopSites",eventName:"topsitesavailable",messageName:"getTopSites",checkCacheBeforeMessage:!1}).then(function(n){t(n.results||[])},function(n){i(n)})}):u.reject("Top sites storage feature is not supported.")}function a(t){if(!f.TopSiteStorage)throw"Top sites storage feature is not supported.";n.sendMessage({messageName:"setTopSites",userArguments:{topsites:t}})}function v(){if(!f.TopSiteStorage)throw"Top sites storage feature is not supported.";n.sendMessage({messageName:"clearTopSites"})}function y(t){return(t=t||[],!f.CanQueryFavIcons)?u.reject("Querying favicons not supported."):t.length?new u(function(r,u){for(var f={},o=0,h=t.length;o<h;o++){var s=t[o],c=s,e=s.replace(/^(https?:\/\/)?(www\.)?/,"");["http://"+e,"http://www."+e,"https://"+e,"https://www."+e].forEach(function(n){var t=f[n]||(f[n]=[]);t.push(c)})}n.getObjectAsync({cacheKey:"favIcons",eventName:"faviconsavailable",messageName:"queryFavIcons",userArguments:{webSiteUrls:Object.keys(f)},checkCacheBeforeMessage:!1,enforceSerialCalls:!0}).then(function(n){for(var t,s,o=n.results||[],u={},e=0,h=o.length;e<h;e++)t=o[e],s=f[t.webSiteUrl],s.forEach(function(n){var r=u[n],f;r&&(r.icon||!t.favIconBase64)||(f={siteUrl:n,icon:t.favIconBase64,background:i.rgbNumberToCssHexColor(t.favIconBackgroundColor),backgroundFromAlgo:!0},u[n]=f)});r(u)},function(n){u(n)})}):u.resolve({})}function p(t){return(t=t||[],!f.CanMapUrlsToAppIds)?u.reject("Mapping URLs to app IDs is not supported."):t.length?new u(function(i,r){n.getObjectAsync({cacheKey:"appIdMapping",eventName:"appidmappingavailable",messageName:"queryAppIdMapping",userArguments:{webSiteUrls:t},checkCacheBeforeMessage:!1,enforceSerialCalls:!0}).then(function(n){for(var t,u=n.results||[],f={},r=0,e=u.length;r<e;r++)t=u[r],t.status==="Mapped"&&(f[t.webSiteUrl]={hasAddOns:t.hasAddOns,isFree:t.isFree,packageFamilyName:t.packageFamilyName,productId:t.productId,title:t.title});i(f)},function(n){r(n)})}):u.resolve({})}function w(t){if(!f.ServiceUIAvailable)throw"Cannot remove site. Service UI not supported.";n.sendMessage({messageName:"removeFrequent",userArguments:{url:t}})}function b(t){if(!f.CanLaunchApp)throw"Launching apps is not supported.";var i=r.tryParseAppId(t);if(t=i.aumId?i.aumId:f.CanLaunchAppWithPfnOrAumId&&i.pfn?i.pfn:"",t)n.sendMessage({messageName:"launchApp",userArguments:{appId:t}});else throw"Unable to launch app. Unrecognized APP ID format: "+t;}function k(t){if(!f.CanGetAppInstalledState)return u.reject("Getting app install state is not supported.");var i=r.filterAppIdsForAppInstallStateCheck(t,f.CanLaunchAppWithPfnOrAumId);return i&&i.length?new u(function(t,r){n.getObjectAsync({cacheKey:"apps",eventName:"appsavailable",messageName:"queryApps",userArguments:{appIds:i},checkCacheBeforeMessage:!1,enforceSerialCalls:!0}).then(function(n){t(n.results||[])},function(n){r(n)})}):u.resolve(null)}function d(t){return new u(function(r,u){n.getObjectAsync({cacheKey:"localResults",eventName:"localresultsavailable",checkCacheBeforeMessage:!0}).then(function(n){var u,o,s;if(n===null){r(null);return}for(var f=[],e=n&&n.results,c=e&&e.length,h=0;h<c&&f.length<t;)u=e[h++],u&&u.type==="frequent"&&u.url&&(o=null,u.iconUri&&(o=(u.iconUri.indexOf(":")<0?"data:image/png;base64,":"")+u.iconUri),s=i.rgbNumberToCssHexColor(u.tileColor),f.push({appId:u.appId,background:s,backgroundFromAlgo:!!s,icon:o,title:u.title,siteUrl:u.url}));r(f)},function(n){u(n)})})}function g(){return f.CanFetchTabContext?nt("tabContext.get-completed","tabContext.get"):u.reject("tab context feature is not supported.")}function nt(t,i,r){return new u(function(u,f){n.getObjectAsync({eventName:t,messageName:i,checkCacheBeforeMessage:!1,resultAvailableInEvent:!0,userArguments:r}).then(function(n){u(n||[])},function(n){f(n)})})}function tt(){return f.UserInfoSettings?new u(function(t,i){n.getObjectAsync({eventName:"userInfo.primaryUser.get-completed",messageName:"userInfo.primaryUser.get",checkCacheBeforeMessage:!1,resultAvailableInEvent:!0,timeoutMs:1e4}).then(function(n){t(n)},function(n){i(n)})}):u.reject("Getting user settings is not supported.")}function it(){return f.PersistentStorage?new u(function(t,i){n.getObjectAsync({cacheKey:"pageSettings",eventName:"settingsavailable",messageName:"fetchPageSettings",checkCacheBeforeMessage:!1}).then(function(n){t(JSON.tryParse(n&&n.results))},function(n){i(n)})}):u.reject("Persistent storage is not available.")}function rt(t){if(!f.PersistentStorage)throw"Persistent storage is not available.";n.sendMessage({messageName:"writePageSettings",userArguments:t})}function ut(t,i){if(f.LaunchAppWithUri&&t&&i){var r={arguments:{uri:t,pfn:i}};n.sendMessage({messageName:"apps.launchUri",userArguments:r})}}function ft(){return new u(function(t,i){if(!f.CanGetTabId){i("Getting tab ID is not supported in this ServiceUI version.");return}n.getObjectAsync({cacheKey:"shellTabId",eventName:"shelltabidavailable",checkCacheBeforeMessage:!0,timeoutMs:500}).then(function(n){t(n.result.ShellTabId||[])},function(n){console.log(n);i(n)})})}function et(){return new u(function(t,i){if(!f.CanGetTabId){i("Getting tab group ID is not supported in this ServiceUI version.");return}n.getObjectAsync({cacheKey:"shellTabGroupId",eventName:"shelltabgroupidavailable",checkCacheBeforeMessage:!0,timeoutMs:500}).then(function(n){t(n.result.ShellTabGroupId||[])},function(n){i(n)})})}function ot(){return new u(function(t,i){if(!f.CanGetLocation){i("Getting location is not supported in this ServiceUI version.");return}n.getObjectAsync({cacheKey:"location",eventName:"locationavailable",checkCacheBeforeMessage:!0,timeoutMs:500}).then(function(n){t(n)},function(n){i(n)})})}function st(){return new u(function(t,i){if(!f.CanGetUserInputId){i("Getting user input ID is not supported in this ServiceUI version.");return}n.getObjectAsync({cacheKey:"userInputId",eventName:"uidavailable",checkCacheBeforeMessage:!0,timeoutMs:500}).then(function(n){t(n.result.uid||[])},function(n){i(n)})})}function ht(t,i,r,u){if(o()&&f.NavigateApiEnabled&&typeof t=="string"&&t.length){r&&r.preventDefault();var s={targetUrl:t,navigationType:i||e.currentTab};n.sendMessage({messageName:"navigate",userArguments:s})}else u&&(e.backgroundTab||e.newTab||e.newWindow)&&u.setAttribute("target","_blank")}function ct(){n.sendMessage({messageName:"firstRunExperience.rendered"})}function lt(t){if(f.UnifiedCookieJar)throw"Should not be called if there is unified cookie jar support.";n.sendMessage({messageName:"setMuidForTabs",userArguments:t})}function at(t){if(!t||!t.RequestId||!t.Resource)return u.reject("Invalid request parameter.");var i={requestId:t.RequestId,silentMode:!0,scope:t.Scope,resourceId:t.Resource};return n.getObjectAsync({cacheKey:"tokenResponse",eventName:"tokenresponseavailable",messageName:"getTokenAsync",checkCacheBeforeMessage:!1,resultAvailableInEvent:!1,enforceSerialCalls:!0,timeoutMs:0,userArguments:i})}function vt(t){if(!t||!t.AccountId||!t.RequestId||!t.Resource)return u.reject("Invalid request paramater.");var i={requestId:new String(t.RequestId),action:"GetTokenForAccountSilently",arguments:{providerType:"AAD",aadProviderId:"https://login.windows.net/",accountId:t.AccountId,aadScope:t.Scope,aadResource:t.Resource}};return n.getObjectAsync({eventName:"auth.webAccountManagerRequest-completed",messageName:"auth.webAccountManagerRequest",checkCacheBeforeMessage:!1,resultAvailableInEvent:!0,enforceSerialCalls:!0,timeoutMs:0,userArguments:i})}function yt(t){if(!t||!t.RequestId||!t.Resource)return u.reject("Invalid request paramater.");var i=JSON.stringify({requestId:new String(t.RequestId),action:"GetTokenForPrimaryAccount",arguments:{aadScope:t.Scope,aadResource:t.Resource}});return n.invokeMethodAsync({eventName:"auth.webAccountManagerRequest-completed",methodName:"showAuthDialog",resultAvailableInEvent:!0,timeoutMs:0,userArguments:[i]})}var f=s(),e={backgroundTab:"bgTab",currentTab:"currentTab",newTab:"newTab",newWindow:"newWindow",none:"none"};return{features:f,navigationTypes:e,isServiceUiAvailable:o,showServiceUI:h,getTopSitesAsync:l,setTopSites:a,clearTopSites:v,getFavIconsAsync:y,getAppIdMappingAsync:p,removeFrequentSite:w,launchApp:b,getAppInstalledStateAsync:k,getFrequentSitesAsync:d,getTabContextAsync:g,fetchPageSettingsAsync:it,writePageSettings:rt,getUserSettingsAsync:tt,launchAppWithUri:ut,navigate:ht,setWindowFreRendered:ct,getShellTabIdAsync:ft,getShellTabGroupIdAsync:et,getUserInputIdAsync:st,setMuidForTabs:lt,getPersonalizationDataAsync:c,getTokenAsync:at,getTokenForAadAccountAsync:vt,showAuthDialogAsync:yt,getLocationAsync:ot}});require(["serviceUIVersion","serviceUIComm"],function(n,t){n>0?t.getObjectAsync({cacheKey:"machineState",checkCacheBeforeMessage:!0}).then(function(n){define("machineState",n)},function(n){console.error("Getting machine state from ServiceUI failed: "+n)}):define("machineState",{})});define("browserState",["machineState"],function(n){function i(){return+n.newTabPageDisplayOption}function r(){return n.lang}function u(){return n.market}function t(){var t=n.experiments;return t&&t.features}function f(n){var u,i=t(),f,r;if(i&&i.length)for(f=i.length,r=0;r<f;r++)if(i[r].id===n){u=i[r];break}return u}function e(){return n.showContextCardsDefault}function o(){return n.thirdPartySearchProvider}function s(){return n.isHostIsolationEnforced}function h(){return n.isLightTheme}return{constants:{displayOptionValues:{TopSitesAndSuggestedContent:0,TopSitesOnly:1,BlankPage:2}},getDisplayOption:i,getMachineOsLanguage:r,getMachineOsMarket:u,getEdgeExperiment:f,getEdgeExperiments:t,getShowContextCardsDefault:e,getThirdPartySearchProvider:o,getIsHostIsolationEnforced:s,getIsLightTheme:h}});require(["mediator","localStorage"],function(n,t){function r(n){var r=new Date,u=r.getTime();t.setItem(i,JSON.stringify({time:u,data:n?n:"2"}))}var i="fpr";n.sub("forcePageReload",r)});define("spartanJQueryLoader",["document","staticsLoaderHelper"],function(n,t){return function(){if(!define.is("jquery")){var r=n.getElementsByTagName("head")[0],i=r.getAttribute("data-jquery");if(!i){console.error("Could not find jQuery URL on head tag.");return}t.loadJs(i)}}});define("ttaf",["window","perfMarker"],function(n,t){function r(){if(!i){var r="TTAF";t(r,!0);n.windowsPerfMarker(r);n.windowsPerfMarker("TTPR2");i=!0}}var i=!1;return r});define("aadAuthentication",["window","browserAccess","headData"],function(n,t,i){return function(){i=i||{};n.setTimeout(function(){t.getUserSettingsAsync().then(function(n){i.aadState=n.result.accountType==="ad"||n.result.accountType==="aad"?!0:!1},function(){i.aadState=!1})},1e3)}});require(["aadAuthentication","c.pageComplete"],function(n){n()});define("delayLoadModules",["document","riverLoader"],function(n,t){var i="delayloadedcontent";return function(){return t.loadAsync().then(function(r){var u=n.getElementById(i);u.insertBefore(r,u.firstChild);t.performPostAttachActionsAsync()})}});define("serviceUIComm",["window","promise","errorCategory"],function(n,t,i){function p(n){return!n||!n.cacheKey&&!n.resultAvailableInEvent?t.reject("cacheKey property is required."):!n.eventName&&!n.checkCacheBeforeMessage?t.reject("eventName property is required when not checking cache."):n.enforceSerialCalls&&!n.messageName?t.reject("messageName property is required when enforceSerialCalls is enabled."):b(n).then(function(i){if(i)return i;var r=l(n);return t.race([c(r),k(r)])})}function o(n){var t=null;n.userArguments&&(t=JSON.stringify(n.userArguments));u.postFrameMessage(n.messageName,t)}function w(n){var r=n.methodName,i,f;return r?n.messageName?t.reject("messageName property should not be present in requestArguments when calling invokeMethodAsync."):n.enforceSerialCalls?t.reject("Serial execution is not supported."):(i=u[r],!i)?t.reject("serviceUICommDirect: method not supported : "+r):n.eventName?(f=l(n),t.race([c(f),d(f,i)])):new t(function(t){var r=i.apply(null,n.userArguments);t(r)}):t.reject("methodName property is required when calling invokeMethodAsync.")}function b(n){return new t(function(t,i){if(n.checkCacheBeforeMessage||!n.messageName){var r=v(n);if(r){t(r);return}if(!n.eventName){i("Item was not found in the frame message cache.");return}}t()})}function c(i){return new t(function(t,u){var e=i.timeoutMs<=0?0:i.timeoutMs||y;i.timeoutId=e&&n.setTimeout(function(){var t=r.indexOf(i),n;t>=0&&r.splice(t,1);n="Timed out waiting for event "+i.eventName;u(n);s(n);i.isSerial&&f(i.requestKey)},e)})}function l(t){return{eventName:t.eventName,messageName:t.messageName,requestKey:t.methodName||t.messageName,userArguments:t.userArguments,isSerial:t.enforceSerialCalls,timeoutMs:t.timeoutMs,successCallback:function(i){n.clearTimeout(this.timeoutId);var r=t.resultAvailableInEvent?rt(t,i):v(t);r?this.resolve(r):this.reject("Result was not found in the "+(t.resultAvailableInEvent?"message cache":"callback event."))},errorCallback:function(t){n.clearTimeout(this.timeoutId);this.reject(t)}}}function k(n){return new t(function(t,i){n.resolve=t;n.reject=i;var u=!e(n.requestKey);r.push(n);a(n);g(n,u)})}function d(n,i){return new t(function(t,u){n.resolve=t;n.reject=u;r.push(n);a(n);i.apply(null,n.userArguments)})}function a(n){h.indexOf(n.eventName)<0&&(n.isSerial?it(n.eventName,n.requestKey):tt(n.eventName),h.push(n.eventName))}function g(n,t){n.messageName&&(n.isSerial?t&&f(n.requestKey):o(n))}function nt(n){var t=u.getCachedFrameMessage(n);return JSON.tryParse(t)}function tt(t){n.addEventListener(t,function(n){for(var u,i=r.length-1;i>=0;i--)u=r[i],u.eventName===t&&(u.successCallback(n),r.splice(i,1))})}function it(t,i){n.addEventListener(t,function(n){var t=e(i,!0);t&&(t.successCallback(n),f(i))})}function f(n){var t=e(n);t&&o(t)}function e(n,t){for(var u,i=0;i<r.length;i++)if(u=r[i],u.requestKey===n)return t&&r.splice(i,1),u;return null}function v(n){var t=nt(n.cacheKey);return t?t:null}function rt(n,t){var i=t&&JSON.tryParse(t.data);return i?i:null}function ut(){var i=u.getCachedFrameMessage("error"),o=JSON.tryParse(i),t,n;if(o){for(s(i),t=r.length-1;t>=0;t--)if(n=r[t],n.messageName===o.message&&(n.isSerial?(n=e(n.requestKey,!0),f(n.requestKey)):r.splice(t,1),n.errorCallback(o.errorMessage),n.isSerial))break}else s(i,"Could not parse error message as JSON.")}function s(n,t){require(["track","c.pageComplete"],function(r){var u=i.serviceUIError,f={errId:u.errId,errMsg:u.errMsg+(t||"")+n,errSource:u.errSource};r.trackAppErrorEvent(f)})}var u=n.ServiceUIFrameContext,y=5e3,r=[],h=[];return n.addEventListener("erroravailable",ut),{invokeMethodAsync:w,getObjectAsync:p,sendMessage:o}});define("showServiceUi",["serviceuihelper","c.headerReady"],function(n){function t(t){require([t],function(){i||(n.showServiceUi(),i=!0)})}function r(){t("c.riverSection");t("c.topSitesReady");t("c.pageComplete")}var i=!1;return{setup:r}});define("toolTips",["window","document","serviceuihelper","positionHelper","remToPixel","dir.tokens"],function(n,t,i,r,u,f){function tt(){if(!i.features.CanShowToolTips){n.addEventListener(d,it);return}}function it(t){for(h(),s=t.target,o=0;s&&!o;)o=s.getAttribute&&s.getAttribute("title"),s=s.parentNode;o&&(n.addEventListener(a,l),n.addEventListener(v,w),l(t))}function l(n){var t=r.getEventMousePosition(n);clearTimeout(c);c=setTimeout(function(){rt(t)},g)}function w(){h()}function rt(i){var a;if(b(),o){e||(e=t.createElement("p"),e.id="tooltip",t.body.appendChild(e));e.innerText=o.substr(0,k);e.className="tooltip-open";var f=n.pageXOffset,l=f+n.innerWidth,s=e.offsetWidth,r=i.x-s/2;r+s>l?(r=l-s,!p&&r<f&&(r=f)):r<f&&(r=f,p&&r+s>l&&(r=l-s));a=Math.max(i.y-e.offsetHeight-u(2),n.pageYOffset);e.style.left=r+"px";e.style.top=a+"px";c=setTimeout(h,nt);n.addEventListener(y,h)}}function h(){o=null;b();e&&(e.className="")}function b(){clearTimeout(c);n.removeEventListener(a,l);n.removeEventListener(v,w);n.removeEventListener(y,h)}var k=512,a="mousemove",v="mouseout",d="mouseover",y="scroll",g=600,nt=6e3,p=!f.ltr,s,c,o,e;return{initialize:tt}});define("eduSkuHtmlSearchProperties",["serviceuihelper","spartanPageDetectionHelper","location"],function(n,t,i){function o(){var n="";return r&&(n+="PC="+r),f&&(n+=n?"&DAF0=1":"DAF0=1"),e&&(n+=n?"&DAF1=1":"DAF1=1"),n}var r,f,e,u;return t.isDhpPage||t.isNtpPage?(r=n.getPartnerSearchCode(),f=n.isEnableRegulatoryPsm(),e=n.isEnableCpsm()):t.isIeNtpPage&&(u={},i.search.substr(1).split("&").forEach(function(n){var t=n.split("=");t[0]&&(u[t[0].toLowerCase()]=t[1])}),f=parseInt(u.enableregulatorypsm)||0,e=parseInt(u.enablecpsm)||0,r=u.pc),{partnerSearchCode:r,isEnableRegulatoryPsm:f,isEnableCpsm:e,getAsQueryParameterString:o}});define("dynamicSticky",["jquery","window","remToPixel","mediator"],function(n,t,i,r){"use strict";function s(){var i,t,r,h,v,o,l,f;u=[];var a=n(".stick-enabled"),s=0,y=a.length;for(i=0;i<y;i++)(t=a.eq(i),t.is(":visible"))&&(r=t.offset().top,i==0&&(h=e.scrollTop(),r>=h&&(r=r-h)),v=t[0].offsetHeight,l=t.attr("data-stkb"),l&&(o=JSON.tryParse(l)),f=c(t,o,i),o&&o.isOverlay?u.push({isSticky:!1,$holder:t,scrollThresholdPx:r-f,topWhenStickyPx:f}):(u.push({isSticky:!1,$holder:t,scrollThresholdPx:r-s+f,topWhenStickyPx:s-f}),s+=v-f))}function c(n,t,r){var u=0,e,f;return t?(t.cHeightRem?(e=n[0].offsetHeight,u=i(e/10-t.cHeightRem)):t.cTopRem&&(r>0||t.cfe)&&(f=n.attr("data-cTopRem"),u=f?i(f):i(t.cTopRem)),u):u}function f(){l(t.pageYOffset)}function l(n){for(var i=u.length,t=0;t<i;t++)a(u[t],n)}function a(n,t){var u=t>=n.scrollThresholdPx,i;u!==n.isSticky&&(i=n.$holder,u?(i.addClass(o),i.css({top:n.topWhenStickyPx})):(i.removeClass(o),i.css({top:"auto"})),n.isSticky=u,r.pub("stickyChange",{$element:i,isSticky:n.isSticky}))}var e=n(t),u,h="scroll",o="sticky";return{setup:function(){s();f();e.on(h,f);r.sub("headerHeightChange",function(){s();f()})}}});require(["dynamicSticky","c.riverReady"],function(n){n.setup()});define("verifyPageElements",["window","document","track","errorCategory","headData","newsFeedFilterHelper","getCookie","spartanConstants","serviceuihelper","browserState"],function(n,t,i,r,u,f,e,o,s,h){function l(i,r){var u=i&&t.querySelector(i),f=u&&(n.getComputedStyle&&getComputedStyle(u)||u.currentStyle);return f&&(u.offsetWidth===0||u.offsetHeight===0||f.display==="none"||f.visibility==="hidden")?(y(r),null):u}function y(n){var t;switch(n){case a:t=r.domElementExistsButIsNotVisibleForSearch;break;case v:t=r.searchVisibleButUnstyled;break;default:t=w}i.trackAppErrorEvent({errId:t.errId,errMsg:t.errMsg+n,errSource:t.errSource})}function p(){var i,s,n,r,u;c&&(clearInterval(c),c=0,b()&&(i=l("#srchfrm",a),i&&i.offsetWidth<350&&y(v)),l(".riversection-js","River")&&(l(".sip > ul","InfoPane"),s=e(o.cookieNames.contentFilter),n=f.topicsTelemetryValueMapping[s],n=n&&n.toLowerCase(),r=".sd-card-col > div",u=t.querySelector(r),(!n||n==="finance"||n==="sports")&&u&&u.children.length&&l(r,"SD cards")))}function b(){var n=s.features;return n.OneBoxPinnedByDefault?!h.getThirdPartySearchProvider():n.CanRenderHtmlHeader?!!t.body.className.match("htmlheader"):!1}function k(){var n=1e3,t=u.dms||6e3,i=0;c=setInterval(function(){(i+=n)>=t&&p()},Math.min(n,t));require(["c.pageComplete"],p)}var w=r.domElementExistsButIsNotVisible,a="Search",v="UnstyledSearch",c;return{setup:k}});define("bingwebsso.tokens",function(){return{bingSilentSignInUrl:"https://www.bing.com/msa/sso"}});define("bingwebsso",["window","document","headData","getCookie","setCookie","bingwebsso.tokens"],function(n,t,i,r,u,f){function o(o){function w(){define("c.bingsso",1)}function g(){return i.signedin||o&&o.signedIn}var l="1px",a="0",k=.04,s,c,b;if(!n.mscc||n.mscc.hasConsent()){if(!f.bingSilentSignInUrl||i.clientSettings&&i.clientSettings.static_page||r(e)){w();return}s=t.createElement("IFRAME");s.id="bing_websso_frame";s.style.width=l;s.style.height=l;s.style.position="absolute";s.style.visibility="hidden";s.style.left=a;s.style.bottom=a;s.src=f.bingSilentSignInUrl;t.body.appendChild(s);var h=null,v="wl:auth",d="wl:cancel",y=0,p="message";c=function(n){if(n.origin==="https://www.bing.com"){var t=n.data;t&&(t===v||t===d)&&(h=t)}};n.addEventListener(p,c,!1);b=setInterval(function(){h||y>=5?(clearInterval(b),t.body.removeChild(s),n.removeEventListener(p,c),g()&&h!==v||u(e,1,k),w()):y++},1e3)}}var e="bwssoc";return function(){r(e)?o():require(["ssoResult"],o)}});require(["bingwebsso"],function(n){n()});define("contextMenus",["window","document","browserAccess","positionHelper","dir.tokens","track","trackingHelper","domHelper","cookieComplianceHelper"],function(n,t,i,r,u,f,e,o,s){function a(n){return n&&(n.preventDefault(),n.stopPropagation()),!1}function y(){if(l){var n=h.className;h.className=n&&n.replace(g,"");h.innerHTML="";l=!1;setTimeout(function(){var n=h.anchorNode;n&&n.focus()},0)}}function ft(n,i){var u,h,f,r,o,s;if(n&&i){if(typeof i=="string"){n.innerHTML+=i.replace(/<\s*menuitem\s+/gm,"<li ");return}if(typeof i=="object"&&i.nodeType===1)for(u=i.children,h=u&&u.length,f=0;f<h;++f)if(r=u[f],k(r,"li,menuitem:not([hidden])")){var e=t.createElement("li"),c=r.attributes,l=c.length;for(o=0;o<l;o++)s=c[o],e.setAttribute(s.name,s.value);e.innerHTML=r.innerHTML;e.onclick=r.onclick||function(n){return function(){n.click()}}(r);n.appendChild(e)}}}function k(n,t){return n&&ut&&ut.call(n,t)}function ht(n){var s=n.target,c=o.selfOrAncestorWithAttribute(s,p),b=o.getNearestAnchorTag(s),u=c&&c.getAttribute(p)||b&&w,v,nt,ht,y,it,e,i,rt,ut;if(u&&u!==st){if(u===tt)return a(n);var f=t.createElement("ul"),lt=c&&c.hasAttribute(et),k=!lt&&b&&t.getElementById(w);if(k&&ft(f,k.innerHTML),u!==w&&(v=t.getElementById(u),nt=v&&v.innerHTML,nt&&nt.trim().length&&(k&&(f.innerHTML+=ot),ft(f,v))),y=f.getElementsByTagName("li"),it=y&&y.length,!it)return a(n);for(e=0;e<it;++e)(i=y[e],i.setAttribute("tabindex",0),i.onselectstart=function(){return!1},i.innerHTML&&i.innerHTML.replace(/\s+/g,"").length)||(rt=i.getAttribute("label"),rt&&(i.innerHTML=rt),e||(ht=i));return h=h||t.getElementById(d),h||(h=t.body.appendChild(t.createElement("div")),h.setAttribute("tabindex",-1),h.setAttribute("id",d),h.setAttribute(p,tt),h.anchorNode=s),h.innerHTML="",h.appendChild(f),h.className+=g,l=!0,ut=r.getEventMousePosition(n),vt(ut.x,ut.y),h.onclick=h.oncontextmenu=function(n){if(l)return ct(n,s,b)},setTimeout(function(){ht.focus()},0),a(n)}}function ct(n,t,r){var o=n.target,l,u,h,c;k(o,nt)||y();l=o&&o.getAttribute("data-action");switch(l){case"open-in-new-tab":u=rt.backgroundTab;break;case"open-in-new-window":u=rt.newWindow;break;default:return a(n)}if(!r){y();return}return s.grantCookieConsentAndDecorateLink(n,r),i.features.NavigateApiEnabled?(e.addOcidToHref(r.getAttribute("href"),r,n),h=r.getAttribute("href"),f.trackEvent({type:"click",target:r},r,h,u.toLowerCase()),i.navigate(h,u)):(c=r.getAttribute(b),r.setAttribute(b,"_blank"),r.click(),c&&r.setAttribute(b,c)),a(n)}function lt(n){var i=n.target,r=n.keyCode,t;if(l&&i&&i.nodeType===1&&/(9|13|27|32|38|40)/.test(r)&&!/input|textarea/i.test(i.tagName)){if(a(n),k(i,nt))return!1;if(r===27)return y(),!1;if(r===13||r===32)return n.target.click();var u=h.querySelectorAll("li:not(.disabled)"),f=u.length,e=0;for(t=0;t<f;++t)if(u.item(t)===i){e=r===38?--t:++t;break}return u.item(Math.min(f-1,Math.max(0,e))).focus(),!1}}function at(n){if(l){for(var t=n.target;t;){if(t===h)return;t=t.parentNode}y()}}function vt(i,r){var f,e,o,a;if(h){c=c||t.getElementById(it);c||(c=t.body.appendChild(t.createElement("div")),c.setAttribute("id",it));c.innerHTML=h.innerHTML;c.style.display="block";f=c.offsetWidth;e=c.offsetHeight;c.style.display="none";c.innerHTML="";o=n.pageYOffset;a=o+n.innerHeight;r+e>a&&(r-=e,r<o&&(r=Math.max(a-e,o)));var v=!u.ltr,s=n.pageXOffset,l=s+n.innerWidth;(v||i+f>l)&&(i-=f,i<s&&(v?(i+=f,i+f>l&&(i=Math.min(s,l-f))):i=Math.max(s,l-f)));h.style.left=i+"px";h.style.top=r+"px"}}var d="context-menu-container",g=" context-menu-open ",p="contextmenu",et="data-exclude-default-menu",w="default-link-context-menu",nt=".disabled,:disabled",tt="none",ot="<li class='disabled separator'><\/li>",it="context-menu-container-size",st="system",b="target",rt=i.navigationTypes,v=t.documentElement,ut=v.matches||v.msMatchesSelector||v.webkitMatchesSelector||v.mozMatchesSelector||v.oMatchesSelector,h,c,l;return{setup:function(){t.addEventListener("contextmenu",ht);t.addEventListener("keydown",lt);t.addEventListener("mousedown",at);n.addEventListener("blur",y)}}});define("searchBoxWidthAdjust",["jquery","jqBehavior","window","remToPixel"],function(n,t,i,r){function f(n){function t(){n.find("#q").width(u+(n.find(".qc").width()-n.find(".buttons").width()))}return{setup:t,update:t}}var u=r(.2);return t(f)});define("pageComplete",["mediator","displayOptionsHelper","headData","spartanPageDetectionHelper"],function(n,t,i,r){function u(n){if(!f){if(!n){c();return}setTimeout(u,n)}}function c(){f=!0;n.pub("ViewabilityUpdatedEvent");define(h,1)}var e=r.isSomeNtpPage,o="c.topSitesReady",s="c.riverReady",h="c.pageComplete",f=!1;return function(n){var f,r;if(n=n||{},f=i.ispreload?0:1,t.isDisplayOptionSetToBlank()){u(f);return}r=[];n.waitForTopSitesReadyCanary&&e&&r.push(o);n.shouldWaitForRiverReady&&t.shouldRenderRiver()&&r.push(s);require(r,function(){u(f)});u(i.dms||6e3)}});require(["oAuthHelper"],function(n){n.handleResponse()});require(["verifyPageElements"],function(n){n.setup()});require(["showServiceUi"],function(n){n.setup()});require(["displayOptionsHelper","c.dom"],function(n){n.modifyPageBasedOnUserSetting()});define("establishSignedInState",["document","location","headData","serviceuihelper","persistentStorageManager","webStorage","setCookie","getCookie","spartanPageDetectionHelper","mediator","spartanConstants","perfMarker","c.dom"],function(n,t,i,r,u,f,e,o,s,h,c,l){function ht(){if(ut(w)?(et(),st()):ft()?b(it):st(),!r.features.CanGetAuthToken||v&&tt||u.fetchProperty(nt)===0){a();return}b(w);var n=ct;r.getAuthTokenAsync(rt,n)}function ct(n){var t,r,f,s;if(l("wamTokenCallBackCalled",!0),n&&n.RequestId===rt.requestId&&(r=n.Type,typeof r=="string")){if(t=r.toLowerCase()==="msa",u.saveProperty(nt,+t),f=n.Token,t&&f){if(l("wamMsaTokenRetrieved",!0),s=!o(y),h.pub(c.eventNames.wamHasMsaToken),e(y,f,1,undefined,"/spartan/",!0),v||s||!g){d();return}require(["c.headDataUpToDate"],function(){if(tt&&i.signedin){a();return}d()});return}l("wamMsaTokenNotRetrieved",!0)}if(e(y,"",-1,undefined,"/spartan/",!0),g&&v){d();return}a()}function a(){et();ot();define("c.tokenRequestComplete",1)}function ut(n){return f.getItem(n,!0)}function ft(){return ut(p)}function b(n){f.setItem(n,1,!0)}function k(n){f.removeItem(n,!0)}function et(){k(p)}function ot(){k(w)}function st(){k(it)}function d(){if(ft()){require(["track","errorCategory","c.pageComplete"],function(n,t){n.trackAppErrorEvent(t.authRefreshBlockedError)});a();return}ot();b(p);require(["spartanSharedHelper","errorCategory"],function(n,t){n.refreshPage(!1,t.establishSignedInState)})}var g=o("aace"),nt="HasMsa",v=!s.isRiverAjaxLoaded,y="at",tt=i.signedin,p="sign-in-active",w="sign-in-pending",it="sign-in-refreshed-page",rt={requestId:32767,scope:"service::"+t.hostname+"::mbi_ssl"};return ht});require(["establishSignedInState"],function(n){n()});require(["refreshPdpModules","c.sso"],function(n){n()});require(["refreshPdpModules","c.pdp"],function(n){n()});require(["binding","searchBoxWidthAdjust","c.pageComplete"],function(n){n("searchBoxWidthAdjust","#header-search").all()});require(["window","track","serviceuihelper","spartanTrackingHelper"],function(n,t,i,r){var u=i.getNtpWebIG();n.addEventListener("beforeunload",function(){return r.isImpressionSuppressed||t.hasPageViewEventFired()||!t.hasNavigated()&&u||t.trackPage(),null})});require(["serviceuihelper","c.dom"],function(n){n.updateOneBoxPositionClass({isOnDomLoad:!0})});require(["contextMenus","c.dom"],function(n){n.setup()});require(["delayLoadModules"],function(n){n()});require(["toolTips","c.dom"],function(n){n.initialize()});require(["spartanJQueryLoader","c.pageComplete"],function(n){setTimeout(n)});define("cookieComplianceHelper",["window","document","location","mediator","getCookie","setCookie","classList","serviceuihelper","headData","c.dom"],function(n,t,i,r,u,f,e,o,s){function b(){w();c()?p():d()}function k(n,t,i){var r=!1||nt(t);r&&!i&&require(["spartanSharedHelper","errorCategory"],function(n,t){n.refreshPage(!0,t.cookiesAccepted)})}function c(){return!h||!!h.hasConsent()}function p(){e.add(a,v)}function d(){e.remove(a,v)}function g(n,t,i){if(n&&t&&i){var u=t+"=",r=!e.contains(n,"extsource")&&n.getAttribute(y);r&&r.indexOf(u)<0&&(r+=(r.indexOf("?")<0?"?":"&")+u+i,n.setAttribute(y,r))}}function nt(n){if(h){if(tt(),n){var t=h.cookieName,i=u(t);g(n,t,i)}return!0}}function tt(){var n=s&&s.clientSettings;n&&(n.functionalonly_cookie_experience=!1);h&&h.setConsent();w()}function w(){typeof l!="boolean"?l=c():l!==c()&&r.pub("forcePageReload","2")}var l,a=t.getElementById("cc-banner"),v="hide",y="href",h=n.mscc;return{grantCookieConsentAndDecorateLink:k,hasCookieBannerConsent:c,hideCookieBanner:p,hideCookieWallInformationEventName:"hideCookieWall",initialize:b,showCookieWallInformationEventName:"showCookieWall"}});require(["cookieComplianceHelper"],function(n){n.initialize()});require(["topSitesController","c.dom"],function(n){define.is("c.topSites")||(n.initialize(),define("c.topSites",1))});define("topSites.tokens",function(){return{addDialogAppSuggestionTitle:"Add the {0} app to top sites",addDialogAppSuggestionsTitle:"Suggested apps",addDialogSiteSuggestionTitle:"Add the {0} site to top sites",addDialogSiteSuggestionsTitle:"Suggested sites",contextMenuPinTopSite:"Pin",contextMenuUnpinTopSite:"Unpin",defaultIconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrsl7EJADAIBGPIEO4/nVt8SCFkgijhvhCsPNQHNUmjWnM0EBCpdYK7i07cSUTYy+I5ARaz705UuQR34A4ggAACCCCA4LL6qhPGV94JYgswAGXGEhq663zFAAAAAElFTkSuQmCC",favIconAltText:"logo for {0}",getTheApp:"Get the app",launchApp:"Open the app",getTheAppTitleFormat:"{0} get the app",installActivateStore:"Opening store",installApp:"Install app",installAppTooltip:"{0} - Install app",installAppInAppPurchasesTooltip:"{0} - Install app - Contains in-app purchases",installAppLearnMore:"Learn more",installError:"An error occurred",installPending:"Working",installStarting:"Starting download",openTheAppTitleFormat:"",pinThisSite:"Pin this site",removeThisSite:"Remove this site",topSiteAppAttribution:"App",topSiteAttribution:"Website",sponsoredText:"Sponsored",unpinThisSite:"Unpin this site"}});define("topSitesModels",["appHelper"],function(n){function f(t){var u=this;u.getOriginalTitle=function(){var n=u.title||u.domain||u.siteUrl;return n&&n.replace(/^(https?:\/\/)?(www\.)?/i,"")||null};u.isSponsored=function(){return u.getOriginalTitle()?u.getOriginalTitle().toLowerCase().indexOf("sponsored")>-1:!1};u.isCuratedSite=function(){return u.type===i.curated};u.getDisplayTitle=function(){var n=u.getOriginalTitle(),t=n?n.indexOf("["):-1;return u.isSponsored()&&t>=0?n.substring(0,n.indexOf("[")):n};u.getTooltip=function(){var n=u.getDisplayTitle();return u.isApp?n:u.title===u.siteUrl?null:n};u.setAppIds=function(t,i){if(i&&(u.appIds=null,u.pfn=null),t&&t.length){var f=u.appIds||(u.appIds=[]);t.filter(r.getIf).forEach(function(t){f.push(t);u.pfn||(u.pfn=n.tryParseAppId(t).pfn)});u.bigCatId=u.appIds.length>1?u.appIds[u.appIds.length-1]:null}return u.appIds};u.hasApp=function(){return u.appIds&&u.appIds.length};u.hasSchemelessCmsIcon=function(){var n=u.icon;return n&&!n.match(/^http/i)&&n.match(/tenant\/amp/i)};u.isPinned=function(){return u.displayOrder>=0&&u.displayOrder!==null};u.clone=function(){return new f(u.getJson())};u.getJson=function(n){var t={appIds:u.appIds,background:u.background,backgroundFromAlgo:u.backgroundFromAlgo,color:u.color,hasAddOns:u.hasAddOns,icon:u.icon,installEnabled:u.installEnabled,inlineActionsDisabled:u.inlineActionsDisabled,isInlinePinToTaskbarEnabled:u.isInlinePinToTaskbarEnabled,itemId:u.itemId,isApp:u.isApp,siteUrl:u.siteUrl,slotIndex:u.slotIndex,title:u.title,trackingHeadline:u.trackingHeadline,type:u.type,displayOrder:u.displayOrder},i;if(n)for(i in t)t[i]==null&&delete t[i];return t},function(){if(t&&(u.domain=null,u.domainAndPath=null,u.hasQuery=null,u.pfn=null,u.appIds=u.setAppIds(t.appIds),u.background=t.background,u.backgroundFromAlgo=t.backgroundFromAlgo,u.color=t.color,u.displayOrder=t.displayOrder,u.hasAddOns=t.hasAddOns,u.icon=t.icon,u.installEnabled=t.installEnabled,u.itemId=t.itemId,u.isApp=t.isApp,u.inlineActionsDisabled=t.inlineActionsDisabled,u.isInlinePinToTaskbarEnabled=t.isInlinePinToTaskbarEnabled,u.siteUrl=t.siteUrl,u.slotIndex=t.slotIndex,u.title=t.title,u.trackingHeadline=t.trackingHeadline,u.type=t.type),u.siteUrl){var n=e(u.siteUrl);u.domain=n.domain;u.domainAndPath=n.domainAndPath;u.domainPathAndQuery=n.domainPathAndQuery;u.hasQuery=n.hasQuery}}()}function t(n){function o(n,t){var i={};n=n||r.getUrl;u.each(function(r){var u=n(r);u&&!i[u]&&(i[u]=!0,t(r,u))})}var u=this,e=[];u.clone=function(){var n=new t;return u.each(function(t){n.add(t.clone())}),n};u.add=function(n){n&&e.push(n)};u.set=function(n,t){n&&t>=0&&t<e.length&&(e[t]=n)};u.move=function(n,t){var r=e[n];return!r||!e[t]||n===t||!u.removeAt(n)?!1:(r.displayOrder=t,r.type=i.user,e.splice(t,0,r),u.each(function(n,t){n.displayOrder!=null&&(n.displayOrder=t)}),!0)};u.first=function(n){var i=new t;return u.each(i.add,n),i};u.addFrom=function(n,t,i){var f=n&&n.count()||0,o=i==null?f:Math.min(f,i),s=t,r,u;for(e.length=Math.max(e.length,t+o),r=0;r<o;r++)u=n.get(r),u&&(e[s++]=u)};u.count=function(){return e.length};u.map=function(n){return e.map(n)};u.filter=function(n){return new t(e.filter(n))};u.removeAt=function(n){return n>=0&&n<e.length&&!!e.splice(n,1)};u.insert=function(n,t){return t>=0&&t<e.length&&e.splice(t,0,n)};u.removeByUrl=function(n){var t;return n?(u.each(function(i,r){if(i.siteUrl===n)return t=i,u.removeAt(r),!1}),t):t};u.remove=function(n){return n&&u.removeAt(e.indexOf(n))};u.slice=function(n,i){return new t(e.slice(n,i))};u.get=function(n){return e[n]};u.findIndexByKey=function(n,t){var i=-1;return u.each(function(r,u){if(t(r)===n)return i=u,!1}),i};u.each=function(n,t,i){t=t!=null?Math.min(e.length,t):e.length;for(var f=i?e.length-1:0,o=i?-1:1,u=0,r=f;u<t;){if(n(e[r],r)===!1)break;r+=o;u++}};u.indexOf=function(n){return e.indexOf(n)};u.toSiteExclusionLookup=function(n){var t=new s(n);return t.addSites(u),t};u.toJsLookup=function(n){var t={};return o(n,function(n,i){i&&(t[i]=n)}),t};u.distinct=function(n){var i=new t;return o(n,i.add),i};u.excludeLookup=function(n){if(n.getCount()<=0)return u;var i=new t;return u.each(function(t){n.contains(t)||i.add(t)}),i};u.intersectLookup=function(n,i){if(n.getCount()<=0)return new t;var r=new t;return u.each(function(t){n.contains(t,i)&&r.add(t)}),r};u.truncate=function(n){return e.length=Math.max(0,Math.min(u.count(),n||0)),u};u.getJson=function(){var n=[];return u.each(function(t){n.push(t.getJson(!0))}),n};u._list=e,function(){n instanceof Array&&n.map(function(n){u.add(new f(n))})}()}function l(n){function ft(){var n=new y;return n.addFromUrlObject(rt),n.addFromDomainObject(ut),n}function ht(e,s,h,c,l,y){var rt,tt,ut=n.totalCount-y,vt=Math.max(0,ut-s),ft,kt,b,dt,it,yt,et,pt,ht,ct,at,wt,bt,ri,ui;ft||(ft=p.first(ut).excludeLookup(l).excludeLookup(c).first(k));n.showFrequents&&a&&(a=a.excludeLookup(l));n.stackingStrategy===o.frequentsFirst?(b=n.showFrequents?a.excludeLookup(c).first(n.totalCount):new t,kt=b.toSiteExclusionLookup(r.getDomain),tt=ft.excludeLookup(kt),rt=new v([new u(b),new u(tt)])):(tt=ft,b=new t,n.showFrequents&&(b=a.excludeLookup(h).first(vt),dt=b.toSiteExclusionLookup(r.getDomainAndPath),it=tt.intersectLookup(dt).toSiteExclusionLookup(r.getDomainAndPath),b=b.excludeLookup(it),yt=b.count()+it.getCount(),yt<vt?(et=new t,pt=vt-yt,tt.each(function(n){it.contains(n)?et.add(n):pt>0&&(et.add(n),pt--)}),tt=et):tt=tt.intersectLookup(it)),rt=new v([new u(tt),new u(b)]));var d=new t,gt=new t,ni=new u(gt),ti={},ii=new t,fi=new u(ii);for(e.each(function(n){st(n)?(gt.add(n.clone()),ti[n.displayOrder]=!0):ii.add(n)}),ht=0;ht<ut;ht++){if(ct=ti[ht]&&ni.next(),ct){ct.displayOrder=d.count();d.add(ct);continue}if(at=fi.next(),at&&ot(at)){d.add(at.clone());continue}wt=rt&&rt.next();wt&&d.add(wt.clone())}return nt(d,ut,ni,function(n){return n&&(n.displayOrder=d.count()),n}),y>0?(w||(bt=g==null,bt&&(ri=d.toSiteExclusionLookup(r.getDomain),g=p.excludeLookup(l).excludeLookup(ri).filter(function(n){return n.appIds&&n.appIds.length})),w=lt(g,y),bt&&(g=w.clone())),ui=new u(w),nt(d,n.totalCount,ui,function(n){var t=n?n.clone():new f;return t.type=i.suggested,t})):nt(d,n.totalCount),d}function ct(n){var i,r,u,f;return!n||n===0?new t:(i=ft(),l.each(function(n){if(n.siteUrl){var t=e(n.siteUrl);i.addKey(t.domain);i.addKey(t.domainAndPath)}}),r=it.excludeLookup(i),u=r.filter(function(n){return n.hasApp()}).first(n),u.each(function(n){if(n.isApp=!0,n.siteUrl){var t=e(n.siteUrl);i.addKey(t.domain);i.addKey(t.domainAndPath)}}),f=r.excludeLookup(i).first(n),{apps:u,sites:f})}function lt(n,t){var u="lastUpdated",f="lastIndex",e=(new Date).getDate(),o=isNaN(b[u])||b[u]!=e,i=b[f]>-1?b[f]:-1,r,s;return o&&(i+=1),r=i+t,r>n.count()&&(i=0,r=t),s=n.slice(i,r),o&&(b[u]=e,b[f]=i),s}function nt(n,t,i,r){while(n.count()<t){var u=i&&i.next(),e=r&&r(u)||new f;n.add(e)}}function et(n){return function(t){return t.type===n}}function ot(n){return st(n)||n.type===i.user}function st(n){return n.displayOrder!=null}function tt(n){return l=c._list=n}var c=this;n=h(n,{stackingStrategy:o.frequentsFirst,maxCuratedCount:8,maxSuggestedCount:0,maxAddSuggestionsPerGroup:4,totalCount:8,showFrequents:!0});var l=tt(new t),d,it=new t,p=new t,a=new t,w,g,rt={},ut={},k=n.maxCuratedCount,b=n.suggestedSitesData;c.setCuratedSites=function(n){n&&(it=n.clone(),p=n.clone(),p.each(function(n){n.type=i.curated}),k=Math.min(k,p.count()))};c.setFrequentSites=function(n){n&&(a=n.clone(),a.each(function(n){n.type=i.frequent}))};c.addUserTopSite=function(n,t){if(n){var r=n.clone();r.type=i.user;l.set(r,t)}};c.moveSite=function(n,t){var r=l.get(n);return r&&r.type!==i.suggested&&l.move(n,t)};c.togglePinnedState=function(n){var t=l.get(n);t&&t.siteUrl&&(t.displayOrder=t.displayOrder==null?n:null,t.type=i.user)};c.getCuratedSites=function(){return p};c.getFrequentSites=function(){return a};c.getDisplayedCuratedCount=function(){return k};c.getSuggestedSitesData=function(){return b};c.setDeletedUrlLookup=function(n){rt=n||{}};c.setDeletedDomainLookup=function(n){ut=n||{}};c.removeSite=function(n){var t=l.remove(n);return t=p.removeByUrl(n.siteUrl)||t,t=a.removeByUrl(n.siteUrl)||t,w&&n.type===i.suggested&&(t=w.removeByUrl(n.siteUrl)||t),!!t};c.restoreRenderList=function(n,t){l=tt(n||l);t||(w=l.filter(function(n){return n.type===i.suggested}))};c.getRenderList=function(){var e=ft(),t=l.filter(ot),f=new s(r.getDomainAndPath),u;return f.addSites(t),u=new s(r.getDomain),u.addSites(t),l=tt(ht(l,t.count(),f,u,e,n.maxSuggestedCount)),p=l.filter(et(i.curated)),a=n.showFrequents?l.filter(et(i.frequent)):a,k=p?p.count():0,d=null,l};c.getAddDialogSuggestions=function(){return d||(d=ct(n.maxAddSuggestionsPerGroup)),d};c.showFrequents=function(t){n.showFrequents=t}}function p(){function c(n){var t=e[n.domainAndPath],i=e[n.domain],r,u,o,s;(t||i)&&(r=f("appIds",t,i),r&&(n.setAppIds(r,!0),n.hasAddOns=f("hasAddOns",t,i),n.installEnabled=f("installEnabled",t,i)),u=f("trackingHeadline",t,i),u&&(n.trackingHeadline=u),o=f("icon",t,i),o&&(n.background=f("background",t,i),n.color=f("color",t,i),n.icon=o,n.backgroundFromAlgo=!1),s=!n.hasQuery&&t&&t.title,s&&(n.title=s),n.isInlinePinToTaskbarEnabled=f("isInlinePinToTaskbarEnabled",t,i),n.inlineActionsDisabled=f("inlineActionsDisabled",t,i))}function f(n,t,i){return t&&t[n]||i&&i[n]}var u=this,a,e,i=u._renderList=new l,s,n;u.initialize=function(u){n=h(u,{canAddUserSites:!1,canDoSiteOverride:!0,curatedSites:new t,deletedDomainLookup:{},deletedUrlLookup:{},previousRenderList:null,maxTopSiteCount:8,maxCuratedCount:8,maxSuggestedCount:0,maxAddSuggestionsPerGroup:4,stackingStrategy:o.frequentsFirst,suggestedSitesData:{},showFrequents:!0},!0);a=n.curatedSites.toJsLookup(r.getDomain);e=n.curatedSites.toJsLookup(r.getDomainAndPath);i=new l({maxCuratedCount:n.maxCuratedCount,totalCount:n.maxTopSiteCount,maxAddSuggestionsPerGroup:n.maxAddSuggestionsPerGroup,maxSuggestedCount:n.maxSuggestedCount,stackingStrategy:n.stackingStrategy,suggestedSitesData:n.suggestedSitesData,showFrequents:n.showFrequents});var f=n.previousRenderList;n.canDoSiteOverride&&f&&f.each(function(n){c(n)});i.setCuratedSites(n.curatedSites.distinct(r.getDomain));i.setDeletedUrlLookup(n.deletedUrlLookup);i.setDeletedDomainLookup(n.deletedDomainLookup);i.restoreRenderList(f,!0)};u.canAddUserSites=function(){return n&&n.canAddUserSites};u.getDisplayedCuratedCount=function(){return i.getDisplayedCuratedCount()};u.getSuggestedSitesData=function(){return i.getSuggestedSitesData()};u.getSitesToRender=function(n){return(!s||n)&&(s=i.getRenderList()),s};u.getAddDialogSuggestions=function(){return i.getAddDialogSuggestions()};u.addUserTopSite=function(n,t){c(n);i.addUserTopSite(n,t)};u.moveSite=function(n,t){return i.moveSite(n,t)};u.restoreRenderList=function(n){i.restoreRenderList(n)};u.removeTopSite=function(n){return i.removeSite(n)};u.setFrequents=function(n){n=n||new t;n.each(c);i.setFrequentSites(n)};u.showFrequents=function(n){i.showFrequents(n)};u.togglePinnedState=function(n){i.togglePinnedState(n)}}function a(n,t){var i=this;i.data=n;i.parentContext=t;this.update=function(n){i.data=n.data;i.parentContext=n.parentContext}}function u(n,t){var u=this,i=0,r=0;t=c(t,Infinity);u.next=function(){var u=null;return i<n.count()&&r<t&&(u=n.get(i),i++,r++),u}}function v(n,t){var u=this,i=0,r=n[0],f=0;t=c(t,Infinity);u.next=function(){if(f<t){var e=r&&r.next();if(e)return f++,e;if(i+1<n.length)return i++,r=n[i],u.next()}return null}}function s(n){var t=this,i=new y;t.getCount=i.getCount;t.addSite=function(t){i.addKey(n(t))};t.addSites=function(t){var r=t.forEach||t.each;r.call(t,function(t){i.addKey(n(t))})};t.contains=function(t){return i.contains(t,n)};t._lookup=i._lookup}function y(){function r(t){var i=e(t);n.addKey(i.domain);n.addKey(i.domainAndPath)}var n=this,t={},i=0;n.getCount=function(){return i};n.addKey=function(n){n&&!t[n]&&(t[n]=!0)&&++i};n.addFromDomainObject=function(t){for(var i in t)n.addKey(i)};n.addFromUrlObject=function(n){for(var t in n)r(t)};n.contains=function(n,i){var r=i?t[i(n)]:t[n.domain]||t[n.domainAndPath];return!!r};n._lookup=t}function e(n){if(n){/^\s*(f|ht)tps?:\/\//i.test(n)||/^\s*ms-windows-store:/i.test(n)||/^\s*file:\/\//i.test(n)||(n="http://"+n.trim());var i=/[\s\/]+$/g,t=n&&n.match(/^\s*(https?:\/\/(?:www\d*\.)?(([^\/:\?#]+)([^\?#]+)?(\?[^#]+)?))/i)||[],r=(t[3]||"").replace(i,""),u=(t[4]||"").replace(i,"");return{url:t[1]||"",domain:r,domainAndPath:r+u,domainPathAndQuery:t[2]||"",hasQuery:!!t[5]}}}function h(n,t,i){n=n||{};for(var r in t)(i&&n[r]===null||n[r]===undefined)&&(n[r]=t[r]);return n}function c(n,t){var i=parseInt(n);return isNaN(i)?t:i}var i={curated:"curated",frequent:"frequent",suggested:"suggested",user:"user"},o={frequentsFirst:1,curatedFirst:2},r={getUrl:function(n){return n.siteUrl},getDomain:function(n){return n.domain},getDomainAndPath:function(n){return n.domainAndPath},getDomainPathAndQuery:function(n){return n.domainPathAndQuery},getIf:function(n){return n}};return{topSite:f,topSiteCollection:t,topSites:p,constants:{events:{changeFreqsVisibility:"changeFrequentsVisibility"},topSiteType:i,topSiteStackingStrategy:o,addDialogPosition:{bottom:0,right:1}},createBindingContext:function(){return new a},createChildBindingContext:function(n,t){return new a(n,t)},utils:{applyDefaults:h,parseUrl:e,tryParseInt:c}}});define("topSiteViews",["topSitesModels","colorHelper","topSites.tokens","mediator","document","format","window","appHelper","cookieComplianceHelper","spartanConstants","browserAccess","serviceuihelper","errorCategory"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){function d(r,u){function ri(n,t,r){var o=ui(nt,n,t,r),v=o.appId,y=e.trackingHeadline,s,b,c,w,a;return y||(s="",b=e.title||e.domain||s,y=f(u.appLinkTrackHeadlineFormat,b,s,s,s)),v&&nt.setAttribute("data-ali",JSON.stringify({ids:[v]})),w="topsites_getapp",o.launchLink?(c=i.launchApp,w="topsites_launchapp",p&&(a=p.AppLaunch)):o.installLink?(c=i.installApp,p&&(a=p.AppInstall)):o.storeLink&&(c=i.getTheApp,p&&(a=p.AppStore)),dt.innerText=c||"",st(v,nt,e.type,w,a),h&&(pt&&o.installLink&&i.installAppLearnMore?(h.style.color=l.action,h.style.backgroundColor=l.background,pt.innerText=i.installAppLearnMore):h.style.display="none"),nt.setAttribute("data-hl",y),nt.style.color=l.action,nt.style.borderTopColor=l.border,o}function ui(n,t,r,f){var a=!1,c,v=!1,y=!1,s=u.appLinkHandler,p=s&&s.getTopSiteAppInstallState(e)||{appId:e.appIds&&e.appIds[0]},l=p.appId,w=o.tryParseAppId(l)||{},b;return w.bigCatId=e&&e.appIds&&e.appIds.length>1?e.appIds[e.appIds.length-1]:null,n.onclick=n.onblur=n.onfocus=n.onmouseout=n.onmouseover=null,n.href="",n.removeAttribute(vt),n.setAttribute(gt,fi),h&&(h.onclick=h.onblur=h.onfocus=h.onmouseout=h.onmouseover=null,h.href=""),l&&(c=o.getApplicationStoreLink(l),f!==!1&&s.canLaunchApp()&&p.installed?(n.onclick=function(n){n.preventDefault();s.launchApp(l)},n.href="#",n.setAttribute(vt,i.openTheAppTitleFormat.format(e.title)),y=!0):r!==!1&&it&&e.installEnabled&&s.canInstallApp()?(n.onclick=function(t){s.installApp(w,n);t.preventDefault()},n.onfocus=n.onmouseover=function(){yt(!0)},n.onblur=n.onmouseout=function(){yt(!1)},h&&c&&(h.href=c,h.onfocus=h.onmouseover=function(){yt(!0)},h.onblur=h.onmouseout=function(){yt(!1)},n.setAttribute(gt,ei)),b=e.hasAddOns?i.installAppInAppPurchasesTooltip:i.installAppTooltip,n.setAttribute(vt,b.format(e.title)),v=!0):t!==!1&&s.canLaunchStore()&&c&&(n.href=c,n.setAttribute(vt,i.getTheAppTitleFormat.format(e.title)),a=!0)),{appId:l,storeLink:a,installLink:v,launchLink:y,visible:a||v||y}}function si(n,t){var r=e.type,f=r?" "+r:"",o=u.isUserAddedSitesEnabled&&e.isPinned()?" pinned":"",i=!1;i=e.isSponsored()&&e.isCuratedSite();d.className=(e.siteUrl?"topsite":"")+(e.backgroundFromAlgo?" border":"")+(i?" hasspon":"")+(n&&!i?" hasapp":"")+(e.hasAddOns&&t&&!i?" "+ti:"")+(t&&!i?" install":"")+(e.siteUrl?l.isLightBackground?" light":" dark":"")+o+f}function st(n,t,i,r,u){var f;if(t){var s="data-m",o="data-dtn",h=t.getAttribute(s),e;r?(e=r,t.setAttribute(o,e)):e=t.getAttribute(o);h&&(f=JSON.tryParse(h),f?(i&&f.n&&(e||(e=f.n,t.setAttribute(o,e)),f.n=i+"_"+e),n&&(f.l=n),u&&(f.y=u),t.setAttribute(s,JSON.stringify(f))):require(["track"],function(n){n.trackAppErrorEvent(a.updateTrackingInfo)}))}}function hi(n){if(e&&e.installEnabled&&(e.pfn===n.pid||e.bigCatId===n.pid)){var u=n.errorCode,l=e.pfn,f,h,c,t,r;n.complete?(t=!1,n.success?(s.render(),s.updateIapDisclaimerCommand.trigger()):u&&(t=!0,f=!0,require(["track"],function(n){o.tryLaunchStoreProductPage(n,l,u,"top sites")?r=i.installActivateStore:(r=i.installError,h=!0)}))):n.state===k.Pending?(r=i.installPending,t=!0):n.state===k.Starting?(r=i.installStarting,t=!0):n.progress?(it.setAttribute("value",n.progress),t=!1,c=!0):d.classList.contains(ni)&&(t=!1);r&&(ut.innerText=r);t!=null&&y(ut,ii,r&&t);ut.setAttribute("title",f&&h&&u||"");y(d,ni,f);y(d,"erricon",h);y(it,ii,c);y(d,oi,!n.complete)}}function yt(n){var t="highlight";y(nt,t,n);y(h,t,n)}var s=this,l,kt=n.createBindingContext(),lt,e,ht,nt,h,pt,dt,it,tt,rt,ut,ot,d,g,ct,wt,ft,at,bt,gt="contextmenu",fi="none",ei="topsites-installapp-contextmenu",ni="error",ti="hasiap",oi="installing",ii="show",vt="title";u=n.utils.applyDefaults(u,{appLinkHandler:null,appLinkTrackHeadlineFormat:"",isUserAddedSitesEnabled:!1});s.bind=function(n){kt.update(n);e=kt.data};s.addCommand=new v(s);s.removeCommand=new v(s);s.pinCommand=new v(s);s.pinToTaskbarCommand=new v(s);s.contextMenuCommand=new v(s);s.updateIapDisclaimerCommand=new v(s);s.grantCookieConsentCommand=new v(s);s.toggleAddButtonMode=function(n){lt=n};s.canDrag=function(){return e&&e.type&&e.type!==w.topSiteType.suggested};s.getElement=function(){return r};s.getDragTile=function(){return new et(d,r,s.canDrag)};s.getTopSite=function(){return e};s.focus=function(){lt&&ht?ht.focus():e&&e.siteUrl&&g&&g.focus()};s.hasAddButton=function(){return lt};s.needsInAppPurchaseDisclaimer=function(){return d.className&&d.className.indexOf(ti)>=0};s.onLearnMoreMenuItemClicked=function(){h&&h.click()};s.renderAppLink=function(){var n,i=!1,r=!1,u,f,t;return e.isApp?(u=ui(g,!0,!1,!0),n=u.appId,u.storeLink&&(f=ri(!1,!0,!1),r=i=f.installLink)):nt?(t=ri(),n=t.appId,i=t.visible,r=t.installLink):n=e.appIds&&e.appIds[0],si(i,r),n};s.render=function(){var v,k,nt;e=e||new n.topSite;l=o.getAppCalculatedColors(e.color,e.background);var a=e.type,p=null,y=!0;g.onclick=null;ot.src=e.icon||b;bt.innerText=e.getDisplayTitle()||"";r.className=lt?"addsite":"";r.style.zIndex="";v=s.renderAppLink();e.isSponsored()&&e.isCuratedSite()&&ct&&(ct.classList.add("spon-lbl"),k=i.sponsoredText||"",ct.innerText=k,(e.background==="#ffffff"||e.background==="")&&ct.setAttribute("class","spon-lbl spn-lbl-txt"));e.isApp?(p="topsite_app",d.setAttribute("data-exclude-default-menu","true")):(g.href=e.siteUrl||"",c.isServiceUiAvailable()&&(g.onclick=function(n){c.navigate(g.href,c.navigationTypes.currentTab,n)}));ot.alt=e.domain&&f(i.favIconAltText,e.domain)||"";g.title=e.getTooltip()||"";y=a==w.topSiteType.curated||t.isContrastAcceptable(l.color,l.background);y||(e.backgroundFromAlgo=!0);e.color=y?l.color:l.isLightBackground?"#000":"#fff";bt.style.color=e.color;d.style.backgroundColor=l.background;rt&&(rt.style.color=l.remove,rt.setAttribute("title",i.removeThisSite));ft&&(ft.style.color=l.remove);wt&&(wt.style.color=l.remove);tt&&(tt.style.color=l.remove);d.draggable=s.canDrag();tt&&(u.isUserAddedSitesEnabled?(nt=e.isPinned(),tt.setAttribute("title",nt?i.unpinThisSite:i.pinThisSite)):tt.style.display="none");ut&&(ut.innerText=e.isApp&&i.topSiteAppAttribution||"",ut.style.color=l.color);it&&e.installEnabled&&(it.style.color=l.color,it.style.background=l.border);st(v,r,a);st(v,rt,a);st(v,g,a,p);st(v,h,a);st(v,tt,a)},function(){d=r.getElementsByTagName("div")[0];g=d.querySelector("a:first-child");at=g.getElementsByTagName("div")[0];ot=at.getElementsByTagName("img")[0];bt=at.getElementsByClassName("ts-title")[0];ut=at.getElementsByClassName("ts-attr")[0];nt=r.querySelector("a.js-appAction");dt=nt&&nt.querySelector(".js-appActionText");h=r.querySelector("a.app-learn-more");pt=h&&h.querySelector(".js-appActionText");rt=r.getElementsByClassName("remove")[0];ft=r.getElementsByClassName("sugg-icon")[0];wt=r.getElementsByClassName("spnsr-icon")[0];ct=r.getElementsByClassName("sponsored-label")[0];tt=r.getElementsByClassName("pinsite")[0];ht=r.querySelector(".add");it=r.querySelector("progress");it&&u.appLinkHandler&&u.appLinkHandler.addAppInstallListener(hi);ot.onerror=function(){ot.src=b;ot.onerror=null};d.onkeydown=function(n){n.keyCode===46&&(d.onkeydown=null,s.removeCommand.trigger(e))};rt&&(rt.onclick=function(){s.removeCommand.trigger(e)});ft&&(ft.onclick=function(){require(["track"],function(n){n.trackEvent({type:"click_nonnav",target:ft},ft,g.href,"suggested_site_icon")})});tt&&(tt.onclick=function(){s.pinCommand.trigger(e)});r.oncontextmenu=function(){s.contextMenuCommand.trigger(e,r,s)};ht&&(ht.onclick=function(){s.addCommand.trigger()});r&&(r.onmousedown=function(){s.grantCookieConsentCommand.trigger()})}()}function ut(t,r){function g(){if(o){var n=o.topSiteView;n&&n.onLearnMoreMenuItemClicked()}}function nt(){if(o){var n=o.topSite,t=o.topSiteNode;n&&n.siteUrl&&t&&(require(["track"],function(i){i.trackEvent({type:"click_nonnav",target:t},t,n.siteUrl,"removetopsite")}),p(f,n))}}function tt(n,t,i){t&&(t.icon||(t.icon=b),require(["track"],function(n){n.trackEvent({type:"click_nonnav",target:i},i,t.siteUrl,"pintopsitetotaskbar")}),f.pinTopsiteToTaskbarCommand.trigger(t))}function rt(n,t,r,f){var e=u.getElementById("toggle_pin_topsite_menu_item"),h,s;t&&e&&(h=t.isPinned()?i.contextMenuUnpinTopSite:i.contextMenuPinTopSite,e.setAttribute("label",h),e.onclick=function(){n.pinCommand.trigger(t)},t.type===w.topSiteType.suggested?e.setAttribute("hidden","1"):e.removeAttribute("hidden"));s=u.getElementById("pin_topsite_to_taskbar_menu_item");s&&(s.onclick=function(){n.pinToTaskbarCommand.trigger(t,r)});o={topSite:t,topSiteNode:r,topSiteView:f}}function p(n,t){t&&f.removeTopSiteCommand.trigger(t)}function ut(n,t){f.pinTopSiteCommand.trigger(t)}function et(n,i){f.addTopSiteCommand.trigger(i,t)}function c(){var n;e.forEach(function(t){t.needsInAppPurchaseDisclaimer()&&(n=!0)});y(t,"has-iap",n)}var f=this,e,k=new n.topSite,s,h=n.createBindingContext(),o,l,a=[];r=n.utils.applyDefaults(r,{isUserAddedSitesEnabled:!1,appLinkHandler:null});f.addTopSiteCommand=new v(f);f.removeTopSiteCommand=new v(f);f.pinTopSiteCommand=new v(f);f.pinTopsiteToTaskbarCommand=new v(f);f.dragAndDropCommand=new v(f);f.bind=function(n){h.update(n);s=h.data};f.getChildViews=function(){return e};f.focus=function(n){var t=e[n];t&&t.focus()};f.render=function(){s=s||new n.topSites;var u=s.getSitesToRender(),r=s.canAddUserSites(),i=!1;e.forEach(function(t,f){var e=u.get(f)||k,o=e.type;t.toggleAddButtonMode(!1);r&&!e.siteUrl&&o!==w.topSiteType.suggested?(t.toggleAddButtonMode(!0),r=!1):i||o!=w.topSiteType.curated||(i=!0);t.bind(n.createChildBindingContext(e,h));t.render()});y(t,"has-curated",i);c()};f.renderAppLinks=function(){e.forEach(function(n){n.renderAppLink()});c()},function(){var i=u.getElementById("remove_topsite_menu_item"),n,o;i&&(i.onclick=nt);n=u.getElementById("app_learn_more_item");n&&(n.onclick=g);o=t&&t.getAttribute("data-format-app-hl")||"";e=ct(t&&t.getElementsByTagName("li")).map(function(n,t){var i=new d(n,{appLinkHandler:r.appLinkHandler,appLinkTrackHeadlineFormat:o,isUserAddedSitesEnabled:r.isUserAddedSitesEnabled,isInlinePinToTaskbarEnabled:r.isInlinePinToTaskbarEnabled,isInlineTopSitesActionsDisabled:r.isInlineTopSitesActionsDisabled});return i.addCommand.listen(function(n){et(n,t);it(e)}),i.contextMenuCommand.listen(rt),i.removeCommand.listen(p),i.pinCommand.listen(function(n){ut(n,t)}),i.pinToTaskbarCommand.listen(tt),i.updateIapDisclaimerCommand.listen(c),i.grantCookieConsentCommand.listen(function(n){var t=n.getTopSite();t&&t.type&&it(e)}),a.push(i.getDragTile()),i});r.isUserAddedSitesEnabled&&(l=new ft(t,a),l.dragAndDropCommand.listen(function(n,t,i){f.dragAndDropCommand.trigger(t,i)}))}()}function ft(n,t){function y(e,c){var a;(i=e,c.dataTransfer.setData("text",i.toString()),c.dataTransfer.effectAllowed="move",r||(r=u.getElementById("topsitesdroptarget")),h||(h=r.getElementsByTagName("li")),o||(o=k("topsitekeyframe"),o&&t.forEach(function(n,t){n.setDragAnimationAssets(o[t],"topsiteanimate"+t)})),r&&o)&&(r.style.top=n.offsetTop+"px",l=[],s=[],f=t.slice(),f.forEach(function(n){n.reset()}),n.style.zIndex=1,r.style.zIndex=2,Array.prototype.forEach.call(n.getElementsByTagName("li"),function(n,t){t==0&&(a=n.offsetTop);var i=new ot(t,h[t]);i.onDragOverCommand.listen(w);i.onDropCommand.listen(b);i.setBounds(n,a);s.push({top:n.offsetTop,left:n.offsetLeft});l.push(i)}),f[e].animationElement.classList.add("topsitedrag"),r.style.display="block")}function p(n,t){a(n,n,t)}function w(n,r){var u=n.index,h=t[u],l,o,a;if(h&&h.canDrag()&&r.preventDefault&&(r.preventDefault(),r.dataTransfer.dropEffect="move",i!=u)){for(var c=i<u?-1:1,v=Math.abs(u-i),e=u;v-->0;)l=f[e],o=s[e+c],l.animate(o.top,o.left),e=e+c;a=f[i];f.splice(i,1);f.splice(u,0,a);i=u}}function b(n,t){var i=t.dataTransfer.getData("text");a(i,n.index,t)}function a(i,u){if(u>=0&&i>=0&&i!=u){var f=n.children[i];require(["track"],function(n){n.trackGesture(f,"drop")})}r.style.display="none";t[i].animationElement.classList.remove("topsitedrag");c.dragAndDropCommand.trigger(i,u)}function k(n){var t=[];return Array.prototype.forEach.call(u.styleSheets,function(i){Array.prototype.forEach.call(i.cssRules,function(i){i.type==e.CSSRule.KEYFRAMES_RULE&&i.name.indexOf(n)==0&&t.push(i)})}),t}var o,i,l,s,f,r,h,c=this;c.dragAndDropCommand=new v(c);t.forEach(function(n,t){n.dragElement.ondragstart=function(n){y(t,n)};n.dragElement.ondragend=function(n){p(t,n)}})}function et(n,t,i){var f=0,e=0,u,o,r=this;r.dragElement=n;r.animationElement=t;r.canDrag=i;r.reset=function(){f=e=0};r.setDragAnimationAssets=function(n,t){u=n;o=t};r.animate=function(n,i){var r,s;t.classList.remove(o);u.deleteRule("0");u.deleteRule("1");r="from { top: "+f+"px; left: "+e+"px;}";f=n-t.offsetTop;e=i-t.offsetLeft;s="to { top: "+f+"px; left: "+e+"px;}";u.appendRule(r);u.appendRule(s);t.style.zIndex=2;t.classList.add(o)}}function ot(n,t){var r="px;",i=this;i.index=n;i.onDragOverCommand=new v(i);i.onDropCommand=new v(i);i.element=t;t.ondragover=function(n){i.onDragOverCommand.trigger(n)};t.ondrop=function(n){i.onDropCommand.trigger(n)};i.setBounds=function(n,i,u){i=i||0;u=u||0;var f=["position:absolute;z-index:4;","top:",n.offsetTop-i,r,"left:",n.offsetLeft-u,r,"width:",n.offsetWidth,r,"height:",n.offsetHeight,r].join("");t.style.cssText=f}}function st(t){function b(n){t.classList.remove(a);s.disable();c.disable();l.disable();i.dismissedCommand.trigger(n);r.unsub(h.eventNames.sectionHeaderDockedEvent)}function k(n){u.focus();n&&(u.value="http://",u.setSelectionRange(7,7),r.sub(h.eventNames.sectionHeaderDockedEvent,ut))}function ut(n){n?u.blur():u.focus()}function ft(){var t=n.utils.parseUrl(u.value);return t&&t.domain&&t.url&&t.url.trim()}function et(t){t=t.toLocaleLowerCase();var r=new n.topSite({siteUrl:t});t?i.newTopSiteCommand.trigger(r):k()}var i=this,d,y=n.createBindingContext(),u,o,p,it,e,s,c,l,w=7,a="show",f="px";i.newTopSiteCommand=new v(i);i.dismissedCommand=new v(i);i.bind=function(n){y.update(n);d=y.data};i.show=function(n,r){i.positionAddDialog(n,r);t.classList.add(a);k(!0);s.enable();c.enable();l.enable()};i.hide=function(){b()};i.positionAddDialog=function(r,u,f,e){if(r&&u&&(!f||t.classList.contains(a)))e==n.constants.addDialogPosition.right?i.positionAddDialogToRight(r,u,!1):i.positionAddDialogAtBottom(r,u)};i.positionAddDialogAtBottom=function(n,i){var o=t.parentNode,s=o&&o.getBoundingClientRect()||{left:0,top:0},r=s.left,v=s.top,h=i.right-i.left,y=(t.offsetWidth-h)/2,c=i.left-r,p=n.left-r,b=n.right-t.offsetWidth-r,l=Math.min(Math.max(p,c-y),b),u,a;t.style.left=l+f;u=e.offsetWidth*Math.sqrt(2)/2;e.style.left=c-l-u+h/2+f;a=i.height*.93;t.style.top=i.top+a+u-v+w+f};i.positionAddDialogToRight=function(n,i,r){var o=t.style,u=e.style,s;o.top=i.top-n.top+w+f;r?o.right=n.right-i.right+i.width+f:o.left=i.left-n.left+i.width+f;s=-e.offsetWidth/2+f;r?u.right=s:u.left=s;u.top="35%";u.transform="rotate(-45deg)"},function(){u=t.querySelector("input[type=text]");e=t.querySelector("div.arrow");p=t.querySelector("button.close");p.onclick=i.hide;o=t.querySelector("button.save");o.onclick=function(){var n=ft();n&&et(n)};it=t.querySelector("div.suggestions");s=g(t,function(){b(!0)});c=nt(i.hide);l=tt(rt,u,function(n){o.focus();o.click();n.preventDefault()})}()}function ht(n){var t=this,f,i,e,o,r,u;t.undoTopSiteCommand=new v(t);t.hideDialogCommand=new v(t);t.show=function(){e.innerText=o;n.classList.add("show");t.focus();r.enable();u.enable()};t.hide=function(){n.classList.remove("show");r.disable();u.disable();t.hideDialogCommand.trigger()};t.focus=function(){i.focus()},function(){f=n.querySelector("button.close");f.onclick=t.hide;i=n.querySelector("button.undo");i.onclick=function(){t.undoTopSiteCommand.trigger()};o=n.getAttribute("data-msg-removed");e=n.querySelector("span");r=g(n,t.hide);u=nt(t.hide)}()}function v(n){var i=this,t=[];i.trigger=function(){var i=[n].concat(Array.prototype.slice.call(arguments)),r=Array.prototype.slice.call(t);r.forEach(function(n){n.apply(n,i)})};i.listen=function(n){typeof n=="function"&&t.push(n)};i.forget=function(n){if(n){var i=t.indexOf(n);i>=0&&t.splice(i,1)}};i.clear=function(){t.length=0}}function ct(n){return n&&n.length?Array.prototype.slice.call(n):[]}function g(n,t){if(n&&t){var i=function(i){lt(i.target,n)||t()},r=function(){e.removeEventListener("mousedown",i)},u=function(){r();setImmediate(function(){e.addEventListener("mousedown",i)})};return{enable:u,disable:r}}}function nt(n){return tt(27,null,n)}function tt(n,t,i){if(i){var r=function(r){r.keyCode!==n||r&&t&&r.target!=t||i(r)},u=function(){e.removeEventListener("keydown",r)},f=function(){e.addEventListener("keydown",r)};return{enable:f,disable:u}}}function lt(n,t){while(n&&n!==t)n=n.parentNode;return n===t}function y(n,t,i){if(n){var r=n.classList;return i?r.add(t):r.remove(t),i}}function it(n){s.grantCookieConsentAndDecorateLink(null,null,!0);n&&n.length&&at(n)}function at(n){n&&n.forEach(function(n){n&&n.grantCookieConsentCommand.clear()})}var w=n.constants,b=i.defaultIconUrl,rt=13,p,k;return require(["telemetryDataTypes"],function(n){p=n.TelemetryType}),k=l.constants.appInstallState,{topSiteView:d,topSitesView:ut,topSiteAddDialog:st,topSiteUndoDeletedDialog:ht}});require(["browserAccess","browserState","webStorage","topSitesModels","colorHelper"],function(n,t,i,r,u){function g(){var n=et(k);define("topSitesStorage",n,ot)}function et(){return["document","window","perfMarker"]}function ot(){function ot(n,t){ft&&(!n||n.length<=ft.count())||(ft=n?new r.topSiteCollection(n):ft||new r.topSiteCollection,t(ft))}function lt(n){if(n&&f){var t=[],i={},r=f,u=r.toJsLookup(function(n){return n.itemId});n=n.filter(function(n){return n.siteUrl});n.each(function(n,t){n.slotIndex=t;n.itemId?i[n.itemId]=!0:r.each(function(t){if(t.itemId&&n.siteUrl==t.siteUrl)return n.itemId=t.itemId,i[n.itemId]=!0,!1})});n.each(function(n,i){var r,f;if(!n.itemId){n.type==h.userselectedwebsite?y[n.siteUrl]||(y[n.siteUrl]=!0,t.push(ct(n,i))):t.push(ct(n,i));return}(r=u[n.itemId],r)&&(r.type!=n.type?(f=a[n.type],t.push({action:"update",faviconurl:nt(n.icon),itemid:n.itemId,slotindex:n.slotIndex,sourcetype:f,faviconsourcetype:d[f]})):r.slotIndex!=n.slotIndex&&t.push({action:"reorder",itemid:n.itemId,slotindex:n.slotIndex}))});r.each(function(n){n.itemId&&!i[n.itemId]&&(t.push({action:"delete",itemid:n.itemId}),delete y[n.siteUrl])});at(t,null)}}function at(t,i){t&&t.length&&(n.setTopSites(t),setTimeout(function(){n.getTopSitesAsync().then(function(n){i&&i(n)})},ut))}function vt(n){f=it(n);i.setObject(e,f.getJson());ht&&ht();ht=null}function ct(n,t){var f,i,r;return t<0||!n||!n.siteUrl||!n.type||!(f=a[n.type])?null:(i=u.parseColor(n.color),r=u.parseColor(n.background),{action:"add",url:n.siteUrl,slotindex:t,title:n.title,faviconurl:nt(n.icon),faviconbackgroundcolor:r&&r.r<<16|r.g<<8|r.b||16777215,faviconforegroundcolor:i&&i.r<<16|i.g<<8|i.b||0,faviconsourcetype:d[f],itemid:"{00000000-0000-0000-0000-000000000000}",sourcetype:f})}var st,t,g,ft,et,ht;return require(["c.topSitesReady","c.pageComplete"],function(){v&&k!==rt.BlankPage&&n.getTopSitesAsync().then(function(n){vt(n)})}),{initialize:function(n){t=i.getObject(c)||{};g=i.getObject(o)||{};et=i.getObject(b);st=n instanceof r.topSiteCollection?n:new r.topSiteCollection},getAppInstallsCache:function(){return JSON.tryParse(i.getItem(p))},getCurated:function(){return st},getDeletedDomainLookup:function(){return t},getDeletedUrlLookup:function(){return g},getMaxCurated:function(n){return Math.max(0,s.tryParseInt(i.getItem(w),s.tryParseInt(n,Infinity)))},getFrequents:function(t,u){var f,e,o;if(t=s.tryParseInt(t,0),t<=0){ft=new r.topSiteCollection;u(ft);return}f=!0;f?(e=!1,n.features.ServiceUIAvailable?n.getFrequentSitesAsync(t).then(function(n){n&&i.setItem(l,n);e||ot(n,u)}):ot(null,u),o=JSON.tryParse(i.getItem(l)),o&&(e=!0,ot(o,u))):n.features.ServiceUIAvailable?n.getFrequentSitesAsync(t).then(function(n){f&&n&&i.setItem(l,n);ot(n,u)}):ot(null,u)},getRenderList:function(){var n=JSON.tryParse(i.getItem(e))||[];return new r.topSiteCollection(n)},getPreviousSuggestedSitesData:function(){return et},deleteSite:function(n){var r=null,u,f;return n.domain&&(u=!t[n.domain],t[n.domain]=!0,i.setObject(c,t),f=!g[n.siteUrl],g[n.siteUrl]=!0,i.setObject(o,g),r=function(){u&&(delete t[n.domain],i.setObject(c,t));f&&(delete g[n.siteUrl],i.setObject(o,g))}),{undo:r||function(){}}},setAppInstallsCache:function(n){i.setItem(p,n)},setMaxCurated:function(n){(n=Math.max(0,s.tryParseInt(n,0)),n<=0&&st.count()<=0)||i.setItem(w,n)},setRenderList:function(n){tt(n);v&&lt(n)},setPreviousSuggestedSitesData:function(n){et=n;et&&et.lastUpdated>0&&et.lastIndex>=0&&i.setObject(b,et)}}}function nt(n){return n==null||n.indexOf("data:image")>=0?null:"https:"+n}function tt(n){var t=n&&n.getJson();t&&t.length?i.setObject(e,t):i.removeObject(e)}function st(n){f=it(n);f.count()>0&&!i.getItem(e)&&tt(f);g()}function it(n){var t=new r.topSiteCollection;return n&&n.forEach(function(n){var i=new r.topSite({color:n.faviconforegroundcolor?u.rgbNumberToCssHexColor(n.faviconforegroundcolor):"#000",background:n.faviconbackgroundcolor?u.rgbNumberToCssHexColor(n.faviconbackgroundcolor):"#fff",icon:n.faviconurl||n.faviconbase64,title:n.title,siteUrl:n.url,itemId:n.itemid,slotIndex:n.slotindex,type:h[n.sourcetype]});i.type&&t.add(i)}),t}var p="appInstallState",c="removedTopSites",o="removedTopSiteUrls",w="maxPrePopulatedSites",e="renderedSites",b="suggestedTopSites",l="frequentSites",s=r.utils,rt=t.constants.displayOptionValues,k=t.getDisplayOption(),ut=500,h={"default":"curated",frequent:"frequent",appromo:"suggested",userselectedwebsite:"user"},d={"default":"cms",frequent:"site",appromo:"cms",userselectedwebsite:"site"},a={};Object.keys(h).forEach(function(n){a[h[n]]=n});var ft=i.getItem(e),v=n.features.TopSiteStorage,f=null,y={};!v||ft||i.getItem(o)?g():n.getTopSitesAsync().then(function(n){st(n)})});define("topSitesController",["topSitesModels","topSiteViews","topSitesStorage","perfMarker","serviceuihelper","browserAccess","headData","mediator","viewport","appHelper","spartanTrackingHelper","errorCategory","coachMarks"],function(n,t,i,r,u,f,e,o,s,h,c,l){function ot(r){var h,c,w;if(v=document.getElementById("js-topsites"),!v){et(!1);return}tt=r||tt;document.body&&document.body.classList.add("has-ts");var e=nt.tryParseInt(v.getAttribute("data-maxcount"),8),g=i.getMaxCurated(e),y=nt.tryParseInt(v.getAttribute("data-maxaddsuggested"),4),it=nt.tryParseInt(v.getAttribute("data-maxsuggested"),0),ut=u.features.TH2Features,ot=v.getAttribute("data-useradded"),f=ut&&ot==="true",lt=v.getAttribute("data-inline-pin-to-taskbar-enabled")==="true",yt=v.getAttribute("data-inline-actions-disabled")==="true",pt=v.getAttribute("data-app-install-enabled")==="true";d=new kt(!0,pt);h=v.getAttribute("data-topsites");i.initialize(new n.topSiteCollection(h&&JSON.parse(h)));c=i.getCurated();a=new n.topSites;a.initialize({canAddUserSites:f,curatedSites:c,deletedDomainLookup:i.getDeletedDomainLookup(),deletedUrlLookup:i.getDeletedUrlLookup(),maxTopSiteCount:e,maxCuratedCount:g,maxAddSuggestionsPerGroup:y,maxSuggestedCount:it,previousRenderList:i.getRenderList(),stackingStrategy:b.topSiteStackingStrategy[f?"curatedFirst":"frequentsFirst"],suggestedSitesData:i.getPreviousSuggestedSitesData(),showFrequents:u.showFrequents()});c.count()||require(["track"],function(n){n.trackAppErrorEvent(l.getCuratedSitesData)});p=new t.topSitesView(v,{isUserAddedSitesEnabled:f,appLinkHandler:d,isInlinePinToTaskbarEnabled:lt,isInlineTopSitesActionsDisabled:yt});p.addTopSiteCommand.listen(st);p.removeTopSiteCommand.listen(ct);p.pinTopSiteCommand.listen(at);p.pinTopsiteToTaskbarCommand.listen(vt);f&&p.dragAndDropCommand.listen(ht);p.bind(n.createChildBindingContext(a,null));w=v.getAttribute("data-showfrequents")!=="false";i.getFrequents(w?e+y:0,function(n){rt.frequentSitesCount=n&&n.count()||0;a.setFrequents(n);var t=a.getSitesToRender(!0),i=d.updateAppInstalledState(t,function(){k(!0,!1);return},p.renderAppLinks);i.length&&d.canLaunchStore()&&v.className.indexOf("hover")>=0&&require(["trackInfo"],function(n){n.updateTemplValue("tshover:1")})});o.sub(s.sizeChangeEventName,function(){ft(v,!0)});o.sub(b.events.changeFreqsVisibility,function(n){a.showFrequents(n);k(!1,!0)})}function k(n,t){var r=a.getSitesToRender(t),u;p.render();et(!0);i.setMaxCurated(a.getDisplayedCuratedCount());i.setRenderList(r);i.setPreviousSuggestedSitesData(a.getSuggestedSitesData());wt(r);n&&(f.features.CanQueryFavIcons&&(u=r.filter(function(n){return!n.icon&&n.type===b.topSiteType.user}).map(function(n){return n.siteUrl}),f.getFavIconsAsync(u).then(function(n){yt(n)})),f.features.CanMapUrlsToAppIds&&require(["c.pageComplete"],function(){var n=r.filter(function(n){return n.domainAndPath&&n.type!==b.topSiteType.curated}).map(function(n){return n.domainAndPath});f.getAppIdMappingAsync(n).then(function(n){pt(n)})}))}function ft(n,t){if(y){var i=n.querySelector(".addsite"),r=i?i.getBoundingClientRect():null;y.positionAddDialog(n.getBoundingClientRect(),r,t,tt.addDialogPosition)}}function st(i,r,u){w&&w.hide();y=y||new t.topSiteAddDialog(document.getElementById("add-dialog"));y.bind(n.createChildBindingContext(a,null));y.newTopSiteCommand.clear();y.newTopSiteCommand.listen(function(n,t){a.addUserTopSite(t,r);d.updateAppInstalledState([t],function(){y.dismissedCommand.clear();y.newTopSiteCommand.forget(this);y.hide();g();k(!0,!0);var n=bt(t.siteUrl);n>=0&&p.focus(n)})});y.dismissedCommand.clear();y.dismissedCommand.listen(function(n,t){t||setImmediate(function(){p.focus(r)})});ft(u,!1);y.show()}function ht(n,t,i){a.moveSite(t,i);g();k(!0,!0)}function g(){o.pub("forcePageReload","5")}function ct(n,t){var r=a.getSitesToRender(),e=r.findIndexByKey(t,function(n){return n}),o=r.clone(),u;a.removeTopSite(t)&&(f.features.ServiceUIAvailable&&f.removeFrequentSite(t.siteUrl),u=i.deleteSite(t),lt(e,o,u),g(),setImmediate(function(){k(!0,!0)}))}function lt(n,i,r){var u,f;if(!w){if(u=document.getElementById("topsite-undo-dialog"),!u)return;w=new t.topSiteUndoDeletedDialog(u)}w.undoTopSiteCommand.clear();w.undoTopSiteCommand.listen(function(){var t=i.get(n);t&&((t.type===b.topSiteType.frequent||t.type===b.topSiteType.curated)&&(t.type=b.topSiteType.user),t.itemId=null,r.undo(),a.restoreRenderList(i),w.undoTopSiteCommand.forget(this),w.hide(),k(!0,!0),setImmediate(function(){p.focus(n)}))});f=document.activeElement;w.show();w.hideDialogCommand.listen(function(){})}function at(n,t){a.togglePinnedState(t);g();k(!0,!0)}function vt(n,t){var i=t.hasSchemelessCmsIcon();i||!t.icon.match(/^data:image\/png/i)?dt(t.icon,i,function(n){u.pinTopSiteToTaskbarAsync(t.title,t.siteUrl,n)}):u.pinTopSiteToTaskbarAsync(t.title,t.siteUrl,t.icon)}function et(n){if(it||(it=!0,define("c.topSitesReady",1)),n&&!ut){var t="TTTS";ut=!0;window.windowsPerfMarker(t);r(t,!0)}}function yt(n){var e,i,u,t,r,o,f;if(typeof n=="object"){e=a.getSitesToRender();i=[];for(u in n)t=n[u],t.icon&&e.each(function(n,r){n.siteUrl===u&&n.icon!==t.icon&&(n.icon=t.icon,n.background=t.background,n.color=t.color,n.backgroundFromAlgo=!0,i.push({site:n,index:r}))});if(i.length){for(r=0,o=i.length;r<o;r++)f=i[r],a.addUserTopSite(f.site,f.index);k(!1,!0)}}}function pt(n){var f=v&&v.getAttribute("data-invalid-app-urls"),i=f&&f.split("|"),r=i?i.length:0,t,u;(r||Object.keys(n).length)&&(t=!1,u=a.getSitesToRender(),u.each(function(u){var c=u.siteUrl,l=u.domainAndPath,s=!0,f=n[l],e,h,o;if(f){if(r)for(e=0;e<r;e++)if(h=i[e],c.indexOf(h)>0){s=!1;break}s?(u.title=f.title,u.hasAddOns=f.hasAddOns,o=[],f.packageFamilyName&&o.push(f.packageFamilyName),f.productId&&o.push(f.productId),u.setAppIds(o,!0),u.installEnabled==null&&f.isFree&&d.canInstallApp()&&(u.installEnabled=!0),t=!0):u.hasApp()&&(u.setAppIds(null,!0),t=!0)}}),t&&d.updateAppInstalledState(u,function(){k(!1,!0);require(["trackInfo"],function(n){n.updateTemplValue("tsAppIdMapping");o.pub("ViewabilityUpdatedEvent")})}))}function wt(t){var f=t.filter(function(n){return!!n.siteUrl}).count(),u,r;f||(u={cc:i.getCurated().count(),fc:rt.frequentSitesCount,uc:i.getRenderList().filter(function(t){return t.type==n.constants.topSiteType.user}).count(),mc:i.getMaxCurated(),dc:Object.keys(i.getDeletedDomainLookup()).length},r=l.zeroTopSitesError,require(["track"],function(n){n.trackAppErrorEvent({errId:r.errId,errSource:r.errSource,errMsg:JSON.stringify(u)})}))}function bt(n){var t=-1;return a.getSitesToRender().each(function(i,r){if(i.type===b.topSiteType.user&&i.siteUrl===n)return t=r,!1},null,!0),t}function kt(n,t){function w(t){var r=l[t.pid];r&&(t.success&&(s[r.aumId||r.pfn]=!0,n&&i.setAppInstallsCache(s)),a.forEach(function(n){n(t)}))}function b(t,r,u){var o,e;if(!f.features.CanGetAppInstalledState){r();return}o=!1;t=h.filterAppIdsForAppInstallStateCheck(t,f.features.CanLaunchAppWithPfnOrAumId);e=function(t,r){t&&t.forEach(function(n){s[n.appId]=n.installed});n&&i.setAppInstallsCache(s);r&&r();return};t.length?(f.getAppInstalledStateAsync(t).then(function(t){var i=n&&o?u:r;e(t,i)}),n&&!t.some(function(n){return!s.hasOwnProperty(n)})&&(o=!0,e(null,r))):e(null,r)}var r=this,s=n&&i.getAppInstallsCache()||{},l={},a=[],v=f.features.CanLaunchApp,y=u.features.CanInstallApp,p=(!e||!e.clientSettings||!e.clientSettings.os_region||!e.clientSettings.apps_locale||e.clientSettings.apps_locale.split("-")[1]===e.clientSettings.os_region)&&(!u.features.GroupPolicy||u.features.IsStoreEnabled);u.features.CanInstallApp&&o.sub(u.events.appInstallProgress,w);r.canInstallApp=function(){return y&&t};r.canLaunchApp=function(){return v};r.canLaunchStore=function(){return p};r.getTopSiteAppInstallState=function(n){var t=n.appIds,i,u,r;if(!t||!t.length)return null;for(i=0,u=t.length;i<u;i++)if(r=t[i],s[r])return{appId:r,installed:!0}};r.launchApp=function(n){v&&f.launchApp(n)};r.updateAppInstalledState=function(t,i,r){var u=[];return(t.each||t.forEach).call(t,function(t){var i={};t.appIds&&t.appIds.forEach(function(t){n?u.push(t):s[t]==null&&u.push(t);var r=h.tryParseAppId(t);r.pfn&&(i.pfn=r.pfn);r.aumId&&(i.aumId=r.aumId);r.bigCatId&&(i.bigCatId=r.bigCatId)});["pfn","aumId","bigCatId"].forEach(function(n){var t=i[n];t&&(l[t]=i)})}),b(u,i,r),u};r.installApp=function(n,t){c.installAppAndTrack(n,t)};r.addAppInstallListener=function(n){a.push(n)}}function dt(n,t,i){var r=new Image;r.setAttribute("crossOrigin","anonymous");r.onload=function(){var n=document.createElement("canvas"),u=n.getContext("2d"),t;n.height=this.height;n.width=this.width;u.drawImage(r,0,0);t=n.toDataURL("image/png");i(t)};r.src=t?"https:"+n:n}var it=!1,nt=n.utils,b=n.constants,tt={addDialogPosition:b.addDialogPosition.bottom},p=null,y=null,w=null,d,a,rt={},v,ut;return{initialize:ot}});define("office365Feed.tokens",function(){return{allowedOrigin:"https://www.office.com",defaultPivot:"False",tmpl:""}});define("staticsLoaderHelper",["document"],function(n){function r(r){if(t&&r){var u=n.createElement("script");u.src=i(r);u.async=!0;t.appendChild(u)}}function u(r,u){if(t&&r){var f=n.createElement("link");return f.rel="stylesheet",f.href=i(r),f.media="all","function"==typeof u&&f.addEventListener("load",u),t.appendChild(f),!0}return!1}function i(n){return n.replace(/&amp;/g,"&")}var t=n.getElementsByTagName("head")[0];return{loadJs:r,loadCss:u}});define("spartanTrackingHelper",["window","serviceuihelper","browserState","track","trackInfo","trackingConstants","telemetry.constants","asimovHelper","domHelper","getCookie","newsFeedFilterHelper","spartanConstants","errorCategory"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){function v(t){n.console&&n.console.log&&console.log(t)}function y(n,f){if(n){var s=t.tryUpdateTelemetryFields(n),o=n.sitePage;u.updateSitePage(o.templ,o.flightid,o.requestId);u.updateFeedMetadata(o.feedId,o.feedName,o.feedType);s||r.hasPageViewEventFired()||(require(["persistentStorageManager","c.trackExtComplete"],function(n){var u={e1:null,scp:w(n.fetchProperty("StructuredDataCardsUserPreference"))},o;t.features.CanHideOrShowFrequents&&(u.sf=t.showFrequents()?1:0);o=i.getEdgeExperiments();o instanceof Array&&o.length&&(u.ex=JSON.stringify(o));f&&(u.ar=1,r.preventBeacon(e.Ctag),r.preventBeacon(e.Comscore));r.trackPage(u)}),require(["postdata"],function(n){n.post()}))}}function p(n){f&&f.trackingData&&(f.trackingData.lastIndex=n)}function w(n){var t,e,i,l,o,s,r,c,f;if(!n)return"";t=[];for(e in n)i=n[e],i&&i.v&&(l=i.hasOwnProperty("p")?i.p:Number.MAX_VALUE,t.push({i:l,n:e}));for(t.sort(function(n,t){return n.n.length-t.n.length}),o=[],s=t.length,r=0;r<s;r++){var a=0,u="",h=t[r],v=h.n.length;do u=h.n.substring(0,++a);while(o.indexOf(u)!==-1&&a<v);h.n=u;o.push(u)}for(t.sort(function(n,t){return n.i-t.i}),c=[],f=0;f<s;f++)c.push(t[f].n);return c.join(",")}function b(n){var t=n||"my_news_feed",i=h(l.cookieNames.contentFilter);i&&i.length>=1&&(t=c.topicsTelemetryValueMapping[i]||t);u.trackCustomProperty("tp",t);u.setCustomTagsForClickEvent("tp",t);u.updateTemplValue(t)}function k(n){var t=a.missingContentError,i=t.errMsg+n;r.trackAppErrorEvent({errId:t.errId,errMsg:i,errSource:t.errSource})}function d(n){var t=a.riverJsonParseError,i=t.errMsg+n;r.trackAppErrorEvent({errId:t.errId,errMsg:i,errSource:t.errSource})}function g(n,i){var u,f;n&&i&&(u=o.generateCV(),t.installApp(n,u),f=JSON.tryParse(nt(i))||{},f.cv=u,r.trackEvent({type:"click_nonnav",target:i},i,null,JSON.stringify(f)))}function nt(n){var t=u.telemetryHLAttribute,i=s.selfOrAncestorWithAttribute(n,t);return i&&i.getAttribute(t)}return{isImpressionSuppressed:!1,log:v,trackMissingContentError:k,trackJsonParseError:d,updateFilterTelemetry:b,installAppAndTrack:g,updateTrackingInfo:y,updateLastTelemetryIndex:p}});define("riverLoader",["window","location","document","ajax","headData","displayOptionsHelper","serviceuihelper","spartanTrackingHelper","staticsLoaderHelper","track","trackingConstants","trackInfo","mediator","perfMarker","freExperienceHelper","getCookie","setCookie","escape","promise","errorCategory","spartanConstants","spartanPageDetectionHelper","pageComplete"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt){function pi(){var n=st.getAttribute("data-ajaxurl"),i;if(!n)return null;var u=n.indexOf(bt)<0?bt:wt,t=[],r=rr();for(i in r)t.push(i+"="+r[i]);return t.push(oi),n+u+t.join(wt)}function wi(n){if(!n){pt("Invalid response for the request",d.invalidAjaxResponse);et();ut();return}er(function(){ki(n)},ui&&yi)}function bi(){var n=d.dhpNoAppCacheError,t=n.errMsg+"Market: "+p(ti);h.trackAppErrorEvent({errId:n.errId,errMsg:t,errSource:n.errSource})}function ki(t){var y=new n.DOMParser,a=y.parseFromString(t,"text/html"),f,e,h,c,l,i,r,v;if(it=a&&a.getElementById(ct),!it){ft(ct);return}if(ht||ui||!p(ti)||(w(ni.noAppCache,"",-1),require([ai],function(){bi()})),f="data-css",e=it.getAttribute(f),!e){ft(f);return}if(h="data-js",c=it.getAttribute(h),!c){ft(h);return}if(l=it.getAttribute("data-xd-id"),st.setAttribute("data-xd-id",l),u.kernelXd=u.xdid,u.xdid=l,or(sr(it),it.getAttribute("data-sso")),vt=null,i=it.getAttribute("data-track-info"),i)try{vt=JSON.parse(i.replace(/&quot;/g,'"'))}catch(b){fi("Error parsing trackInfo from the AJAX response: "+i,i)}r=it.getElementsByClassName("cstli-js");r&&r.length&&o.updateLastTelemetryIndex(r[0].getAttribute("data-lastIndex"));s.loadCss(e,function(){lt(it)});s.loadJs(c);require(["spartanJQueryLoader"],function(n){n()});v=it.getAttribute("data-adsurl");s.loadJs(v);require(["delayLoadModulesTest"],function(){lt(it)})}function fi(n,t){o.log(n);o.trackJsonParseError(t)}function ft(n){var t="Cannot find "+n;o.log(t);o.trackMissingContentError(n);l.trackCustomProperty("dq","0");et();ut();ii(t)}function di(n){n.target&&n.target.id===ct&&n.propertyName==="opacity"&&yt()}function yt(){if(!kt){var t="TTAFAnimation";v(t,!0);n.windowsPerfMarker(t);define(vi,1);kt=!0}}function gi(){var t,n;return(rt=i.getElementById(dt),!rt)?(ft(dt),k.reject("Missing content.")):(u.ispreload?yt():rt.addEventListener("transitionend",di),t=i.getElementById(gt),!t)?(ft(gt),k.reject("Missing content.")):(n=[ri],at&&n.push(li),i.querySelector(".srl-js")&&n.push("c.readingListReady"),new k(function(i){require(n,function(){var n,r,f;define("c.readyForRiver",1);rt.classList.add("populated");var e=rt.querySelector(".newsfeedfilter.selected, .feedfilter.selected"),s=rt.getElementsByClassName("related-button selected"),h=e&&e.textContent.trim()||s.length&&s[0].textContent;o.updateFilterTelemetry(h);n=!1;r=it.getAttribute("data-version");r&&(f=u.clientSettings,f&&f.v!==r&&(n=!0));o.updateTrackingInfo(vt,n);i(nr(t))})}))}function nr(n){return new k(function(t,i){ei(n)&&t();var u=0,r=setInterval(function(){if(ei(n))clearInterval(r),t();else if(++u>=30){clearInterval(r);var f="Reached maximum attempts for river section items. Firing TrackPage beacon";i(f);pt(f,d.riverRenderError);ut()}},200)})}function ei(n){return n&&tr(n,"populated")?(yt(),require([ci],function(){o.log("River section items are populated now. Firing the tracking beacon.");ut(!0)}),!0):!1}function tr(n,t){return n.classList&&n.classList.contains(t)||(" "+n.getAttribute("class")+" ").indexOf(" "+t+" ")>=0}function ir(){require([ri],function(){var n={sitePage:{flightId:l.sitePage.flightId,requestId:p(g.cookieNames.activityId)}};o.updateTrackingInfo(n)})}function rr(){var o=0,u="",f=ur(),e=i.getElementById("maincontent"),t,s,r,n;if(e&&(u=e.getAttribute("data-id"),t=e.querySelectorAll("[data-m]"),t))for(s=t.length,r=s-1;r>=0;r--)if((n=fr(t[r],"data-m"),n)&&(f||(f=n.i),n.p===+u)){o=n.o;break}return{telemetrystartindex:f,telemetryparentindex:u,telemetryordinalstartindex:o+1}}function ur(){var n=0;return c&&c.trackingData&&!isNaN(parseFloat(c.trackingData.lastIndex))&&isFinite(c.trackingData.lastIndex)&&c.trackingData.lastIndex>=1&&(n=c.trackingData.lastIndex),n}function fr(n,t){var i=n.getAttribute(t);if(i)try{return JSON.parse(i)}catch(r){fi("parseDomAttributeJson failed to parse attribute '"+t+"': "+r,i)}return null}function ut(n){n||ir();tt({shouldWaitForRiverReady:ot,waitForTopSitesReadyCanary:at})}function er(n,t){t?require([t],n):n()}function or(n,t){var i=0,r=u.signedin;n&&(i=n.isAuthenticated=n.isAuthenticated&&n.isAuthenticated.toUpperCase()==="TRUE",n.cid=typeof n.cid=="number"?n.cid.toString():n.cid,u.anonckname=n.anonckname);u.signedin=+i||0;u.modified=r!==u.signedin;u.sso=!i&&t;et()}function et(){define("c.headDataUpToDate",1)}function sr(n){var t=n&&n.dataset;return t&&{cid:t.cid,memberName:t.memberName,lastName:t.lastName,firstName:t.firstName,isAuthenticated:t.isAuthenticated,meUrl:t.meUrl,signOutUrl:t.signOutUrl,signInUrl:t.signInUrl,anonckname:t.anonckname}}function pt(n,t){n&&o.log(n);t&&h.trackAppErrorEvent(t)}function hr(){return new k(function(n,u){lt=n;ii=u;st=i.getElementsByTagName("head")[0];ot=pi();var o=ot&&f.shouldRenderRiver()&&!(hi&&t.search&&t.search.toLowerCase().indexOf("enableregulatorypsm=1")>=0);if(at=i.querySelector("[data-section-id='section.apps.topsites']"),!o){et();a.pub("updatePageInstance");ut();n();return}e.getNtpWebIG()||(a.pub("updatePageInstance"),require(["postdata"],function(n){n.post()}));y.setFreExperienceMarker(ht);r.get({url:ot,dataType:"html",success:wi,error:function(n,t){var i=d.ajaxServerError,r={errId:i.errId,errMsg:i.errMsg+n,errSource:i.errSource};pt("Delay loading failed: "+t,r);et();ut()}})})}var st=null,ot=null,oi="ou="+b.urlPart(t.href),wt="&",bt="?",kt=!1,si=t.pathname,ht=nt.isSomeNtpPage,hi=!ht&&si.indexOf("/dhp")>=0,ct="contentsection",dt="delayloadedcontent",gt="riversection",ni=g.cookieNames,ti=ni.marketSelection,lt,ii,ri="c.appCacheUpdateCheckDone",ci="c.riverReady",li="c.topSitesReady",ai="c.pageComplete",vi=g.canaries.ttafAnimation,yi="c.topSites",ui=f.shouldRenderTopSites(),at,rt,vt,it;return{loadAsync:hr,performPostAttachActionsAsync:gi}});require(["browserAccess"],function(n){n.features.PersistentStorage?n.fetchPageSettingsAsync().then(function(n){define("initialPersistentSettings",n||"N/A")}):define("initialPersistentSettings","N/A")});define("pageCustomization",["window","document","track","location","displayOptionsHelper","serviceuihelper","browserAccess","browserState","mediator","cookieComplianceHelper","setCookie","getCookie","persistentStorageManager","newsFeedFilterHelper","navigator","freExperienceHelper","confirmationDialog","pageCustomization.tokens","headData","sdCardFilterHelper","spartanConstants","spartanPageDetectionHelper","navigation","c.dom"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt){function nf(){var n=t.getElementById(su),r,i;n&&(r=n.querySelector(iu),cr(r),i=n.querySelector(uu),i&&i.addEventListener(ut,ar))}function cr(n){n&&n.addEventListener(ut,oi)}function tf(n){lt=lt||t.getElementById(ou);it&&lt&&(n?(it.removeAttribute(wi),lt.classList.remove(vi)):(it.setAttribute(wi,"true"),lt.classList.add(vi)))}function rf(i){function b(n){if(e&&e.length){var t=e[0];n?(t.title=t.innerHTML="Hide Feed",t.classList.remove("hidden")):(t.title=t.innerHTML="Customise",nt.isDhpPage&&st==="zh-cn"?t.classList.remove("hidden"):t.classList.add("hidden"))}}var h,e,o,r;er=i||{};et=t.body;h=t.getElementById(tu);e=t.getElementsByClassName(ai);yt=t.querySelector(rr);var a=yt&&yt.querySelector(hu),p=t.getElementById(ur),w=t.getElementById(fr),c=t.getElementsByClassName(ku),l=t.getElementsByClassName(du);if(!y.onLine){lf(e);return}if(it=t.getElementById(eu),it&&(st=at=it.value,it.addEventListener(kt,pr)),b(u.getNtpDisplayOptionValue()==ht),n.addEventListener(ru,oi),h&&h.addEventListener(ut,uf),w&&w.addEventListener(ut,function(n){n.stopImmediatePropagation();ef()}),p&&p.addEventListener(ut,of),a&&a.addEventListener(ut,function(n){n.preventDefault();f.openEdgeSettingsPane()}),wr(f.showFrequents()),s.sub("changeFrequentsVisibility",wr),di||fi)for(o=c&&c.length,r=0;r<o;r++)c[r].addEventListener(ut,function(){var n=u.shouldRenderTopSitesOnly(),t=er.forceRefresh||!n||fi;(bt(ht,t),fi)||(s.pub("updatesearchformcodes"),n&&(b(!0),u.configurePageToShowSuggestedContent(),require(["delayLoadModules"],function(n){n()})))});for(o=l&&l.length,r=0;r<o;r++)l[r].addEventListener(ut,ar);for(o=e&&e.length,r=0;r<o;r++)cr(e[r]);if(rt=t.getElementsByName(ei),rt)for(o=rt.length,r=0;r<o;r++)rt[r].addEventListener(kt,yr),rt[r].addEventListener(kt,si),rt[r].addEventListener(kt,hi);ci=v.setup();li=d.setup();s.sub(gu,oi);af()}function uf(){f.exitSettingsMode();f.enableOneBoxAnimation(!0);f.showOneBox(!0);vr();pr();v.hide();d.hide();et.classList.remove(pt);var n=dr();n&&n.classList.remove(pt);et.scrollTop=0;s.pub(ki)}function ff(){c(ot.contentFilter,"",-1);c(ot.relatedFilter,"",-1);c(ot.feedFilter,"",-1,r.host,"/"+k.clientSettings.vk+"/")}function lr(){h.grantCookieConsentAndDecorateLink(event,null,!0);var n=it&&it.options.length&&it.value;return p.isEdgeStartModalOpen()&&(n=ft&&ft.options.length?ft.value:""),n&&n.toUpperCase()!==st.toUpperCase()?(at=n,gr(at),!0):void 0}function ef(){var n=t.getElementById(fr);sf();lr();var u=v.saveSelectedFilters(),f=d.saveSelectedFilters(),e={action:"save",fromShow:pi[dt],toShow:pi[ni],fromMkt:st,toMkt:at,fromTopics:ci,toTopics:u,fromSDCardsSelection:li,toSDCardsSelection:f},o=JSON.stringify(e);i.trackEvent({type:ut+"_nonnav",target:n},null,r.href,o,"customization_page_save");ii()}function of(){w.show(b.resetDialogTitle,b.resetDialogMessage,b.resetDialogConfirm,b.resetDialogCancel,function(n){var u,f;n&&(bt(ht,!1),a.clear(),e.features.TopSiteStorage&&e.clearTopSites(),u=t.getElementById(ur),i.trackEvent({type:"click_nonnav",target:u},null,r.href,lu,"customization_page_reset"),f=tt.getParamsFromUrl(r.href).locale||"",gr(f),ii("pcResetSettings"))})}function sf(){var n,i,r;for(rt=rt||t.getElementsByName(ei),ct=ct||rt&&rt.length,i=0;i<ct;i++)if(n=rt[i],vt===ri){if(n.checked){r=ni=Number(n.value);bt(r);break}}else vt===ui&&(r=ni=n.checked?gt:ht,bt(r))}function oi(){var n,i;y.onLine&&(s.pub(or),hf(),vr(),d.show(),v.show(),f.showOneBox(!1),f.enableOneBoxAnimation(!1),et.classList.add(pt),n=dr(),n&&n.classList.add(pt),i=t.getElementsByClassName(cu),i&&i[0].focus())}function hf(){var n,i;for(dt=ni=u.getNtpDisplayOptionValue(),rt=rt||t.getElementsByName(ei),ct=ct||rt&&rt.length,i=0;i<ct;i++)n=rt[i],vt===ri?(n.checked=n.value==+dt,n.checked&&(si.call(n),hi.call(n))):vt===ui&&(n.checked=gt==+dt,yr.call(n),si.call(n),hi.call(n))}function ar(){bt(gt,!0)}function bt(n,t){u.setNtpDisplayOptionValue(n);t&&ii()}function ii(n){s.pub("forcePageReload","2");et.classList.remove(pt);et.classList.add(au);f.enableOneBoxAnimation(!0);f.showOneBox(!0);bi?cf(n):require(["spartanSharedHelper","errorCategory"],function(t,i){t.refreshPage(!1,i[n]||i.pcSettingsChanged)})}function cf(n){require(["appCacheHelper","errorCategory"],function(t,i){t.forceUpdate(i[n]||i.pcSettingsChanged)})}function vr(){st&&it&&(it.value=st)}function si(){var t=+this.value,n=t===ht;tf(n);d.enableFilterOptions(n)}function hi(){v.enableFilterOptions(!(this.value&&Number(this.value)))}function yr(){vt===ui&&(this.value=this.checked?gt:ht)}function pr(){it&&it.value&&(v.updateFilters(it.value),d.updateFilters(it.value),i.trackPartialImpression(it))}function lf(n){for(var f=n&&n.length,r="hidden",u=t.getElementById(fu),i=0;i<f;i++)n[i].style.visibility=r;u&&(u.style.visibility=r)}function wr(n){yt&&(yt.style.display=n?"none":"block")}function af(){var i=a.fetchProperty(gi),n=p.getStartModalMask();n&&(sr=t.getElementById(yu),ft=t.getElementById(pu),ti=t.getElementById(wu),hr=t.getElementById(vu),wt=n.getAttribute(bu),n.addEventListener(ut,kr),sr.addEventListener(ut,function(n){n.stopPropagation()}),hr.addEventListener(ut,kr),ti.addEventListener(ut,vf))}function vf(){var f=lr(),u;if(f){var n=ft&&ft.options,e=n&&n[ft.selectedIndex].getAttribute("data-js-sug")==="1",t={suggested:e,toMkt:at};wt&&wt.indexOf("_lt")>0&&(t.showCntnt=!0);u=JSON.stringify(t);i.trackEvent({type:ut,target:ti},null,r.href,u);ii("pcSaveEdgeModal")}else i.trackEvent({type:"click_nonnav",target:ti},null,r.href,wt+"_dismiss_getstarted"),br()}function br(){p.closeEdgeStartModal();p.setFreExperienceMarker(di)}function kr(n){n&&(n.stopPropagation(),i.trackEvent({type:"click_nonnav",target:n.target},null,r.href,wt+"_dismiss_outer"));br()}function dr(){return t.getElementById("searchhistory")}function gr(n){bi&&l(ot.marketSelection)||nu();a.saveProperty(gi,{m:n});a.saveProperty("FreDialogExistingUser","false");ff()}function nu(){c(nr,undefined,-1);c(nr,1,3650,undefined,"/spartan/")}var et,tu="cancelsettings",kt="change",ut="click",ot=g.cookieNames,st,dt,ci,li,ai="customizesettings",iu="."+ai,vi="disabledMarketSelection",yi=o.constants.displayOptionValues,gt=yi.TopSitesOnly,ht=yi.TopSitesAndSuggestedContent,pi=["TopSitesAndNewsFeed","TopSites","Blank"],wi="disabled",ru="entersettingsmode",bi=!!t.querySelector("html[manifest]"),ki="hideCustomizationPage",uu=".hidenewsfeed",fu="inlinesettings",ri="radio",ui="checkbox",di=nt.isSomeNtpPage,fi=nt.isSomeDhpPage,gi="MarketSelection",it,eu="marketselectorsettings",lt,ou="marketselectionsectionsettings",ni,at,nr=ot.noAppCache,tr=".ntoptions",ir=t.querySelector(tr),vt=ir?ir.getAttribute("data-type")||ri:"",ei="displayOption",rt,ct,su="ntss",yf=ot.childMode,rr=tr+" p",hu=rr+" a",yt,cu="settingscontent",ur="resetsettings",lu='{action:"reset"}',au="savesettings",fr="savesettings",er,or="showCustomizationPage",pt="showsettings",sr,pf=f.features.TH2Features,hr,vu="startmodalclose",yu="startmodal",ft,pu="startmodalmarketselector",ti,wu="startmodalstart",wt,bu="js-tpre",ku="showtopsitesandnewsfeed",du="showtopsites",gu="triggerShowCustomizationPage";return require([g.canaries.marketCookieNotFound],function(){nu()}),{bindRiverSectionHeaderButtons:nf,hideCustomizationPageEventName:ki,render:rf,showCustomizationPageEventName:or}});define("newsFeedFilterHelper",["document","persistentStorageManager"],function(n,t){function v(){if(i=n.getElementById("filter_options"),s=n.getElementById("filters_holder"),s&&i&&(s.appendChild(i),r=i&&i.querySelectorAll("button"),f=r&&r.length,f)){for(var t=0;t<f;t++)r[t].addEventListener("click",tt);return nt()}return[]}function y(){var t,s,o,n;if(i&&i.classList&&i.classList.add("displayed"),r)for(t=u?u.v:[],s=t&&t.length,o=0;o<f;o++)n=r[o],s>0&&t.indexOf(n.getAttribute(l))>-1?n.classList.add(e):n.classList.remove(e),w(n)}function k(){i&&i.classList&&i.classList.remove("displayed")}function d(){var i={},n,o,u;for(i.v=[],n=0;n<f;n++)r[n].classList.contains(e)&&(o=r[n],u=o.getAttribute(l),u&&i.v.push(u));return t.saveProperty(h,i),b(i.v)}function p(n){var t,u;if(i&&i.classList)for(n?i.classList.remove(c):i.classList.add(c),t=0;t<f;t++)u=r[t],u&&(n?u.removeAttribute("disabled"):u.setAttribute("disabled","true"))}function g(){return u=t.fetchProperty(h),u&&u.v!=undefined}function nt(){return u=t.fetchProperty(h),u?b(u.v):[]}function tt(){this.classList&&this.classList.toggle(e);w(this)}function w(n){if(n){var t=n.classList&&n.classList.contains(e),i=t?n.getAttribute("data-al-on"):n.getAttribute("data-al-off"),r=t&&n.getAttribute("data-tt-on")?n.getAttribute("data-tt-on"):n.getAttribute("data-tt-off");i&&n.setAttribute("aria-label",i);r&&n.setAttribute("title",r)}}function it(n){require(["refreshModules","headData"],function(t,r){var u=r.moduleapi,f;u&&i&&(p(!1),o=new Image,o.src=i.dataset.loadingGif,i.insertBefore(o,i.children[0]),o.classList.add("loading"),u=u.replace(/\/\D\D-\D\D\//,"/"+n+"/"),f={loadEmptyContent:!0},t(i,"pcsl=true",null,null,!0,u,n,!0,f).then(function(){v();y()}))})}function b(n){var i,u,t,f,r;if(n){for(i=[],u=n.length,t=0;t<u;t++)f=n[t].toUpperCase(),r=a[f],r&&i.push(r);return i.sort()}return[]}var c="dfa",r,i,f,l="data-c",s,e="sf",u,h="TopicSelection",a={A:"News",B:"Weather",C:"Entertainment",D:"Sports",E:"Finance",F:"Lifestyle",G:"Health",H:"FoodAndDrink",I:"Travel",J:"Autos",K:"Video",L:"Homepage",AW:"World",AU:"US",AC:"Crime",AP:"Politics",AT:"Technology"},o;return{enableFilterOptions:p,hasSavedSelectedFilters:g,hide:k,saveSelectedFilters:d,setup:v,show:y,topicsTelemetryValueMapping:a,updateFilters:it}});define("sdCardFilterHelper",["document","persistentStorageManager","mediator"],function(n,t,i){function c(){var e,i,f,s;if(r=n.getElementById("sdcardsettings"),e=n.getElementById("sdcardsettings_holder"),e&&r){if(e.appendChild(r),i=r.querySelectorAll(o),i)for(f=0;f<i.length;f++)s=i[f],s.addEventListener("click",tt);return t.fetchProperty(u)||[]}return[]}function l(){var n,f,i,h;if(r){if(n=r.querySelectorAll(s),!n.length)return;if(r.style.display="",r.classList&&r.classList.add("displayed"),f=n&&t.fetchProperty(u),f)for(i=0;i<n.length;i++){var e=n[i],l=e.getAttribute("data-storage-key"),o=f[l],c=!o||o.v==undefined||o.v;e.checked=c;h=e.parentElement.querySelector(v);h.innerText=h.getAttribute("data-"+(c?"on":"off"))}}}function y(){r&&r.classList&&r.classList.remove("displayed")}function p(){var n=t.fetchProperty(u)||{},e=r&&r.querySelectorAll(s),f;if(e){for(f=0;f<e.length;f++){var l=e[f],o=l.getAttribute("data-storage-key"),c=n[o]||{};c.v=+l.checked;n[o]=c;i.pub(h+o,c)}t.saveProperty(u,n)}return n}function a(n){var t=r&&r.querySelectorAll(o);t&&(n?(d(t),r.classList.remove(e)):(k(t),r.classList.add(e)))}function w(){return!!t.fetchProperty(u)}function b(n){require(["refreshModules","headData"],function(t,i){var u=i.moduleapi;u&&r&&(a(!1),f=new Image,f.src=r.dataset.loadingGif,r.insertBefore(f,r.children[0]),f.classList.add("loading"),u=u.replace(/\/\D\D-\D\D\//,"/"+n+"/"),t(r,"pcsl=true",null,null,!0,u,n,!0).then(function(){c();l()}))})}function k(n){for(var t=0;t<n.length;t++)n[t].setAttribute("disabled","true")}function d(n){for(var t=0;t<n.length;t++)n[t].removeAttribute("disabled")}function g(n,t){if(n){var i=n.getAttribute("data-al-"+(t?"on":"off"));n.setAttribute("aria-label",i)}}function nt(n,t){n&&(n.innerText=n.getAttribute("data-"+(t?"on":"off")))}function tt(n){var t=n&&n.currentTarget,i,r;t&&(i=t.parentNode&&t.parentNode.previousElementSibling,i&&(r=!i.checked,i.checked=r,g(t,r),nt(t.firstElementChild,r)))}var e="disabledMarketSelection",f,u="StructuredDataCardsUserPreference",o=".sw-input, .sw-focus",s=".sw-input",v=".switch .sw-focus span",r,h="sdcardfiltersaved";return{enableFilterOptions:a,hasSavedSelectedFilters:w,hide:y,saveSelectedFilters:p,sdCardFilterSavedEventPrefix:h,setup:c,show:l,updateFilters:b}});define("pageCustomization.tokens",function(){return{resetDialogTitle:"Are you sure?",resetDialogMessage:"Resetting your defaults will clear your language and personalisation settings.",resetDialogConfirm:"Reset",resetDialogCancel:"Cancel"}});require(["pageCustomization","c.dom"],function(n){n.render()});define("confirmationDialog",["document","confirmationDialog.tokens"],function(n,t){function k(){if(i=n.getElementById(y),i){c=i.querySelector(b);h=i.querySelector(w);var t=i.getElementsByTagName(p);u=t[0];r=t[1];f=n.getElementById("spfooter")}}function d(n,y,p,w,b){i&&(s=b,f&&f.setAttribute(a,-1),c.innerText=n||"",h.innerText=y||"",r.innerText=w||t.defaultCancelTitle,u.innerText=p||t.defaultConfirmTitle,r.onclick=function(){e(b,!1)},u.onclick=function(){e(b,!0)},r.onblur=function(){u.focus()},u.onblur=function(){r.focus()},window.addEventListener(l,v,!1),i.classList.add(o),i.setAttribute("aria-label",y),r.focus())}function v(n){n.keyCode===27&&e(s,!1)}function e(n,t){window.removeEventListener(l,v,!1);f&&f.removeAttribute(a);i.classList.remove(o);n&&n(t)}var r,i,y="confirmationdialogmask",o="showconfirmationdialog",p="button",s,h,w="span",c,b="h3",u,l="keyup",f,a="tabindex";return{initialize:k,show:d}});define("confirmationDialog.tokens",{defaultCancelTitle:"Cancel",defaultConfirmTitle:"OK"});require(["confirmationDialog","c.dom"],function(n){n.initialize()});define("searchHistoryHelper",["eduSkuHtmlSearchProperties"],function(n){function i(n){t=Object.assign&&Object.assign(t,n)||n||{}}function r(i,r){var u,f;if(i&&i.Url)return u=i.Url,r&&(u+="&FORM="+r),t.addEduParams&&(f=n.getAsQueryParameterString(),f&&(u+="&"+f)),u}var t={addEduParams:!1};return{setup:i,processItemUrl:r}});define("searchHistory.tokens",{Header:"Recent Searches:",ManageHistoryText:"Manage History",ManageHistoryUrl:"https://www.bing.com/profile/history?rp=%2f&FORM=O2LH",SearchHistoryItemLinkText:"Recent search history result{0} : {1}",SpartanFetchSearchHistoryUrl:"https://www.bing.com/profile/history/data",SpartanManageHistoryUrl:"https://www.bing.com/profile/history?FORM={0}"});define("searchHistory",["window","jquery","jqBehavior","format","pageInstance","trackInfo","viewAware","searchHistory.tokens","telemetryDataTypes"],function(n,t,i,r,u,f,e,o,s){function c(i,h){function k(){e.currentView()&e.views.SIZE4COLUMN?(l+=h.fourColAdj,a++):(l=h.maxLength,a=h.maxResults)}function d(){t.ajax({url:h.shUrl,dataType:"text",cache:!1,xhrFields:{withCredentials:!0},success:function(n){g(n)}})}function g(n){var t=!1;f.sitePage&&f.sitePage.page_name===s.TelemetryPageName.VideoPageNames.ChannelPlayerPage.PageName&&(t=!0);t?require(["c.deferred"],function(){y(n)}):y(n)}function y(n){var y,l,e,b,o,d,s,v,g,ut,ft,et;try{if(n&&n.length>2&&(k(),y={},y=h.useEval?eval("("+n+")"):JSON.parse(n),l=y.UserHistory,l&&l.QuerySets&&(e=it(l.QuerySets),e&&(e=e.slice(0,a)),b=e&&e.length,b))){for(o=t('<ul id="opensh"><li>'+h.shLbl+"<\/li><\/ul>"),d=u.getActivityId()||f.sitePage.requestId,s=0;s<b;s++)v=e[s],v&&v.Text&&o.append(rt(v,d,s));g=w();ut=g.find(c);ut.remove();ft=r('<li class="clrsh"><a href="{1}" title="{2}">{0}<\/a><\/li>',h.manageHistory.manageText,h.manageHistory.manageURL,h.manageHistory.manageText);o.append(ft);et=!0;et?(i.after(o),nt(o,d)):p(o,g,elementTrackingDecorator)}}catch(ot){}tt()}function nt(n,i){require(["elementTrackingDecorator","c.pageComplete"],function(r){var e=u.getActivityId()||f.sitePage.requestId,o,s;i!==e&&(o=n.html().replace(new RegExp(i,"g"),e),n.html(o));s=w();t(c).remove();p(n,s,r)})}function p(n,r,u){var e={defaults:{n:"recentsearch"},selector:"ul,li>a",elementOverride:function(n,i){var r=t(n);r.attr("id")=="opensh"?i.n="searchhistory":r.parent().hasClass("clrsh")&&(i.n="managehistory")},visibilityCheck:!1},f;u&&u.setTrackingAttrs(n,r,e,!0);i.after(n);f=r.find(c);require(["track"],function(n){n.trackPartialImpression(f,!1)})}function w(){var n=t("#header-search");return n.length||(n=t("#searchhistory")),n}function tt(){h.captureTTSH&&(n.performance&&n.performance.mark("TTSH"),define("c.ttsh",1))}function it(n){var i=null,t;if(!n)return i;for(t=0;t<n.length;t++)n[t].Type==h.queryType&&(i=n[t].Queries);return i}function rt(n,i,r){var u=h.processItemUrl?h.bingUrl+h.processItemUrl(n,v):h.bingUrl+n.Url.replace(/FORM=[O|o]\d*MSN\d*/gi,"FORM={0}".format(v)),f,e;return u+="&refig="+i,u+="&httpsmsn=1",f=t("<a>").attr({href:u,title:n.Text,target:h.target}).text(n.Text),h.addAriaLabelToItems&&f.attr("aria-label",o.SearchHistoryItemLinkText.format(r+1,n.Text)),e=n.Text.length<l?"<li>":'<li class="shrink">',t(e).append(f)}var c="#opensh",b="cac";if(b="edgecac",!n.mscc||n.mscc.hasConsent()){var v=h.shfc,l=h.maxLength,a=h.maxResults;d()}}var h={shUrl:"https://www.bing.com/msnhomepagehistory.aspx",bingUrl:"https://www.bing.com",maxResults:4,queryType:"recent",maxLength:9,fourColAdj:8,target:"_blank",shLbl:o.Header,manageHistory:{manageText:o.ManageHistoryText,manageURL:o.ManageHistoryUrl},shfc:"PRHPHI",enableUnitTesting:!0,useEval:!0,captureTTSH:!1,addAriaLabelToItems:!1};return i(c,h)});define("getSpartanSearchFormCode",["spartanPageDetectionHelper","getCookie","displayOptionsHelper","browserAccess","browserState","location","navigation","deviceGroup"],function(n,t,i,r,u,f,e,o){return function(s){function p(){return l?"EDGNB1":"EDGSPH"}function y(n){switch(n){case"contentOff":return l?"EDGNB3":"EDNTHN";case"contentOn":return l?"EDGNB2":"EDNTHT"}}var c,l=r.isServiceUiAvailable()&&u.getThirdPartySearchProvider()&&!0,h=n.isDhpPage,v=n.isNtpPage,a;return n.isExtNtpPage?c=i.shouldRenderTopSitesOnly()?s?"ICECS2":"ICECH2":s?"ICECS1":"ICECH1":n.isIeNtpPage?(a=f.search,c=a&&e.getParamsFromUrl(a.toLowerCase()).ntlogo==="0"?"IENTS1":parseInt(t("FreWv"))>=2?"IENT2H":"IENTSH"):c=(h||v)&&o.isXbox?s?h?"EXBSP3":"EXBNT3":h?"EXBSP4":"EXBNT4":(h||v)&&t("child")?"EDGNTK":h?s?p():"EDGSH1":i.shouldRenderTopSitesOnly()?s?y("contentOff"):"EDGSH4":s?y("contentOn"):"EDGSH3",c}});define("searchHistoryCore",["binding","document","serviceuihelper","browserState","format","getSpartanSearchFormCode","mediator","searchHistory.tokens","searchHistoryHelper","requestPageRevealCallback","c.bingsso"],function(n,t,i,r,u,f,e,o,s,h){function c(){var u,c,l;if(!r.getThirdPartySearchProvider()){if(!i.showSearchHistory())return;i.features.CanHideOrShowSearchHistory&&e.sub(i.events.changeSearchHistoryVisibility,function(n){var i=t.getElementById("opensh");i&&(i.style.visibility=n?"visible":"hidden")});i.features.CanGetOneBoxPosition&&(u=t.getElementById("searchhistory"),u&&u.classList.add("rs-version"));c=f(!1);l=i.features.CanRenderHtmlHeader?"#srchfrm":"#searchhistory>#srchfrm";h(function(){n("searchHistory",l).all({shfc:c,shUrl:o.SpartanFetchSearchHistoryUrl,target:"_self",manageHistory:{manageURL:o.SpartanManageHistoryUrl.format(c)},useEval:!1,captureTTSH:!0,addAriaLabelToItems:!0,processItemUrl:s.processItemUrl})})}}return{initialize:c}});require(["searchHistoryCore"],function(n){n.initialize()});require(["searchHistoryHelper"],function(n){n.setup({addEduParams:!0})});g_ashsC=g_ashsC||{};g_hsSetup=function(){};define("autoSuggestSnR",["jquery","jqBehavior","pageInstance","trackInfo","mediator","getCookie","setCookie","format","track","location","window","document","browserState","headData","perfMarker"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){function k(t,o){function b(n,t){return typeof n=="string"&&(!t||n.length>=t)}function nt(n){return typeof n!="undefined"}function et(){var n=new RegExp("\\b"+ut+"=0\\b","i");return f(rt).match(n)}function ot(){var i=yt(),n=l.createElement("script"),t;n.src=i;n.onload=st;t=l.getElementsByTagName("head")[0];t.appendChild(n)}function st(){o.delayBind<2&&y("TimeToFirstSearchAvailable",!0);var n=c[it],t;n&&(t=n.fire)&&(n.fire=function(){arguments&&arguments[0]==="onSearch"&&vt();t.apply(this,arguments)})}function ht(){var n=et();return nt(c[w])?(c[w].enable(!n),at(),1):t[0]&&h[0]&&!n?(o.delayBind==2&&(d=1),ot(),1):0}function ct(){return b(f("_SS"),5)||e("_SS","SID=00",365,o.cookieDomain,"/"),1}function tt(t,i){t==0?i():t==1?n(l).ready(i):t==2&&lt(i)}function lt(n){var t=".asue";h.bind("click"+t,function(){n()&&h.unbind(t)}).bind("keyup"+t,function(i){i.which!=27&&i.which!=9&&n()&&h.unbind(t)})}function at(){var t,r,i,u;g||(t=b(k.cn,1)?k.cn.split("+"):null,t&&b(t[0],1)&&(r=f(t[0]),b(r,4)&&(i=r.match(/SID=[\d(A-Z(a-z)]+/),i&&b(i[0],5)&&(g=i[0].substr(4)))));nt(c[w])&&(u="sid",n.isFunction(c[w][u])&&c[w][u](g),d&&(d=0,l.activeElement==h[0]&&h.click()))}function vt(){var i=t[0],n=i&&i.action&&i.action.indexOf("://")>=0?i.action:"",r;n&&(r=(n.indexOf("?")!==-1?"&":"?")+"msnst=AS",n=n+r);s.trackEvent({type:"submit",target:t[0]},null,n,h.val())}function yt(){return pt()}function pt(){var u=a.getMachineOsMarket()||"US",t=a.getMachineOsLanguage()||"en-US",f=i.getActivityId()||r.sitePage.requestId,n="{0}://www.bing.com/as/init?cc={1}&setlang={2}&pt=msnedgentp&refig={3}".format(p,u,t,f);return o.delayBind<2&&(n+="&onload=1"),t.toLowerCase()!=="en-us"&&(n+="&endpt=1"),n}var it="sj_evt",rt="SRCHHPGUSR",ut="AS",w="sa_inst",k=o.sharedCk,d=0,g,h=n("#"+o.inputId,t),ft;u.sub("autosuggestPreventSubmit",function(){ft=!1});tt(o.delayBind,ht);tt(k.delay,function(){return ct()})}var p="https",b={formId:"srchfrm",inputId:"q",featureType:1,cookieExpiry:365,cookieDomain:"msn.com",partnerEndpointValue:"iceprime_homepage",sharedCk:{delay:1,ru:p+"://"+h.host+"/sck.aspx&form=MSN005",pu:p+"://www.bing.com/sck",cn:"_SS",domain:"msn.com"}},w=t(k,b);return w.resize=function(n){c.sa_inst&&c.sa_inst.autosuggest.setQuery(n.val())},w});require(["binding","c.deferred"],function(n){var t="2",i;t=t.length?t:2;i="iceprime_homepage";n("autoSuggestSnR","#srchfrm").all({delayBind:t,partnerEndpoint:i})});require(["document","c.pageComplete"],function(n){var t=n.body.querySelector("#spfooter");t&&(t.style.visibility="visible")});define("coachMarks",["document","mediator","webStorage","getCookie","setCookie","window","track","trackInfo","promise","errorCategory"],function(n,t,i,r,u,f,e,o,s,h){function ir(){(c=n.getElementById(bi),c)&&(b=n.getElementById(nr),v=n.getElementById(ti),a=n.getElementById(gi),w=i.getObject(ri)||{},hr(),v&&v.addEventListener(y,k),st=r(ii)||"",t.pub(hi))}function rr(n,t,i,r,u){var o,f,s=10,h,c=t.left+t.width/2,l=Math.max(c-i.width/2,n.left),a=n.right-i.width,e;return f=Math.min(l,a),h=u===ut.Above?t.top-i.height-s:t.bottom+s,e=r*Math.sqrt(2)/2,o=i.width>t.width?Math.abs(f-t.left)+t.width/2-e:i.width/2-e,{arrowPosition:o,leftPosition:f,topPosition:h}}function ci(n,t){if(p)return!1;if(t<0)return!0;var i=w[n];return w[n]===ht||ur(n)?!1:typeof i=="number"?i<t:!0}function ur(n){return st.indexOf(n)!==-1}function li(n){try{return JSON.parse(n.getAttribute(ni))}catch(t){return null}}function fr(){return c}function ai(n){return n[l.Id]||null}function er(){return a}function or(t){var i=t&&t[l.ReferenceElement];if(i&&!pi(t))return n.querySelector(i)}function k(t,i){c&&p&&(p=!1,ft=new s(function(r){c.addEventListener(et,function u(o){o.stopPropagation();c.removeEventListener(et,u);c.classList.add(at);c.removeAttribute("style");t&&t.target&&t.target.id!==ti&&e.trackEvent({type:gt,target:t.target},"","",si);it&&v.removeEventListener(y,it);pt=null;yt=null;f.removeEventListener(ei,ct);f.removeEventListener(oi,ct);n.removeEventListener(y,k);r();d(i)});c.classList.add(tt)}))}function vi(n,t){c&&b&&(p=!1,ft=new s(function(i){b.addEventListener(et,function r(u){u.stopPropagation();b.removeEventListener(et,r);n&&n.target&&e.trackEvent({type:gt,target:n.target},"","",si);i();d(t)});b.classList.add(tt)}))}function sr(t,i,r,u){var e=t+r,o=i+u;return e>=0&&o>=0&&e<=(f.innerHeight||n.documentElement.clientHeight)&&o<=(f.innerWidth||n.documentElement.clientWidth)}function hr(){var t=n.querySelectorAll("["+ni+"]"),i,r,u,f;if(t&&t.length)for(i=0;i<t.length;i++)(r=t[i],u=li(r),u)&&(f=ai(u),f&&(vt[f]=r))}function bt(t,i){var u;if(nt=!0,t=pt||t,i=yt||i,i==ut.Overlay)return nt=!1,!0;if(!t)return nt=!1,!1;u="px";lt=lt||n.getElementById("maincontent")||n.body;g=g||c.querySelector("div.arrow");var e=t.getBoundingClientRect(),f=c.getBoundingClientRect(),o=lt.getBoundingClientRect(),s=g&&g.offsetWidth,r=rr(o,e,f,s,i);return c.style.left=r.leftPosition+u,c.style.top=r.topPosition+u,g.style.left=r.arrowPosition+u,nt=!1,sr(r.topPosition,r.leftPosition,f.width,f.height)}function ct(){nt||requestAnimationFrame(bt)}function cr(n,i,r,f,e){var h,s,a;vt[n]&&ci(n,e)&&(h=vt[n],s=li(h),s)&&(a=wi(s),a)&&(p=!0,ot.then(function(){if(r)c.className=at,p=!1;else{f=f||h;var a=s[l.Position],w=bt(f,a);w?yi(f,a):p=!1}i&&o.updateTemplValue(i+(r?":0":":1"));t.pub("ViewabilityUpdatedEvent");e&&e!==1?e>1&&(br(n,e),st+=","+n,u(ii,st,0,u.topDomain,"/"),it=function(){dt(n)},v&&v.addEventListener(y,it)):dt(n)}))}function lr(i,r,u,f,e,o,s){if(!i){d(u);return}var h=function(){var h=n.querySelector(i[l.ReferenceElement]||"#maincontent"),a,c,v;if(!wr(h)){d(u);return}if(i[l.PaginationText]=r,a=wi(i,!0,f,o),!a){d(u);return}c=i[l.Position];bt(h,c);v=rt?function(){pr(!0,u,s)}:function(){yi(h,c,!0,u,e,s)};p=!0;ot.then(function(){v();t.pub("ViewabilityUpdatedEvent")})};p&&k();ft?ft.then(h):h()}function kt(){i.setObject(ri,w)}function dt(n){w[n]!==ht&&(w[n]=ht,kt())}function ar(n){n.keyCode===9&&(a.focus(),n.preventDefault())}function vr(n,t){n.keyCode===27&&k(n,t)}function yr(n){a&&n.keyCode===9&&(v.focus(),n.preventDefault())}function yi(t,i,r,u,e,o){pt=t;yt=i;i!==ut.Overlay&&(f.addEventListener(ei,ct),f.addEventListener(oi,ct));r?(a&&a.addEventListener(y,function s(t){n.activeElement.blur();this.removeEventListener(y,s);var i=o?function(){vi(t,u)}:function(){k(t,u)};rt=o;i()}),v&&v.addEventListener(y,function h(){n.activeElement.blur();this.removeEventListener(y,h);d(e)}),a&&a.addEventListener(wt,yr),v&&v.addEventListener(wt,ar),c&&c.addEventListener(wt,function(n){vr(n,e)})):n.addEventListener(y,k);c.classList.remove(at);c.classList.remove(tt);c.classList.add(tr);a&&a.focus()}function pr(t,i,r){t&&a&&a.addEventListener(y,function u(t){n.activeElement.blur();this.removeEventListener(y,u);var f=r?function(){vi(t,i)}:function(){k(t,i)};rt=r;f()});b.classList.remove(tt);a&&a.focus()}function pi(n){return n&&n[l.Position]===ut.Overlay}function wr(n){if(!n)return!1;var t=f.getComputedStyle(n);return t.display!=="none"&&t.visibility==="visible"}function d(n){typeof n=="function"&&n()}function wi(t,i,r,u){var f,y;if(t&&t[l.Title]&&t[l.Description]&&c){var p=t[l.Id],w=t[l.Size],k=t[l.Position],d=t[l.Title],o=t[l.Description],h=t[l.ImageUrl],g=t[l.PaginationText],v=t[l.ActionButtonText],e=[];return e.push(w),e.push(k),rt||e.push(tt),u&&e.push(u),c.getElementsByTagName("h2")[0].innerText=d,c.getElementsByTagName("span")[0].innerText=o,f=c.getElementsByTagName("img")[0],h?(f||(f=n.createElement("img"),b.insertBefore(f,b.firstChild)),f.setAttribute("src",h),f.setAttribute("alt",h&&o?o:""),ot=new s(function(n){f.addEventListener(fi,function t(){f.removeEventListener(fi,t);n()});f.addEventListener(ui,function i(){f.removeEventListener(ui,i);n()})})):(f&&f.remove(),ot=s.resolve()),y=c.getElementsByClassName("pagination")[0],y&&i&&(e.push(di),y.getElementsByTagName("span")[0].innerText=g,a&&v&&(a.setAttribute("title",v),a.innerText=v),r&&e.push(ki)),kr(p),c.className=e.join(" "),!0}}function br(n,t){var i=w[n]||0;typeof i=="number"?(i++,i===t?dt(n):(w[n]=i,kt())):i!==ht&&(w[n]=0,kt())}function kr(n){var t;if(n){var r="data-m",u="data-dtn",f=c.getAttribute(r),i=c.getAttribute(u);if(f)try{t=JSON.parse(f);t&&t.n&&(i||(i=t.n,c.setAttribute(u,i)),t.n=i+"_"+n,c.setAttribute(r,JSON.stringify(t)))}catch(o){e.trackAppErrorEvent(h.updateTrackingInfo)}}}var lt,gt="click_nonnav",it,g,ni="data-coachmark",l={ActionButtonText:"abt",Description:"d",Id:"id",ImageUrl:"i",PaginationText:"pt",Position:"p",ReferenceElement:"re",Size:"s",Title:"t"},c,bi="coachmark",v,ti="coachmark_close",at="hidden",ki="lastpage",ii="cmdisp",p=!1,vt={},rt=!1,di="paginated",gi="coachmark_cta",a,ut={Above:"above",Below:"below",Overlay:"overlay"},w={},ri="cm-view-states",b,nr="cm_content",yt,pt,ft,y="click",ui="error",wt="keydown",fi="load",ei="resize",oi="scroll",et="transitionend",ot,nt=!1,st,si="coachmark_close_soft",tr="trans",ht="d",tt="invisible",hi="coachmark_map_initialized";return{canRenderCoachMark:ci,coachMarkAttributeKeys:l,getCoachMarkContainer:fr,getCoachMarkPaginationCtaButton:er,getCoachMarkId:ai,getReferenceElement:or,hideCoachMarkContainer:k,initialize:ir,isOverlayCoachMark:pi,renderCoachMark:cr,renderPaginatedCoachMark:lr,coachMarkInitEvent:hi}});require(["coachMarks","c.deferred"],function(n){n.initialize()});define("spartanHeader",["document","serviceuihelper","browserState","spartanHeaderHelper","cookieComplianceHelper","viewport","c.dom"],function(n,t,i,r,u,f){function a(){v();y();b();return}function v(){if(e){var n="keydown";e.addEventListener(n,function t(i){var r=i.keyCode;r!==9&&r!==27&&(e.removeEventListener(n,t),u.grantCookieConsentAndDecorateLink(i,null,!0))})}}function y(){var r,u;if(h){if(i.getThirdPartySearchProvider())if(l)r=n.getElementsByClassName("bingicon")[0],r&&r.classList.add("nonbing");else{w();return}s?(u=n.querySelector("body"),u&&u.classList.add("htmlheader"),p()):t.pinOneBox(!0,o)}}function p(){if(o!==c){t.shiftFocusToWeb(o);return}e&&o&&c&&!t.oneBoxIsShown()&&e.focus()}function w(){h&&s&&!t.features.OneBoxPinnedByDefault&&t.pinOneBox(!1,!1)}function b(){define("c.headerReady",1)}var s=r.isOneBoxPinned(),h=t.features.CanRenderHtmlHeader,c=r.isFocusShiftToWebContent(),o=r.shouldFocusShiftToWebContent(),l=!0,e=n.getElementById("q"),k=f.getDimensions().height;return{setup:a}});require(["spartanHeader"],function(n){n.setup()});define("addEduSkuSearchFormElements",["jquery","eduSkuHtmlSearchProperties","format","spartanPageDetectionHelper","c.pageComplete"],function(n,t,i,r){return function(n){if(n.length){var i="",u=t.partnerSearchCode;u&&!r.isIeNtpPage&&(i+='<input name="PC" type="hidden" value="{0}">'.format(u));t.isEnableRegulatoryPsm&&(i+='<input name="DAF0" type="hidden" value="1">');t.isEnableCpsm&&(i+='<input name="DAF1" type="hidden" value="1">');i&&n.append(i)}}});define("updateSpartanSearchFormCode",["jquery","getSpartanSearchFormCode","mediator","spartanPageDetectionHelper"],function(n,t,i,r){function f(){var t=n("#srchfrm");t.length&&u(t)}function u(n){var i=t(!0);n.attr("data-form-code",i);n.find('input[name="form"]').val(i)}return r.isIeNtpPage||i.sub("updatesearchformcodes",f),{updateSearchFormCodeAttribute:u}});define("updateSpartanSearchFormElements",["jqBehavior","addEduSkuSearchFormElements","updateSpartanSearchFormCode","spartanPageDetectionHelper","c.pageComplete"],function(n,t,i,r){function u(n){n.length&&(r.isIeNtpPage||i.updateSearchFormCodeAttribute(n),r.isExtNtpPage||t(n))}return n(u)});require(["binding"],function(n){n("updateSpartanSearchFormElements","#srchfrm").all()});define("sso",["window","headData","getCookie"],function(n,t,i){var r="sso_completed";return function(u,f){var v,o,e,s,c,h,l,a,y;if(t=t||{},v=t.clientSettings||{},!n.mscc||n.mscc.hasConsent()){if(u=u||function(){},o=t.sso,!o||v.static_page||i("eso")=="1"){u({signedIn:!1,closed:!1});return}o=o.replace(/amp;/g,"&");f=f||n;e=f.document.createElement("IFRAME");e.id="sso_frame";e.style.width="1px";e.style.height="1px";e.style.position="absolute";e.style.visibility="hidden";e.style.left="0";e.style.bottom="0";e.src=o;f.document.body.appendChild(e);s=null;c=function(n){var t=n.data;t&&(t.ssoStatus===r||t.ssoStatus==="sso_failed")&&(s=t.ssoStatus,define("ssoData",t))};f.addEventListener?(h="message",f.addEventListener(h,c,!1),l=f.removeEventListener):(h="onmessage",f.attachEvent(h,c),l=f.detachEvent);a=0;y=f.setInterval(function(){if(s||a>=5){var n={signedIn:s===r,closed:!!s};f.clearInterval(y);l.call(f,h,c);f.document.body.removeChild(e);u(n);n.signedIn&&(t.anonckname="anon",t.ssocomplete=!0,define("c.sso",t.signedin=1))}else a++},1e3)}}});require(["sso","c.pageComplete"],function(n){n(function(n){define("ssoResult",n)})});define("appCacheHelper",["window","document","spartanSharedHelper","getCookie","setCookie","webStorage","navigator","track","errorCategory","browserAccess"],function(n,t,i,r,u,f,e,o,s,h){function ut(n){if(c.status===c.UNCACHED){v(k,n||s.achForceUpdateUnCachedState);return}d=n;f.removeItem(l);u(y,"1",1,u.topDomain,"/");c.update()}function ft(){f.getItem(l)==="1"&&nt();c.onupdateready=a;c.onnoupdate=a;c.onerror=a;c.oncached=a;c.onobsolete=ot;a(null,!0);e.onLine||et()}function et(){n.addEventListener(rt,function(){v(!1,s.achOnlineHandler)});g(!0)}function g(n){require(["c.dom"],function(){var i=t.body.querySelector(it);i&&(i.style.display=n?"block":"none")})}function a(n,t){var i,r,h,u,e;if(t||at(),n&&n.type==="error"&&o.trackAppErrorEvent(s.appCacheOnErrorStatus),i=c.status,i===c.UPDATEREADY){if(st())return;if(r=ht(),w(),h=!1,!r&&h)return;ct();u=f.getItem(b);e=Date.now();r||!u||Math.abs(e-u)>tt?(f.setItem(b,e),v(k,d||s.achCheckStatus)):o.trackAppErrorEvent(s.appCacheRapidRefreshError)}else(i===c.IDLE||i===c.OBSOLETE||i===c.UNCACHED)&&(nt(),w(),lt())}function ot(){w();o.trackAppErrorEvent(s.appCacheOnObsoleteStatus);setTimeout(function(){v(!1,s.achOnObSolete)},0)}function st(){var n=f.getItem(l)==="1";return n?(f.removeItem(l),!0):!1}function ht(){return r(y)==="1"?(f.setItem(l,"1"),!0):!1}function v(n,t){g(!1);i.refreshPage(n,t)}function w(){u(y,"0",-1,u.topDomain,"/")}function nt(){define("c.appCacheUpdateCheckDone",1)}function ct(){f.setItem(p,"1")}function lt(){var n=f.getItem(p)==="1";n?f.removeItem(p):define("c.readyForRum",1)}function at(){t.querySelector("html[manifest]")&&(c.status===c.UNCACHED||c.status===c.OBSOLETE)&&o.trackAppErrorEvent({errId:s.applicationCacheUnhealthyState.errId,errMsg:s.applicationCacheUnhealthyState.errMsg+c.status,errSource:s.applicationCacheUnhealthyState.errSource})}var c=n.applicationCache,tt=3e3,y="fu",b="lastPageRefreshDueToAppCache",it="#dnserror_dhp_ntp_offline",p="supressRum",l="wasForceUpdated",rt="online",k=h.features.AppCacheForceRefreshFromServer,d;return ft(),{forceUpdate:ut}})